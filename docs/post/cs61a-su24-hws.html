<!DOCTYPE html>
<html data-color-mode="light" data-dark-theme="dark" data-light-theme="light" lang="zh-CN">
<head>
    <meta content="text/html; charset=utf-8" http-equiv="content-type" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link href='https://mirrors.sustech.edu.cn/cdnjs/ajax/libs/Primer/21.0.7/primer.css' rel='stylesheet' />
    
    <link rel="icon" href="https://img.icons8.com/doodle/480/mugman.png"><script>
        let theme = localStorage.getItem("meek_theme") || "light";
        document.documentElement.setAttribute("data-color-mode", theme);
    </script>
<meta name="description" content="# CS61 Summer2024  homework 



## hw01



```python
from operator import add, sub

def a_plus_abs_b(a, b):
    '''Return a+abs(b), but without calling abs.

    >>> a_plus_abs_b(2, 3)
    5
    >>> a_plus_abs_b(2, -3)
    5
    >>> a_plus_abs_b(-1, 4)
    3
    >>> a_plus_abs_b(-1, -4)
    3
    '''
    if b < 0:
        f = sub
    else:
        f = add
    return f(a, b)


def two_of_three(i, j, k):
    '''Return m*m + n*n, where m and n are the two smallest members of the
    positive numbers i, j, and k.

    >>> two_of_three(1, 2, 3)
    5
    >>> two_of_three(5, 3, 1)
    10
    >>> two_of_three(10, 2, 8)
    68
    >>> two_of_three(5, 5, 5)
    50
    '''
    return i ** 2 + j ** 2 + k ** 2 - max(i, j, k) ** 2



def largest_factor(n):
    '''Return the largest factor of n that is smaller than n.

    >>> largest_factor(15) # factors are 1, 3, 5
    5
    >>> largest_factor(80) # factors are 1, 2, 4, 5, 8, 10, 16, 20, 40
    40
    >>> largest_factor(13) # factor is 1 since 13 is prime
    1
    '''
    i = n - 1
    while i >= 1:
        if n % i == 0: 
            return i
        i = i -1    



def hailstone(n):
    '''Print the hailstone sequence starting at n and return its
    length.

    >>> a = hailstone(10)
    10
    5
    16
    8
    4
    2
    1
    >>> a
    7
    >>> b = hailstone(1)
    1
    >>> b
    1
    '''
    length = 1
    while n != 1:
        print(n)
        if n % 2 == 0:
            n = n //2
        else:
            n = 3 * n + 1
        length = length + 1
    print(n)
    return length
```

## hw02

```python
from operator import add, mul, sub

square = lambda x: x * x

identity = lambda x: x

triple = lambda x: 3 * x

increment = lambda x: x + 1


HW_SOURCE_FILE=__file__


def product(n, term):
    '''Return the product of the first n terms in a sequence.

    n: a positive integer
    term:  a function that takes one argument to produce the term

    >>> product(3, identity)  # 1 * 2 * 3
    6
    >>> product(5, identity)  # 1 * 2 * 3 * 4 * 5
    120
    >>> product(3, square)    # 1^2 * 2^2 * 3^2
    36
    >>> product(5, square)    # 1^2 * 2^2 * 3^2 * 4^2 * 5^2
    14400
    >>> product(3, increment) # (1+1) * (2+1) * (3+1)
    24
    >>> product(3, triple)    # 1*3 * 2*3 * 3*3
    162
    '''
    i, product_result = 1, 1
    while i <= n:
        product_result, i = product_result * term(i), i + 1
    return product_result


def accumulate(fuse, start, n, term):
    '''Return the result of fusing together the first n terms in a sequence 
    and start.  The terms to be fused are term(1), term(2), ..., term(n). 
    The function fuse is a two-argument commutative & associative function.

    >>> accumulate(add, 0, 5, identity)  # 0 + 1 + 2 + 3 + 4 + 5
    15
    >>> accumulate(add, 11, 5, identity) # 11 + 1 + 2 + 3 + 4 + 5
    26
    >>> accumulate(add, 11, 0, identity) # 11 (fuse is never used)
    11
    >>> accumulate(add, 11, 3, square)   # 11 + 1^2 + 2^2 + 3^2
    25
    >>> accumulate(mul, 2, 3, square)    # 2 * 1^2 * 2^2 * 3^2
    72
    >>> # 2 + (1^2 + 1) + (2^2 + 1) + (3^2 + 1)
    >>> accumulate(lambda x, y: x + y + 1, 2, 3, square)
    19
    '''
    i = 1
    product_result = start
    while i <= n:
        product_result = fuse(product_result, term(i))
        i = i + 1
    return product_result


def summation_using_accumulate(n, term):
    '''Returns the sum: term(1) + ... + term(n), using accumulate.

    >>> summation_using_accumulate(5, square) # square(0) + square(1) + ... + square(4) + square(5)
    55
    >>> summation_using_accumulate(5, triple) # triple(0) + triple(1) + ... + triple(4) + triple(5)
    45
    >>> # This test checks that the body of the function is just a return statement.
    >>> import inspect, ast
    >>> [type(x).__name__ for x in ast.parse(inspect.getsource(summation_using_accumulate)).body[0].body]
    ['Expr', 'Return']
    '''
    return accumulate(add, term(0), n, term)


def product_using_accumulate(n, term):
    '''Returns the product: term(1) * ... * term(n), using accumulate.

    >>> product_using_accumulate(4, square) # square(1) * square(2) * square(3) * square()
    576
    >>> product_using_accumulate(6, triple) # triple(1) * triple(2) * ... * triple(5) * triple(6)
    524880
    >>> # This test checks that the body of the function is just a return statement.
    >>> import inspect, ast
    >>> [type(x).__name__ for x in ast.parse(inspect.getsource(product_using_accumulate)).body[0].body]
    ['Expr', 'Return']
    '''
    return accumulate(mul,1,n,term)


def make_repeater(f, n):
    '''Returns the function that computes the nth application of f.

    >>> add_three = make_repeater(increment, 3)
    >>> add_three(5)
    8
    >>> make_repeater(triple, 5)(1) # 3 * (3 * (3 * (3 * (3 * 1))))
    243
    >>> make_repeater(square, 2)(5) # square(square(5))
    625
    >>> make_repeater(square, 3)(5) # square(square(square(5)))
    390625
    '''
    def repeater(x):
            k = 0
            while k < n:
                x, k = f(x), k + 1
            return x
    return repeater 


def digit_distance(n):
    '''Determines the digit distance of n.

    >>> digit_distance(3)
    0
    >>> digit_distance(777)
    0
    >>> digit_distance(314)
    5
    >>> digit_distance(31415926535)
    32
    >>> digit_distance(3464660003)
    16
    >>> from construct_check import check
    >>> # ban all loops
    >>> check(HW_SOURCE_FILE, 'digit_distance',
    ...       ['For', 'While'])
    True
    '''
    if n < 10:
        return 0
    else:
        return abs(sub(n % 10, n // 10 % 10)) + digit_distance(n // 10)


def interleaved_sum(n, odd_func, even_func):
    '''Compute the sum odd_func(1) + even_func(2) + odd_func(3) + ..., up
    to n.

    >>> identity = lambda x: x
    >>> square = lambda x: x * x
    >>> triple = lambda x: x * 3
    >>> interleaved_sum(5, identity, square) # 1   + 2*2 + 3   + 4*4 + 5
    29
    >>> interleaved_sum(5, square, identity) # 1*1 + 2   + 3*3 + 4   + 5*5
    41
    >>> interleaved_sum(4, triple, square)   # 1*3 + 2*2 + 3*3 + 4*4
    32
    >>> interleaved_sum(4, square, triple)   # 1*1 + 2*3 + 3*3 + 4*3
    28
    >>> from construct_check import check
    >>> check(HW_SOURCE_FILE, 'interleaved_sum', ['While', 'For', 'Mod']) # ban loops and %
    True
    >>> check(HW_SOURCE_FILE, 'interleaved_sum', ['BitAnd', 'BitOr', 'BitXor']) # ban bitwise operators, don't worry about these if you don't know what they are
    True
    '''

    if n == 0:
        return 0
    elif n % 2 == 1:
        return odd_func(n) + interleaved_sum(n - 1, odd_func, even_func)
    else:
        return even_func(n) + interleaved_sum(n - 1, odd_func, even_func)


def next_larger_coin(coin):
    '''Returns the next larger coin in order.
    >>> next_larger_coin(1)
    5
    >>> next_larger_coin(5)
    10
    >>> next_larger_coin(10)
    25
    >>> next_larger_coin(2) # Other values return None
    '''
    if coin == 1:
        return 5
    elif coin == 5:
        return 10
    elif coin == 10:
        return 25

def next_smaller_coin(coin):
    '''Returns the next smaller coin in order.
    >>> next_smaller_coin(25)
    10
    >>> next_smaller_coin(10)
    5
    >>> next_smaller_coin(5)
    1
    >>> next_smaller_coin(2) # Other values return None
    '''
    if coin == 25:
        return 10
    elif coin == 10:
        return 5
    elif coin == 5:
        return 1

def count_coins(total):
    '''Return the number of ways to make change using coins of value of 1, 5, 10, 25.
    >>> count_coins(15)
    6
    >>> count_coins(10)
    4
    >>> count_coins(20)
    9
    >>> count_coins(100) # How many ways to make change for a dollar?
    242
    >>> count_coins(200)
    1463
    >>> from construct_check import check
    >>> # ban iteration
    >>> check(HW_SOURCE_FILE, 'count_coins', ['While', 'For'])
    True
    '''
                                        
    def helper(total, coin):
        if total == 0:
            return 1
        if total < 0 or not coin :
            return 0
        return helper(total - coin,coin) + helper(total, next_smaller_coin(coin))
    return helper(total, 25)
```

## hw03



```python

HW_SOURCE_FILE=__file__


def pascal(row, column):
    '''Returns the value of the item in Pascal's Triangle
    whose position is specified by row and column.
    >>> pascal(0, 0)    # The top left (the point of the triangle)
    1
    >>> pascal(0, 5)	# Empty entry; outside of Pascal's Triangle
    0
    >>> pascal(3, 2)	# Row 3 (1 3 3 1), Column 2
    3
    >>> pascal(4, 2)     # Row 4 (1 4 6 4 1), Column 2
    6
    '''
    if column == 0:
        return 1
    elif row == 0:
        return 0
    else:
        return pascal(row - 1, column) + pascal(row - 1, column - 1)

def insert_items(s, before, after):
    '''Insert after into s after each occurrence of before and then return s.

    >>> test_s = [1, 5, 8, 5, 2, 3]
    >>> new_s = insert_items(test_s, 5, 7)
    >>> new_s
    [1, 5, 7, 8, 5, 7, 2, 3]
    >>> test_s
    [1, 5, 7, 8, 5, 7, 2, 3]
    >>> new_s is test_s
    True
    >>> double_s = [1, 2, 1, 2, 3, 3]
    >>> double_s = insert_items(double_s, 3, 4)
    >>> double_s
    [1, 2, 1, 2, 3, 4, 3, 4]
    >>> large_s = [1, 4, 8]
    >>> large_s2 = insert_items(large_s, 4, 4)
    >>> large_s2
    [1, 4, 4, 8]
    >>> large_s3 = insert_items(large_s2, 4, 6)
    >>> large_s3
    [1, 4, 6, 4, 6, 8]
    >>> large_s3 is large_s
    True
    '''
    i = 0
    while i < len(s):
        if s[i] == before:
            s.insert(i + 1, after)
            i += 1
        i += 1
    return s


HW_SOURCE_FILE=__file__


def planet(mass):
    '''Construct a planet of some mass.'''
    assert mass > 0

    return ['planet', mass]
def mass(p):
    '''Select the mass of a planet.'''
    assert is_planet(p), 'must call mass on a planet'
    return p[1]


def is_planet(p):
    '''Whether p is a planet.'''
    return type(p) == list and len(p) == 2 and p[0] == 'planet'

def examples():
    t = mobile(arm(1, planet(2)),
               arm(2, planet(1)))
    u = mobile(arm(5, planet(1)),
               arm(1, mobile(arm(2, planet(3)),
                             arm(3, planet(2)))))
    v = mobile(arm(4, t), arm(2, u))
    return t, u, v

def total_mass(m):
    '''Return the total mass of m, a planet or mobile.

    >>> t, u, v = examples()
    >>> total_mass(t)
    3
    >>> total_mass(u)
    6
    >>> total_mass(v)
    9
    '''
    if is_planet(m):
        return mass(m)
    else:
        assert is_mobile(m), 'must get total mass of a mobile or a planet'
        return total_mass(end(left(m))) + total_mass(end(right(m)))

def balanced(m):
    '''Return whether m is balanced.

    >>> t, u, v = examples()
    >>> balanced(t)
    True
    >>> balanced(v)
    True
    >>> p = mobile(arm(3, t), arm(2, u))
    >>> balanced(p)
    False
    >>> balanced(mobile(arm(1, v), arm(1, p)))
    False
    >>> balanced(mobile(arm(1, p), arm(1, v)))
    False
    >>> from construct_check import check
    >>> # checking for abstraction barrier violations by banning indexing
    >>> check(HW_SOURCE_FILE, 'balanced', ['Index'])
    True
    '''
    if is_planet(m):
        return True
    else:
        left_end, right_end = end(left(m)), end(right(m))
        torque_left = length(left(m)) * total_mass(left_end)
        torque_right = length(right(m)) * total_mass(right_end)
        return torque_left == torque_right and balanced(left_end) and balanced(right_end)

def berry_finder(t):
    '''Returns True if t contains a node with the value 'berry' and 
    False otherwise.

    >>> scrat = tree('berry')
    >>> berry_finder(scrat)
    True
    >>> sproul = tree('roots', [tree('branch1', [tree('leaf'), tree('berry')]), tree('branch2')])
    >>> berry_finder(sproul)
    True
    >>> numbers = tree(1, [tree(2), tree(3, [tree(4), tree(5)]), tree(6, [tree(7)])])
    >>> berry_finder(numbers)
    False
    >>> t = tree(1, [tree('berry',[tree('not berry')])])
    >>> berry_finder(t)
    True
    '''
    if label(t) == 'berry':
        return True
    
    return len([x for x in branches(t) if berry_finder(x) == True]) > 0


HW_SOURCE_FILE=__file__


def max_path_sum(t):
    '''Return the maximum root-to-leaf path sum of a tree.
    >>> t = tree(1, [tree(5, [tree(1), tree(3)]), tree(10)])
    >>> max_path_sum(t) # 1, 10
    11
    >>> t2 = tree(5, [tree(4, [tree(1), tree(3)]), tree(2, [tree(10), tree(3)])])
    >>> max_path_sum(t2) # 5, 2, 10
    17
    '''
    if is_leaf(t):
        return label(t)
    
    return max([max_path_sum(i) for i in branches(t)]) + label(t)


def print_move(origin, destination):
    '''Print instructions to move a disk.'''
    print('Move the top disk from rod', origin, 'to rod', destination)

def move_stack(n, start, end):
    '''Print the moves required to move n disks on the start pole to the end
    pole without violating the rules of Towers of Hanoi.

    n -- number of disks
    start -- a pole position, either 1, 2, or 3
    end -- a pole position, either 1, 2, or 3

    There are exactly three poles, and start and end must be different. Assume
    that the start pole has at least n disks of increasing size, and the end
    pole is either empty or has a top disk larger than the top n start disks.

    >>> move_stack(1, 1, 3)
    Move the top disk from rod 1 to rod 3
    >>> move_stack(2, 1, 3)
    Move the top disk from rod 1 to rod 2
    Move the top disk from rod 1 to rod 3
    Move the top disk from rod 2 to rod 3
    >>> move_stack(3, 1, 3)
    Move the top disk from rod 1 to rod 3
    Move the top disk from rod 1 to rod 2
    Move the top disk from rod 3 to rod 2
    Move the top disk from rod 1 to rod 3
    Move the top disk from rod 2 to rod 1
    Move the top disk from rod 2 to rod 3
    Move the top disk from rod 1 to rod 3
    '''
    assert 1 <= start <= 3 and 1 <= end <= 3 and start != end, 'Bad start/end'
    if n == 1:
        print_move(start, end)
    else: 
        move_stack(n - 1, start, 6 - start - end)
        move_stack(1, start, end)
        move_stack(n - 1, 6 - start - end, end)

from operator import sub, mul

def make_anonymous_factorial():
    '''Return the value of an expression that computes factorial.

    >>> make_anonymous_factorial()(5)
    120
    >>> from construct_check import check
    >>> # ban any assignments or recursion
    >>> check(HW_SOURCE_FILE, 'make_anonymous_factorial',
    ...     ['Assign', 'AnnAssign', 'AugAssign', 'NamedExpr', 'FunctionDef', 'Recursion'])
    True
    '''
    return (lambda f: lambda k: f(f, k))(lambda f, k: k if k == 1 else mul(k, f(f, sub(k, 1))))


def mobile(left, right):
    '''Construct a mobile from a left arm and a right arm.'''
    assert is_arm(left), 'left must be an arm'
    assert is_arm(right), 'right must be an arm'
    return ['mobile', left, right]

def is_mobile(m):
    '''Return whether m is a mobile.'''
    return type(m) == list and len(m) == 3 and m[0] == 'mobile'

def left(m):
    '''Select the left arm of a mobile.'''
    assert is_mobile(m), 'must call left on a mobile'
    return m[1]

def right(m):
    '''Select the right arm of a mobile.'''
    assert is_mobile(m), 'must call right on a mobile'
    return m[2]

def arm(length, mobile_or_planet):
    '''Construct an arm: a length of rod with a mobile or planet at the end.'''
    assert is_mobile(mobile_or_planet) or is_planet(mobile_or_planet)
    return ['arm', length, mobile_or_planet]

def is_arm(s):
    '''Return whether s is an arm.'''
    return type(s) == list and len(s) == 3 and s[0] == 'arm'

def length(s):
    '''Select the length of an arm.'''
    assert is_arm(s), 'must call length on an arm'
    return s[1]

def end(s):
    '''Select the mobile or planet hanging at the end of an arm.'''
    assert is_arm(s), 'must call end on an arm'
    return s[2]



# Tree Data Abstraction

def tree(label, branches=[]):
    '''Construct a tree with the given label value and a list of branches.'''
    for branch in branches:
        assert is_tree(branch), 'branches must be trees'
    return [label] + list(branches)

def label(tree):
    '''Return the label value of a tree.'''
    return tree[0]

def branches(tree):
    '''Return the list of branches of the given tree.'''
    return tree[1:]

def is_tree(tree):
    '''Returns True if the given tree is a tree, and False otherwise.'''
    if type(tree) != list or len(tree) < 1:
        return False
    for branch in branches(tree):
        if not is_tree(branch):
            return False
    return True

def is_leaf(tree):
    '''Returns True if the given tree's list of branches is empty, and False
    otherwise.
    '''
    return not branches(tree)

def print_tree(t, indent=0):
    '''Print a representation of this tree in which each node is
    indented by two spaces times its depth from the root.

    >>> print_tree(tree(1))
    1
    >>> print_tree(tree(1, [tree(2)]))
    1
      2
    >>> numbers = tree(1, [tree(2), tree(3, [tree(4), tree(5)]), tree(6, [tree(7)])])
    >>> print_tree(numbers)
    1
      2
      3
        4
        5
      6
        7
    '''
    print('  ' * indent + str(label(t)))
    for b in branches(t):
        print_tree(b, indent + 1)

def copy_tree(t):
    '''Returns a copy of t. Only for testing purposes.

    >>> t = tree(5)
    >>> copy = copy_tree(t)
    >>> t = tree(6)
    >>> print_tree(copy)
    5
    '''
    return tree(label(t), [copy_tree(b) for b in branches(t)])

```



## hw04



```python
def hailstone(n):
    '''Q1: Yields the elements of the hailstone sequence starting at n.
       At the end of the sequence, yield 1 infinitely.

    >>> hail_gen = hailstone(10)
    >>> [next(hail_gen) for _ in range(10)]
    [10, 5, 16, 8, 4, 2, 1, 1, 1, 1]
    >>> next(hail_gen)
    1
    '''
    yield n
    if n == 1:
       yield from hailstone(1)
    elif n % 2 == 1: 
        yield from hailstone(n * 3 + 1)
    else:
        yield from hailstone(n // 2)


def merge(a, b):
    '''Q2:
    >>> def sequence(start, step):
    ...     while True:
    ...         yield start
    ...         start += step
    >>> a = sequence(2, 3) # 2, 5, 8, 11, 14, ...
    >>> b = sequence(3, 2) # 3, 5, 7, 9, 11, 13, 15, ...
    >>> result = merge(a, b) # 2, 3, 5, 7, 8, 9, 11, 13, 14, 15
    >>> [next(result) for _ in range(10)]
    [2, 3, 5, 7, 8, 9, 11, 13, 14, 15]
    '''
    first_a, first_b = next(a), next(b)
    while True:
        if first_a == first_b:
            yield first_a
            first_a, first_b = next(a), next(b)
        elif first_a < first_b:
            yield first_a
            first_a = next(a)
        else:
            yield first_b
            first_b = next(b)

def perms(seq):
    '''Q3: Generates all permutations of the given sequence. Each permutation is a
    list of the elements in SEQ in a different order. The permutations may be
    yielded in any order.

    >>> p = perms([100])
    >>> type(p)
    <class 'generator'>
    >>> next(p)
    [100]
    >>> try: # Prints 'No more permutations!' if calling next would cause an error
    ...     next(p)
    ... except StopIteration:
    ...     print('No more permutations!')
    No more permutations!
    >>> sorted(perms([1, 2, 3])) # Returns a sorted list containing elements of the generator
    [[1, 2, 3], [1, 3, 2], [2, 1, 3], [2, 3, 1], [3, 1, 2], [3, 2, 1]]
    >>> sorted(perms((10, 20, 30)))
    [[10, 20, 30], [10, 30, 20], [20, 10, 30], [20, 30, 10], [30, 10, 20], [30, 20, 10]]
    >>> sorted(perms('ab'))
    [['a', 'b'], ['b', 'a']]
    '''
    if len(seq) == 1:
        yield [seq[0]]
    else:
        for i in range(len(seq)):
            lst = list(perms(seq[:i] + seq[(i + 1):]))
            for it in lst:
                it.append(seq[i]) 
                yield it




def yield_paths(t, value):
    '''Q4: Yields all possible paths from the root of t to a node with the label
    value as a list.

    >>> t1 = tree(1, [tree(2, [tree(3), tree(4, [tree(6)]), tree(5)]), tree(5)])
    >>> print_tree(t1)
    1
      2
        3
        4
          6
        5
      5
    >>> next(yield_paths(t1, 6))
    [1, 2, 4, 6]
    >>> path_to_5 = yield_paths(t1, 5)
    >>> sorted(list(path_to_5))
    [[1, 2, 5], [1, 5]]

    >>> t2 = tree(0, [tree(2, [t1])])
    >>> print_tree(t2)
    0
      2
        1
          2
            3
            4
              6
            5
          5
    >>> path_to_2 = yield_paths(t2, 2)
    >>> sorted(list(path_to_2))
    [[0, 2], [0, 2, 1, 2]]
    '''
    if label(t) == value:
        yield [label(t)]
    for b in branches(t):
        for path in list(yield_paths(b, value)):
            yield [label(t)] + path


class Minty:
    '''A mint creates coins by stamping on years. The update method sets the mint's stamp to Minty.present_year.
    >>> mint = Minty()
    >>> mint.year
    2021
    >>> dime = mint.create('Dime')
    >>> dime.year
    2021
    >>> Minty.present_year = 2101  # Time passes
    >>> nickel = mint.create('Nickel')
    >>> nickel.year     # The mint has not updated its stamp yet
    2021
    >>> nickel.worth()  # 5 cents + (80 - 50 years)
    35
    >>> mint.update()   # The mint's year is updated to 2101
    >>> Minty.present_year = 2176     # More time passes
    >>> mint.create('Dime').worth()    # 10 cents + (75 - 50 years)
    35
    >>> Minty().create('Dime').worth()  # A new mint has the current year
    10
    >>> dime.worth()     # 10 cents + (155 - 50 years)
    115
    '''
    present_year = 2021

    def __init__(self):
        self.update()

    def create(self, type):
        return Coin(self.year, type)

    def update(self):
        self.year = Minty.present_year

class Coin:
    cents = 50

    def __init__(self, year, type):
        self.year = year
        if type == ('Dime'):
            self.cents = 10
        elif type == ('Nickel'):
            self.cents = 5

    def worth(self):
        return self.cents + max(0, Minty.present_year - self.year - 50)


class VendingMachine:
    '''A vending machine that vends some product for some price.

    >>> v = VendingMachine('candy', 10)
    >>> v.vend()
    'Nothing left to vend. Please restock.'
    >>> v.add_funds(15)
    'Nothing left to vend. Please restock. Here is your $15.'
    >>> v.restock(2)
    'Current candy stock: 2'
    >>> v.vend()
    'Please add $10 more funds.'
    >>> v.add_funds(7)
    'Current balance: $7'
    >>> v.vend()
    'Please add $3 more funds.'
    >>> v.add_funds(5)
    'Current balance: $12'
    >>> v.vend()
    'Here is your candy and $2 change.'
    >>> v.add_funds(10)
    'Current balance: $10'
    >>> v.vend()
    'Here is your candy.'
    >>> v.add_funds(15)
    'Nothing left to vend. Please restock. Here is your $15.'

    >>> w = VendingMachine('soda', 2)
    >>> w.restock(3)
    'Current soda stock: 3'
    >>> w.restock(3)
    'Current soda stock: 6'
    >>> w.add_funds(2)
    'Current balance: $2'
    >>> w.vend()
    'Here is your soda.'
    '''
    def __init__(self, name, price):
        self.name = name
        self.price = price
        self.balance = 0
        self.inventory = 0
    def vend(self):
        if self.inventory == 0:
            return 'Nothing left to vend. Please restock.'
        elif self.balance < self.price:
            return  f'Please add ${self.price - self.balance} more funds.'
        elif self.balance > self.price:
            self.inventory -= 1
            exchange = self.balance - self.price
            self.balance = 0
            return f'Here is your {self.name} and ${exchange} change.'
        else:
            self.balance = 0
            self.inventory -= 1
            return f'Here is your {self.name}.'
    def add_funds(self, funds):
        if self.inventory == 0:
            return f'Nothing left to vend. Please restock. Here is your ${funds}.'
        else:
            self.balance += funds
            return f'Current balance: ${self.balance}'
    def restock(self, inventory):
        self.inventory += inventory
        return f'Current {self.name} stock: {self.inventory}'

# Tree Data Abstraction

def tree(label, branches=[]):
    '''Construct a tree with the given label value and a list of branches.'''
    for branch in branches:
        assert is_tree(branch), 'branches must be trees'
    return [label] + list(branches)

def label(tree):
    '''Return the label value of a tree.'''
    return tree[0]

def branches(tree):
    '''Return the list of branches of the given tree.'''
    return tree[1:]

def is_tree(tree):
    '''Returns True if the given tree is a tree, and False otherwise.'''
    if type(tree) != list or len(tree) < 1:
        return False
    for branch in branches(tree):
        if not is_tree(branch):
            return False
    return True

def is_leaf(tree):
    '''Returns True if the given tree's list of branches is empty, and False
    otherwise.
    '''
    return not branches(tree)

def print_tree(t, indent=0):
    '''Print a representation of this tree in which each node is
    indented by two spaces times its depth from the root.

    >>> print_tree(tree(1))
    1
    >>> print_tree(tree(1, [tree(2)]))
    1
      2
    >>> numbers = tree(1, [tree(2), tree(3, [tree(4), tree(5)]), tree(6, [tree(7)])])
    >>> print_tree(numbers)
    1
      2
      3
        4
        5
      6
        7
    '''
    print('  ' * indent + str(label(t)))
    for b in branches(t):
        print_tree(b, indent + 1)

def copy_tree(t):
    '''Returns a copy of t. Only for testing purposes.

    >>> t = tree(5)
    >>> copy = copy_tree(t)
    >>> t = tree(6)
    >>> print_tree(copy)
    5
    '''
    return tree(label(t), [copy_tree(b) for b in branches(t)])


```





## hw05



```python
# You do not need to understand what this function does. It is used for testing.
def make_test_random():
    '''A deterministic random function that cycles between
    [0.0, 0.1, 0.2, ..., 0.9] for testing purposes.

    >>> random = make_test_random()
    >>> random()
    0.0
    >>> random()
    0.1
    >>> random2 = make_test_random()
    >>> random2()
    0.0
    '''
    rands = [x / 10 for x in range(10)]
    def random():
        rand = rands[0]
        rands.append(rands.pop(0))
        return rand
    return random

### Phase 1: The Player Class
class Player:
    '''
    >>> random = make_test_random()
    >>> p1 = Player('Hill', random)
    >>> p2 = Player('Don', random)
    >>> p1.popularity
    100
    >>> p1.debate(p2)  # random() should return 0.0
    >>> p1.popularity
    150
    >>> p2.popularity
    100
    >>> p2.votes
    0
    >>> p2.speech(p1)
    >>> p2.votes
    10
    >>> p2.popularity
    110
    >>> p1.popularity
    135
    >>> p1.speech(p2)
    >>> p1.votes
    13
    >>> p1.popularity
    148
    >>> p2.votes
    10
    >>> p2.popularity
    99
    >>> for _ in range(4):  # 0.1, 0.2, 0.3, 0.4
    ...     p1.debate(p2)
    >>> p2.debate(p1)
    >>> p2.popularity
    49
    >>> p2.debate(p1)
    >>> p2.popularity
    0
    '''
    def __init__(self, name, random_func):
        self.name = name
        self.votes = 0
        self.popularity = 100
        self.random_func = random_func

    def debate(self, other):
        if self.random_func() < max(0.1, self.popularity / (self.popularity + other.popularity)):
            self.popularity += 50
        else:
            self.popularity = max(0, self.popularity - 50)


    def speech(self, other):
        self.votes += self.popularity // 10
        self.popularity += self.popularity // 10
       
        other.popularity -= other.popularity // 10
    def choose(self, other):
        return self.speech


### Phase 2: The Game Class
class Game:
    '''
    >>> random = make_test_random()
    >>> p1, p2 = Player('Hill',random), Player('Don', random)
    >>> g = Game(p1, p2)
    >>> winner = g.play()
    >>> p1 is winner
    True
    >>> # Additional correctness tests
    >>> winner is g.winner()
    True
    >>> g.turn
    10
    >>> p1.votes = p2.votes
    >>> print(g.winner())
    None
    '''
    def __init__(self, player1, player2):
        self.p1 = player1
        self.p2 = player2
        self.turn = 0

    def play(self):
        while not self.game_over():
            '*** YOUR CODE HERE ***'
        return self.winner()

    def game_over(self):
        return max(self.p1.votes, self.p2.votes) >= 50 or self.turn >= 10

    def winner(self):
        '*** YOUR CODE HERE ***'


### Phase 3: New Players
class AggressivePlayer(Player):
    '''
    >>> random = make_test_random()
    >>> p1, p2 = AggressivePlayer('Don', random), Player('Hill', random)
    >>> g = Game(p1, p2)
    >>> winner = g.play()
    >>> p1 is winner
    True
    >>> # Additional correctness tests
    >>> p1.popularity = p2.popularity
    >>> p1.choose(p2) == p1.debate
    True
    >>> p1.popularity += 1
    >>> p1.choose(p2) == p1.debate
    False
    >>> p2.choose(p1) == p2.speech
    True
    '''
    def choose(self, other):
        '*** YOUR CODE HERE ***'

class CautiousPlayer(Player):
    '''
    >>> random = make_test_random()
    >>> p1, p2 = CautiousPlayer('Hill', random), AggressivePlayer('Don', random)
    >>> p1.popularity = 0
    >>> p1.choose(p2) == p1.debate
    True
    >>> p1.popularity = 1
    >>> p1.choose(p2) == p1.debate
    False
    >>> # Additional correctness tests
    >>> p2.choose(p1) == p2.speech
    True
    '''
    def choose(self, other):
        '*** YOUR CODE HERE ***'


def add_d_leaves(t, v):
    '''Add d leaves containing v to each node at every depth d.

    >>> t_one_to_four = Tree(1, [Tree(2), Tree(3, [Tree(4)])])
    >>> print(t_one_to_four)
    1
      2
      3
        4
    >>> add_d_leaves(t_one_to_four, 5)
    >>> print(t_one_to_four)
    1
      2
        5
      3
        4
          5
          5
        5

    >>> t0 = Tree(9)
    >>> add_d_leaves(t0, 4)
    >>> t0
    Tree(9)
    >>> t1 = Tree(1, [Tree(3)])
    >>> add_d_leaves(t1, 4)
    >>> t1
    Tree(1, [Tree(3, [Tree(4)])])
    >>> t2 = Tree(2, [Tree(5), Tree(6)])
    >>> t3 = Tree(3, [t1, Tree(0), t2])
    >>> print(t3)
    3
      1
        3
          4
      0
      2
        5
        6
    >>> add_d_leaves(t3, 10)
    >>> print(t3)
    3
      1
        3
          4
            10
            10
            10
          10
          10
        10
      0
        10
      2
        5
          10
          10
        6
          10
          10
        10
    '''
    '*** YOUR CODE HERE ***'


def level_mutation_link(t, funcs):
	'''Mutates t using the functions in the linked list funcs.

	>>> t = Tree(1, [Tree(2, [Tree(3)])])
	>>> funcs = Link(lambda x: x + 1, Link(lambda y: y * 5, Link(lambda z: z ** 2)))
	>>> level_mutation_link(t, funcs)
	>>> t    # At level 0, apply x + 1; at level 1, apply y * 5; at level 2 (leaf), apply z ** 2
	Tree(2, [Tree(10, [Tree(9)])])
	>>> t2 = Tree(1, [Tree(2), Tree(3, [Tree(4)])])
	>>> level_mutation_link(t2, funcs)
	>>> t2    # Level 0: 1+1=2; Level 1: 2*5=10 => 10**2 = 100, 3*5=15; Level 2 (leaf): 4**2=16
	Tree(2, [Tree(100), Tree(15, [Tree(16)])])
	>>> t3 = Tree(1, [Tree(2)])
	>>> level_mutation_link(t3, funcs)
	>>> t3    # Level 0: 1+1=2; Level 1: 2*5=10; no further levels, so apply remaining z ** 2: 10**2=100
	Tree(2, [Tree(100)])
	'''
	if _____________________:
		return
	t.label = _____________________
	remaining = _____________________
	if __________________ and __________________:
		while _____________________:
			_____________________
			remaining = remaining.rest
	for b in t.branches:
		_____________________


def store_digits(n):
    '''Stores the digits of a positive number n in a linked list.

    >>> s = store_digits(1)
    >>> s
    Link(1)
    >>> store_digits(2345)
    Link(2, Link(3, Link(4, Link(5))))
    >>> store_digits(876)
    Link(8, Link(7, Link(6)))
    >>> store_digits(2450)
    Link(2, Link(4, Link(5, Link(0))))
    >>> # a check for restricted functions
    >>> import inspect, re
    >>> cleaned = re.sub(r'#.*\\n', '', re.sub(r''{3}[\s\S]*?'{3}', '', inspect.getsource(store_digits)))
    >>> print('Do not use str or reversed!') if any([r in cleaned for r in ['str', 'reversed']]) else None
    '''
    '*** YOUR CODE HERE ***'


def deep_map_mut(func, lnk):
    '''Mutates a deep link lnk by replacing each item found with the
    result of calling func on the item. Does NOT create new Links (so
    no use of Link's constructor).

    Does not return the modified Link object.

    >>> link1 = Link(3, Link(Link(4), Link(5, Link(6))))
    >>> print(link1)
    <3 <4> 5 6>
    >>> # Disallow the use of making new Links before calling deep_map_mut
    >>> Link.__init__, hold = lambda *args: print('Do not create any new Links.'), Link.__init__
    >>> try:
    ...     deep_map_mut(lambda x: x * x, link1)
    ... finally:
    ...     Link.__init__ = hold
    >>> print(link1)
    <9 <16> 25 36>
    '''
    '*** YOUR CODE HERE ***'


def crispr_gene_insertion(lnk_of_genes, insert):
    '''Takes a linked list of genes and mutates the genes with the INSERT codon added the correct number of times.

    >>> link = Link(Link('AUG', Link('GCC', Link('ACG'))), Link(Link('ATG', Link('AUG', Link('ACG', Link('GCC'))))))
    >>> print(link)
    <<AUG GCC ACG> <ATG AUG ACG GCC>>
    >>> crispr_gene_insertion(link, 'TTA')
    >>> print(link)
    <<AUG TTA GCC ACG> <ATG AUG TTA TTA ACG GCC>>
    >>> link = Link(Link('ATG'), Link(Link('AUG', Link('AUG')), Link(Link('AUG', Link('GCC')))))
    >>> print(link)
    <<ATG> <AUG AUG> <AUG GCC>>
    >>> crispr_gene_insertion(link, 'TTA') # first gene has no AUG so unchanged, 2nd gene has 2 AUGs but only first considered for insertion
    >>> print(link)
    <<ATG> <AUG TTA TTA AUG> <AUG TTA TTA TTA GCC>>
    >>> link = Link.empty # empty linked list of genes stays empty
    >>> crispr_gene_insertion(link, 'TTA')
    >>> print(link)
    ()
    '''
    '*** YOUR CODE HERE ***'

def transcribe(dna):
    '''Takes a string of DNA and returns a Python list with the RNA codons.

    >>> DNA = 'TACCTAGCCCATAAA'
    >>> transcribe(DNA)
    ['AUG', 'GAU', 'CGG', 'GUA', 'UUU']
    '''
    dict = {'A': 'U', 'T': 'A', 'G': 'C', 'C': 'G'}
    return __________________


class Tree:
    '''
    >>> t = Tree(3, [Tree(2, [Tree(5)]), Tree(4)])
    >>> t.label
    3
    >>> t.branches[0].label
    2
    >>> t.branches[1].is_leaf()
    True
    '''
    def __init__(self, label, branches=[]):
        for b in branches:
            assert isinstance(b, Tree)
        self.label = label
        self.branches = list(branches)

    def is_leaf(self):
        return not self.branches

    def __repr__(self):
        if self.branches:
            branch_str = ', ' + repr(self.branches)
        else:
            branch_str = ''
        return 'Tree({0}{1})'.format(self.label, branch_str)

    def __str__(self):
        def print_tree(t, indent=0):
            tree_str = '  ' * indent + str(t.label) + '\n'
            for b in t.branches:
                tree_str += print_tree(b, indent + 1)
            return tree_str
        return print_tree(self).rstrip()


class Link:
    '''A linked list.

    >>> s = Link(1)
    >>> s.first
    1
    >>> s.rest is Link.empty
    True
    >>> s = Link(2, Link(3, Link(4)))
    >>> s.first = 5
    >>> s.rest.first = 6
    >>> s.rest.rest = Link.empty
    >>> s                                    # Displays the contents of repr(s)
    Link(5, Link(6))
    >>> s.rest = Link(7, Link(Link(8, Link(9))))
    >>> s
    Link(5, Link(7, Link(Link(8, Link(9)))))
    >>> print(s)                             # Prints str(s)
    <5 7 <8 9>>
    '''
    empty = ()

    def __init__(self, first, rest=empty):
        assert rest is Link.empty or isinstance(rest, Link)
        self.first = first
        self.rest = rest

    def __repr__(self):
        if self.rest is not Link.empty:
            rest_repr = ', ' + repr(self.rest)
        else:
            rest_repr = ''
        return 'Link(' + repr(self.first) + rest_repr + ')'

    def __str__(self):
        string = '<'
        while self.rest is not Link.empty:
            string += str(self.first) + ' '
            self = self.rest
        return string + str(self.first) + '>'
 
```





## hw06



```scheme
(define (square n) (* n n))

(define (pow base exp) 
  (cond 
    ((= exp 1) base)
    ((= exp 2) (square base))
    ((even? (modulo exp 2)) (square (pow base (quotient exp 2))))
    (else (* base (square (pow base (quotient exp 2)))))
  )
)

(define (repeatedly-cube n x)
  (if (zero? n)
      x
      (let ((y (repeatedly-cube (- n 1) x)))
        (* y y y)
      )
  )
)

(define (cddr s) (cdr (cdr s)))

(define (cadr s) (car (cdr s)))

(define (caddr s) (car (cdr (cdr s))))

(define (ascending? s) 
  (cond 
    ((or (null? s) (null? (cdr s))) #t)
    ((> (car s) (cadr s)) #f)
    (else (ascending? (cdr s)))
  )
)

(define (my-filter pred s)
  (cond 
    ((null? s) s)
    ((pred (car s)) 
      (cons (car s) (my-filter pred (cdr s)))
    )
    (else (my-filter pred (cdr s)))
  )
)
(define (no-repeats s) 
  (cond
    ((null? s) s)
    ((null? (cdr s)) s)
    (else (cons (car s) (no-repeats (my-filter (lambda (x) (not (= x (car s)))) (cdr s)))))
  )
)
; helper function
; returns the values of lst that are bigger than x
; e.g., (larger-values 3 '(1 2 3 4 5 1 2 3 4 5)) --> (4 5 4 5)
(define (larger-values x lst)
  (cond 
    ((null? lst) lst)
    ((< x (car lst)) (cons (car lst) (larger-values x (cdr lst))))
    (else (larger-values x (cdr lst)))
  )
)
(define (longest-increasing-subsequence lst)
  (if (null? lst)
      nil
      (begin (define first (car lst))
             (define rest (cdr lst))
             (define large-values-rest
                    (larger-values first rest)
             )
             (define with-first
                (cons first (longest-increasing-subsequence large-values-rest)
                )
             )
             (define without-first
                  (longest-increasing-subsequence rest)
              )
            (if (> (length with-first) (length without-first))
                 with-first
                 without-first
            )
      )
  )
)
(define (sqrt x)
  (define (good-enough? guess)
    (< (abs (- (square guess) x)) 0.001))
  (define (improve guess)
    (average guess (/ x guess)))
  (define (sqrt-iter guess)
    (if (good-enough? guess)
        guess
        (sqrt-iter (improve guess))))
  (sqrt-iter 1.0))
(sqrt 9)
```





## hw07



```scheme
(define (add-leaf t x)
  (if (is-leaf t)
      (tree (label t) nil)
      (begin (define mapped-branches
                (map  (lambda (b) (add-leaf b x))
                      (branches t)
                )
             )
            (tree (label t)
              (append mapped-branches (list (tree x nil)))
            )
      )
  )
)
```



```sqlite
CREATE TABLE parents AS
  SELECT 'abraham' AS parent, 'barack' AS child UNION
  SELECT 'abraham'          , 'clinton'         UNION
  SELECT 'delano'           , 'herbert'         UNION
  SELECT 'fillmore'         , 'abraham'         UNION
  SELECT 'fillmore'         , 'delano'          UNION
  SELECT 'fillmore'         , 'grover'          UNION
  SELECT 'eisenhower'       , 'fillmore';

CREATE TABLE dogs AS
  SELECT 'abraham' AS name, 'long' AS fur, 26 AS height UNION
  SELECT 'barack'         , 'short'      , 52           UNION
  SELECT 'clinton'        , 'long'       , 47           UNION
  SELECT 'delano'         , 'long'       , 46           UNION
  SELECT 'eisenhower'     , 'short'      , 35           UNION
  SELECT 'fillmore'       , 'curly'      , 32           UNION
  SELECT 'grover'         , 'short'      , 28           UNION
  SELECT 'herbert'        , 'curly'      , 31;

CREATE TABLE sizes AS
  SELECT 'toy' AS size, 24 AS min, 28 AS max UNION
  SELECT 'mini'       , 28       , 35        UNION
  SELECT 'medium'     , 35       , 45        UNION
  SELECT 'standard'   , 45       , 60;


-- All dogs with parents ordered by decreasing height of their parent
CREATE TABLE by_parent_height AS
  SELECT child FROM parents, dogs WHERE name = parent ORDER BY height desc;

-- The size of each dog
CREATE TABLE size_of_dogs AS

SELECT name, size FROM dogs, sizes
    WHERE height > min AND height <= max;
-- Filling out this helper table is optional
CREATE TABLE siblings AS
  SELECT a.child AS first, b.child AS second FROM parents AS a, parents AS b
      WHERE a.parent = b.parent AND a.child < b.child;
-- Sentences about siblings that are the same size
CREATE TABLE sentences AS
  SELECT 'The two siblings, ' || first || ' and ' || second || ', have the same size: ' || a.size
      FROM siblings, size_of_dogs AS a, size_of_dogs AS b
      WHERE a.size = b.size AND a.name = first AND b.name = second;

-- Height range for each fur type where all of the heights differ by no more than 30% from the average height
CREATE TABLE low_variance AS
  SELECT  fur, max(height) - min(height) 
  from dogs 
  group by fur 
  having MIN(height) >= .7 * AVG(height) AND MAX(height) <= 1.3 * AVG(height) ;
```

ã€‚">
<meta property="og:title" content="cs61a-su24-hws">
<meta property="og:description" content="# CS61 Summer2024  homework 



## hw01



```python
from operator import add, sub

def a_plus_abs_b(a, b):
    '''Return a+abs(b), but without calling abs.

    >>> a_plus_abs_b(2, 3)
    5
    >>> a_plus_abs_b(2, -3)
    5
    >>> a_plus_abs_b(-1, 4)
    3
    >>> a_plus_abs_b(-1, -4)
    3
    '''
    if b < 0:
        f = sub
    else:
        f = add
    return f(a, b)


def two_of_three(i, j, k):
    '''Return m*m + n*n, where m and n are the two smallest members of the
    positive numbers i, j, and k.

    >>> two_of_three(1, 2, 3)
    5
    >>> two_of_three(5, 3, 1)
    10
    >>> two_of_three(10, 2, 8)
    68
    >>> two_of_three(5, 5, 5)
    50
    '''
    return i ** 2 + j ** 2 + k ** 2 - max(i, j, k) ** 2



def largest_factor(n):
    '''Return the largest factor of n that is smaller than n.

    >>> largest_factor(15) # factors are 1, 3, 5
    5
    >>> largest_factor(80) # factors are 1, 2, 4, 5, 8, 10, 16, 20, 40
    40
    >>> largest_factor(13) # factor is 1 since 13 is prime
    1
    '''
    i = n - 1
    while i >= 1:
        if n % i == 0: 
            return i
        i = i -1    



def hailstone(n):
    '''Print the hailstone sequence starting at n and return its
    length.

    >>> a = hailstone(10)
    10
    5
    16
    8
    4
    2
    1
    >>> a
    7
    >>> b = hailstone(1)
    1
    >>> b
    1
    '''
    length = 1
    while n != 1:
        print(n)
        if n % 2 == 0:
            n = n //2
        else:
            n = 3 * n + 1
        length = length + 1
    print(n)
    return length
```

## hw02

```python
from operator import add, mul, sub

square = lambda x: x * x

identity = lambda x: x

triple = lambda x: 3 * x

increment = lambda x: x + 1


HW_SOURCE_FILE=__file__


def product(n, term):
    '''Return the product of the first n terms in a sequence.

    n: a positive integer
    term:  a function that takes one argument to produce the term

    >>> product(3, identity)  # 1 * 2 * 3
    6
    >>> product(5, identity)  # 1 * 2 * 3 * 4 * 5
    120
    >>> product(3, square)    # 1^2 * 2^2 * 3^2
    36
    >>> product(5, square)    # 1^2 * 2^2 * 3^2 * 4^2 * 5^2
    14400
    >>> product(3, increment) # (1+1) * (2+1) * (3+1)
    24
    >>> product(3, triple)    # 1*3 * 2*3 * 3*3
    162
    '''
    i, product_result = 1, 1
    while i <= n:
        product_result, i = product_result * term(i), i + 1
    return product_result


def accumulate(fuse, start, n, term):
    '''Return the result of fusing together the first n terms in a sequence 
    and start.  The terms to be fused are term(1), term(2), ..., term(n). 
    The function fuse is a two-argument commutative & associative function.

    >>> accumulate(add, 0, 5, identity)  # 0 + 1 + 2 + 3 + 4 + 5
    15
    >>> accumulate(add, 11, 5, identity) # 11 + 1 + 2 + 3 + 4 + 5
    26
    >>> accumulate(add, 11, 0, identity) # 11 (fuse is never used)
    11
    >>> accumulate(add, 11, 3, square)   # 11 + 1^2 + 2^2 + 3^2
    25
    >>> accumulate(mul, 2, 3, square)    # 2 * 1^2 * 2^2 * 3^2
    72
    >>> # 2 + (1^2 + 1) + (2^2 + 1) + (3^2 + 1)
    >>> accumulate(lambda x, y: x + y + 1, 2, 3, square)
    19
    '''
    i = 1
    product_result = start
    while i <= n:
        product_result = fuse(product_result, term(i))
        i = i + 1
    return product_result


def summation_using_accumulate(n, term):
    '''Returns the sum: term(1) + ... + term(n), using accumulate.

    >>> summation_using_accumulate(5, square) # square(0) + square(1) + ... + square(4) + square(5)
    55
    >>> summation_using_accumulate(5, triple) # triple(0) + triple(1) + ... + triple(4) + triple(5)
    45
    >>> # This test checks that the body of the function is just a return statement.
    >>> import inspect, ast
    >>> [type(x).__name__ for x in ast.parse(inspect.getsource(summation_using_accumulate)).body[0].body]
    ['Expr', 'Return']
    '''
    return accumulate(add, term(0), n, term)


def product_using_accumulate(n, term):
    '''Returns the product: term(1) * ... * term(n), using accumulate.

    >>> product_using_accumulate(4, square) # square(1) * square(2) * square(3) * square()
    576
    >>> product_using_accumulate(6, triple) # triple(1) * triple(2) * ... * triple(5) * triple(6)
    524880
    >>> # This test checks that the body of the function is just a return statement.
    >>> import inspect, ast
    >>> [type(x).__name__ for x in ast.parse(inspect.getsource(product_using_accumulate)).body[0].body]
    ['Expr', 'Return']
    '''
    return accumulate(mul,1,n,term)


def make_repeater(f, n):
    '''Returns the function that computes the nth application of f.

    >>> add_three = make_repeater(increment, 3)
    >>> add_three(5)
    8
    >>> make_repeater(triple, 5)(1) # 3 * (3 * (3 * (3 * (3 * 1))))
    243
    >>> make_repeater(square, 2)(5) # square(square(5))
    625
    >>> make_repeater(square, 3)(5) # square(square(square(5)))
    390625
    '''
    def repeater(x):
            k = 0
            while k < n:
                x, k = f(x), k + 1
            return x
    return repeater 


def digit_distance(n):
    '''Determines the digit distance of n.

    >>> digit_distance(3)
    0
    >>> digit_distance(777)
    0
    >>> digit_distance(314)
    5
    >>> digit_distance(31415926535)
    32
    >>> digit_distance(3464660003)
    16
    >>> from construct_check import check
    >>> # ban all loops
    >>> check(HW_SOURCE_FILE, 'digit_distance',
    ...       ['For', 'While'])
    True
    '''
    if n < 10:
        return 0
    else:
        return abs(sub(n % 10, n // 10 % 10)) + digit_distance(n // 10)


def interleaved_sum(n, odd_func, even_func):
    '''Compute the sum odd_func(1) + even_func(2) + odd_func(3) + ..., up
    to n.

    >>> identity = lambda x: x
    >>> square = lambda x: x * x
    >>> triple = lambda x: x * 3
    >>> interleaved_sum(5, identity, square) # 1   + 2*2 + 3   + 4*4 + 5
    29
    >>> interleaved_sum(5, square, identity) # 1*1 + 2   + 3*3 + 4   + 5*5
    41
    >>> interleaved_sum(4, triple, square)   # 1*3 + 2*2 + 3*3 + 4*4
    32
    >>> interleaved_sum(4, square, triple)   # 1*1 + 2*3 + 3*3 + 4*3
    28
    >>> from construct_check import check
    >>> check(HW_SOURCE_FILE, 'interleaved_sum', ['While', 'For', 'Mod']) # ban loops and %
    True
    >>> check(HW_SOURCE_FILE, 'interleaved_sum', ['BitAnd', 'BitOr', 'BitXor']) # ban bitwise operators, don't worry about these if you don't know what they are
    True
    '''

    if n == 0:
        return 0
    elif n % 2 == 1:
        return odd_func(n) + interleaved_sum(n - 1, odd_func, even_func)
    else:
        return even_func(n) + interleaved_sum(n - 1, odd_func, even_func)


def next_larger_coin(coin):
    '''Returns the next larger coin in order.
    >>> next_larger_coin(1)
    5
    >>> next_larger_coin(5)
    10
    >>> next_larger_coin(10)
    25
    >>> next_larger_coin(2) # Other values return None
    '''
    if coin == 1:
        return 5
    elif coin == 5:
        return 10
    elif coin == 10:
        return 25

def next_smaller_coin(coin):
    '''Returns the next smaller coin in order.
    >>> next_smaller_coin(25)
    10
    >>> next_smaller_coin(10)
    5
    >>> next_smaller_coin(5)
    1
    >>> next_smaller_coin(2) # Other values return None
    '''
    if coin == 25:
        return 10
    elif coin == 10:
        return 5
    elif coin == 5:
        return 1

def count_coins(total):
    '''Return the number of ways to make change using coins of value of 1, 5, 10, 25.
    >>> count_coins(15)
    6
    >>> count_coins(10)
    4
    >>> count_coins(20)
    9
    >>> count_coins(100) # How many ways to make change for a dollar?
    242
    >>> count_coins(200)
    1463
    >>> from construct_check import check
    >>> # ban iteration
    >>> check(HW_SOURCE_FILE, 'count_coins', ['While', 'For'])
    True
    '''
                                        
    def helper(total, coin):
        if total == 0:
            return 1
        if total < 0 or not coin :
            return 0
        return helper(total - coin,coin) + helper(total, next_smaller_coin(coin))
    return helper(total, 25)
```

## hw03



```python

HW_SOURCE_FILE=__file__


def pascal(row, column):
    '''Returns the value of the item in Pascal's Triangle
    whose position is specified by row and column.
    >>> pascal(0, 0)    # The top left (the point of the triangle)
    1
    >>> pascal(0, 5)	# Empty entry; outside of Pascal's Triangle
    0
    >>> pascal(3, 2)	# Row 3 (1 3 3 1), Column 2
    3
    >>> pascal(4, 2)     # Row 4 (1 4 6 4 1), Column 2
    6
    '''
    if column == 0:
        return 1
    elif row == 0:
        return 0
    else:
        return pascal(row - 1, column) + pascal(row - 1, column - 1)

def insert_items(s, before, after):
    '''Insert after into s after each occurrence of before and then return s.

    >>> test_s = [1, 5, 8, 5, 2, 3]
    >>> new_s = insert_items(test_s, 5, 7)
    >>> new_s
    [1, 5, 7, 8, 5, 7, 2, 3]
    >>> test_s
    [1, 5, 7, 8, 5, 7, 2, 3]
    >>> new_s is test_s
    True
    >>> double_s = [1, 2, 1, 2, 3, 3]
    >>> double_s = insert_items(double_s, 3, 4)
    >>> double_s
    [1, 2, 1, 2, 3, 4, 3, 4]
    >>> large_s = [1, 4, 8]
    >>> large_s2 = insert_items(large_s, 4, 4)
    >>> large_s2
    [1, 4, 4, 8]
    >>> large_s3 = insert_items(large_s2, 4, 6)
    >>> large_s3
    [1, 4, 6, 4, 6, 8]
    >>> large_s3 is large_s
    True
    '''
    i = 0
    while i < len(s):
        if s[i] == before:
            s.insert(i + 1, after)
            i += 1
        i += 1
    return s


HW_SOURCE_FILE=__file__


def planet(mass):
    '''Construct a planet of some mass.'''
    assert mass > 0

    return ['planet', mass]
def mass(p):
    '''Select the mass of a planet.'''
    assert is_planet(p), 'must call mass on a planet'
    return p[1]


def is_planet(p):
    '''Whether p is a planet.'''
    return type(p) == list and len(p) == 2 and p[0] == 'planet'

def examples():
    t = mobile(arm(1, planet(2)),
               arm(2, planet(1)))
    u = mobile(arm(5, planet(1)),
               arm(1, mobile(arm(2, planet(3)),
                             arm(3, planet(2)))))
    v = mobile(arm(4, t), arm(2, u))
    return t, u, v

def total_mass(m):
    '''Return the total mass of m, a planet or mobile.

    >>> t, u, v = examples()
    >>> total_mass(t)
    3
    >>> total_mass(u)
    6
    >>> total_mass(v)
    9
    '''
    if is_planet(m):
        return mass(m)
    else:
        assert is_mobile(m), 'must get total mass of a mobile or a planet'
        return total_mass(end(left(m))) + total_mass(end(right(m)))

def balanced(m):
    '''Return whether m is balanced.

    >>> t, u, v = examples()
    >>> balanced(t)
    True
    >>> balanced(v)
    True
    >>> p = mobile(arm(3, t), arm(2, u))
    >>> balanced(p)
    False
    >>> balanced(mobile(arm(1, v), arm(1, p)))
    False
    >>> balanced(mobile(arm(1, p), arm(1, v)))
    False
    >>> from construct_check import check
    >>> # checking for abstraction barrier violations by banning indexing
    >>> check(HW_SOURCE_FILE, 'balanced', ['Index'])
    True
    '''
    if is_planet(m):
        return True
    else:
        left_end, right_end = end(left(m)), end(right(m))
        torque_left = length(left(m)) * total_mass(left_end)
        torque_right = length(right(m)) * total_mass(right_end)
        return torque_left == torque_right and balanced(left_end) and balanced(right_end)

def berry_finder(t):
    '''Returns True if t contains a node with the value 'berry' and 
    False otherwise.

    >>> scrat = tree('berry')
    >>> berry_finder(scrat)
    True
    >>> sproul = tree('roots', [tree('branch1', [tree('leaf'), tree('berry')]), tree('branch2')])
    >>> berry_finder(sproul)
    True
    >>> numbers = tree(1, [tree(2), tree(3, [tree(4), tree(5)]), tree(6, [tree(7)])])
    >>> berry_finder(numbers)
    False
    >>> t = tree(1, [tree('berry',[tree('not berry')])])
    >>> berry_finder(t)
    True
    '''
    if label(t) == 'berry':
        return True
    
    return len([x for x in branches(t) if berry_finder(x) == True]) > 0


HW_SOURCE_FILE=__file__


def max_path_sum(t):
    '''Return the maximum root-to-leaf path sum of a tree.
    >>> t = tree(1, [tree(5, [tree(1), tree(3)]), tree(10)])
    >>> max_path_sum(t) # 1, 10
    11
    >>> t2 = tree(5, [tree(4, [tree(1), tree(3)]), tree(2, [tree(10), tree(3)])])
    >>> max_path_sum(t2) # 5, 2, 10
    17
    '''
    if is_leaf(t):
        return label(t)
    
    return max([max_path_sum(i) for i in branches(t)]) + label(t)


def print_move(origin, destination):
    '''Print instructions to move a disk.'''
    print('Move the top disk from rod', origin, 'to rod', destination)

def move_stack(n, start, end):
    '''Print the moves required to move n disks on the start pole to the end
    pole without violating the rules of Towers of Hanoi.

    n -- number of disks
    start -- a pole position, either 1, 2, or 3
    end -- a pole position, either 1, 2, or 3

    There are exactly three poles, and start and end must be different. Assume
    that the start pole has at least n disks of increasing size, and the end
    pole is either empty or has a top disk larger than the top n start disks.

    >>> move_stack(1, 1, 3)
    Move the top disk from rod 1 to rod 3
    >>> move_stack(2, 1, 3)
    Move the top disk from rod 1 to rod 2
    Move the top disk from rod 1 to rod 3
    Move the top disk from rod 2 to rod 3
    >>> move_stack(3, 1, 3)
    Move the top disk from rod 1 to rod 3
    Move the top disk from rod 1 to rod 2
    Move the top disk from rod 3 to rod 2
    Move the top disk from rod 1 to rod 3
    Move the top disk from rod 2 to rod 1
    Move the top disk from rod 2 to rod 3
    Move the top disk from rod 1 to rod 3
    '''
    assert 1 <= start <= 3 and 1 <= end <= 3 and start != end, 'Bad start/end'
    if n == 1:
        print_move(start, end)
    else: 
        move_stack(n - 1, start, 6 - start - end)
        move_stack(1, start, end)
        move_stack(n - 1, 6 - start - end, end)

from operator import sub, mul

def make_anonymous_factorial():
    '''Return the value of an expression that computes factorial.

    >>> make_anonymous_factorial()(5)
    120
    >>> from construct_check import check
    >>> # ban any assignments or recursion
    >>> check(HW_SOURCE_FILE, 'make_anonymous_factorial',
    ...     ['Assign', 'AnnAssign', 'AugAssign', 'NamedExpr', 'FunctionDef', 'Recursion'])
    True
    '''
    return (lambda f: lambda k: f(f, k))(lambda f, k: k if k == 1 else mul(k, f(f, sub(k, 1))))


def mobile(left, right):
    '''Construct a mobile from a left arm and a right arm.'''
    assert is_arm(left), 'left must be an arm'
    assert is_arm(right), 'right must be an arm'
    return ['mobile', left, right]

def is_mobile(m):
    '''Return whether m is a mobile.'''
    return type(m) == list and len(m) == 3 and m[0] == 'mobile'

def left(m):
    '''Select the left arm of a mobile.'''
    assert is_mobile(m), 'must call left on a mobile'
    return m[1]

def right(m):
    '''Select the right arm of a mobile.'''
    assert is_mobile(m), 'must call right on a mobile'
    return m[2]

def arm(length, mobile_or_planet):
    '''Construct an arm: a length of rod with a mobile or planet at the end.'''
    assert is_mobile(mobile_or_planet) or is_planet(mobile_or_planet)
    return ['arm', length, mobile_or_planet]

def is_arm(s):
    '''Return whether s is an arm.'''
    return type(s) == list and len(s) == 3 and s[0] == 'arm'

def length(s):
    '''Select the length of an arm.'''
    assert is_arm(s), 'must call length on an arm'
    return s[1]

def end(s):
    '''Select the mobile or planet hanging at the end of an arm.'''
    assert is_arm(s), 'must call end on an arm'
    return s[2]



# Tree Data Abstraction

def tree(label, branches=[]):
    '''Construct a tree with the given label value and a list of branches.'''
    for branch in branches:
        assert is_tree(branch), 'branches must be trees'
    return [label] + list(branches)

def label(tree):
    '''Return the label value of a tree.'''
    return tree[0]

def branches(tree):
    '''Return the list of branches of the given tree.'''
    return tree[1:]

def is_tree(tree):
    '''Returns True if the given tree is a tree, and False otherwise.'''
    if type(tree) != list or len(tree) < 1:
        return False
    for branch in branches(tree):
        if not is_tree(branch):
            return False
    return True

def is_leaf(tree):
    '''Returns True if the given tree's list of branches is empty, and False
    otherwise.
    '''
    return not branches(tree)

def print_tree(t, indent=0):
    '''Print a representation of this tree in which each node is
    indented by two spaces times its depth from the root.

    >>> print_tree(tree(1))
    1
    >>> print_tree(tree(1, [tree(2)]))
    1
      2
    >>> numbers = tree(1, [tree(2), tree(3, [tree(4), tree(5)]), tree(6, [tree(7)])])
    >>> print_tree(numbers)
    1
      2
      3
        4
        5
      6
        7
    '''
    print('  ' * indent + str(label(t)))
    for b in branches(t):
        print_tree(b, indent + 1)

def copy_tree(t):
    '''Returns a copy of t. Only for testing purposes.

    >>> t = tree(5)
    >>> copy = copy_tree(t)
    >>> t = tree(6)
    >>> print_tree(copy)
    5
    '''
    return tree(label(t), [copy_tree(b) for b in branches(t)])

```



## hw04



```python
def hailstone(n):
    '''Q1: Yields the elements of the hailstone sequence starting at n.
       At the end of the sequence, yield 1 infinitely.

    >>> hail_gen = hailstone(10)
    >>> [next(hail_gen) for _ in range(10)]
    [10, 5, 16, 8, 4, 2, 1, 1, 1, 1]
    >>> next(hail_gen)
    1
    '''
    yield n
    if n == 1:
       yield from hailstone(1)
    elif n % 2 == 1: 
        yield from hailstone(n * 3 + 1)
    else:
        yield from hailstone(n // 2)


def merge(a, b):
    '''Q2:
    >>> def sequence(start, step):
    ...     while True:
    ...         yield start
    ...         start += step
    >>> a = sequence(2, 3) # 2, 5, 8, 11, 14, ...
    >>> b = sequence(3, 2) # 3, 5, 7, 9, 11, 13, 15, ...
    >>> result = merge(a, b) # 2, 3, 5, 7, 8, 9, 11, 13, 14, 15
    >>> [next(result) for _ in range(10)]
    [2, 3, 5, 7, 8, 9, 11, 13, 14, 15]
    '''
    first_a, first_b = next(a), next(b)
    while True:
        if first_a == first_b:
            yield first_a
            first_a, first_b = next(a), next(b)
        elif first_a < first_b:
            yield first_a
            first_a = next(a)
        else:
            yield first_b
            first_b = next(b)

def perms(seq):
    '''Q3: Generates all permutations of the given sequence. Each permutation is a
    list of the elements in SEQ in a different order. The permutations may be
    yielded in any order.

    >>> p = perms([100])
    >>> type(p)
    <class 'generator'>
    >>> next(p)
    [100]
    >>> try: # Prints 'No more permutations!' if calling next would cause an error
    ...     next(p)
    ... except StopIteration:
    ...     print('No more permutations!')
    No more permutations!
    >>> sorted(perms([1, 2, 3])) # Returns a sorted list containing elements of the generator
    [[1, 2, 3], [1, 3, 2], [2, 1, 3], [2, 3, 1], [3, 1, 2], [3, 2, 1]]
    >>> sorted(perms((10, 20, 30)))
    [[10, 20, 30], [10, 30, 20], [20, 10, 30], [20, 30, 10], [30, 10, 20], [30, 20, 10]]
    >>> sorted(perms('ab'))
    [['a', 'b'], ['b', 'a']]
    '''
    if len(seq) == 1:
        yield [seq[0]]
    else:
        for i in range(len(seq)):
            lst = list(perms(seq[:i] + seq[(i + 1):]))
            for it in lst:
                it.append(seq[i]) 
                yield it




def yield_paths(t, value):
    '''Q4: Yields all possible paths from the root of t to a node with the label
    value as a list.

    >>> t1 = tree(1, [tree(2, [tree(3), tree(4, [tree(6)]), tree(5)]), tree(5)])
    >>> print_tree(t1)
    1
      2
        3
        4
          6
        5
      5
    >>> next(yield_paths(t1, 6))
    [1, 2, 4, 6]
    >>> path_to_5 = yield_paths(t1, 5)
    >>> sorted(list(path_to_5))
    [[1, 2, 5], [1, 5]]

    >>> t2 = tree(0, [tree(2, [t1])])
    >>> print_tree(t2)
    0
      2
        1
          2
            3
            4
              6
            5
          5
    >>> path_to_2 = yield_paths(t2, 2)
    >>> sorted(list(path_to_2))
    [[0, 2], [0, 2, 1, 2]]
    '''
    if label(t) == value:
        yield [label(t)]
    for b in branches(t):
        for path in list(yield_paths(b, value)):
            yield [label(t)] + path


class Minty:
    '''A mint creates coins by stamping on years. The update method sets the mint's stamp to Minty.present_year.
    >>> mint = Minty()
    >>> mint.year
    2021
    >>> dime = mint.create('Dime')
    >>> dime.year
    2021
    >>> Minty.present_year = 2101  # Time passes
    >>> nickel = mint.create('Nickel')
    >>> nickel.year     # The mint has not updated its stamp yet
    2021
    >>> nickel.worth()  # 5 cents + (80 - 50 years)
    35
    >>> mint.update()   # The mint's year is updated to 2101
    >>> Minty.present_year = 2176     # More time passes
    >>> mint.create('Dime').worth()    # 10 cents + (75 - 50 years)
    35
    >>> Minty().create('Dime').worth()  # A new mint has the current year
    10
    >>> dime.worth()     # 10 cents + (155 - 50 years)
    115
    '''
    present_year = 2021

    def __init__(self):
        self.update()

    def create(self, type):
        return Coin(self.year, type)

    def update(self):
        self.year = Minty.present_year

class Coin:
    cents = 50

    def __init__(self, year, type):
        self.year = year
        if type == ('Dime'):
            self.cents = 10
        elif type == ('Nickel'):
            self.cents = 5

    def worth(self):
        return self.cents + max(0, Minty.present_year - self.year - 50)


class VendingMachine:
    '''A vending machine that vends some product for some price.

    >>> v = VendingMachine('candy', 10)
    >>> v.vend()
    'Nothing left to vend. Please restock.'
    >>> v.add_funds(15)
    'Nothing left to vend. Please restock. Here is your $15.'
    >>> v.restock(2)
    'Current candy stock: 2'
    >>> v.vend()
    'Please add $10 more funds.'
    >>> v.add_funds(7)
    'Current balance: $7'
    >>> v.vend()
    'Please add $3 more funds.'
    >>> v.add_funds(5)
    'Current balance: $12'
    >>> v.vend()
    'Here is your candy and $2 change.'
    >>> v.add_funds(10)
    'Current balance: $10'
    >>> v.vend()
    'Here is your candy.'
    >>> v.add_funds(15)
    'Nothing left to vend. Please restock. Here is your $15.'

    >>> w = VendingMachine('soda', 2)
    >>> w.restock(3)
    'Current soda stock: 3'
    >>> w.restock(3)
    'Current soda stock: 6'
    >>> w.add_funds(2)
    'Current balance: $2'
    >>> w.vend()
    'Here is your soda.'
    '''
    def __init__(self, name, price):
        self.name = name
        self.price = price
        self.balance = 0
        self.inventory = 0
    def vend(self):
        if self.inventory == 0:
            return 'Nothing left to vend. Please restock.'
        elif self.balance < self.price:
            return  f'Please add ${self.price - self.balance} more funds.'
        elif self.balance > self.price:
            self.inventory -= 1
            exchange = self.balance - self.price
            self.balance = 0
            return f'Here is your {self.name} and ${exchange} change.'
        else:
            self.balance = 0
            self.inventory -= 1
            return f'Here is your {self.name}.'
    def add_funds(self, funds):
        if self.inventory == 0:
            return f'Nothing left to vend. Please restock. Here is your ${funds}.'
        else:
            self.balance += funds
            return f'Current balance: ${self.balance}'
    def restock(self, inventory):
        self.inventory += inventory
        return f'Current {self.name} stock: {self.inventory}'

# Tree Data Abstraction

def tree(label, branches=[]):
    '''Construct a tree with the given label value and a list of branches.'''
    for branch in branches:
        assert is_tree(branch), 'branches must be trees'
    return [label] + list(branches)

def label(tree):
    '''Return the label value of a tree.'''
    return tree[0]

def branches(tree):
    '''Return the list of branches of the given tree.'''
    return tree[1:]

def is_tree(tree):
    '''Returns True if the given tree is a tree, and False otherwise.'''
    if type(tree) != list or len(tree) < 1:
        return False
    for branch in branches(tree):
        if not is_tree(branch):
            return False
    return True

def is_leaf(tree):
    '''Returns True if the given tree's list of branches is empty, and False
    otherwise.
    '''
    return not branches(tree)

def print_tree(t, indent=0):
    '''Print a representation of this tree in which each node is
    indented by two spaces times its depth from the root.

    >>> print_tree(tree(1))
    1
    >>> print_tree(tree(1, [tree(2)]))
    1
      2
    >>> numbers = tree(1, [tree(2), tree(3, [tree(4), tree(5)]), tree(6, [tree(7)])])
    >>> print_tree(numbers)
    1
      2
      3
        4
        5
      6
        7
    '''
    print('  ' * indent + str(label(t)))
    for b in branches(t):
        print_tree(b, indent + 1)

def copy_tree(t):
    '''Returns a copy of t. Only for testing purposes.

    >>> t = tree(5)
    >>> copy = copy_tree(t)
    >>> t = tree(6)
    >>> print_tree(copy)
    5
    '''
    return tree(label(t), [copy_tree(b) for b in branches(t)])


```





## hw05



```python
# You do not need to understand what this function does. It is used for testing.
def make_test_random():
    '''A deterministic random function that cycles between
    [0.0, 0.1, 0.2, ..., 0.9] for testing purposes.

    >>> random = make_test_random()
    >>> random()
    0.0
    >>> random()
    0.1
    >>> random2 = make_test_random()
    >>> random2()
    0.0
    '''
    rands = [x / 10 for x in range(10)]
    def random():
        rand = rands[0]
        rands.append(rands.pop(0))
        return rand
    return random

### Phase 1: The Player Class
class Player:
    '''
    >>> random = make_test_random()
    >>> p1 = Player('Hill', random)
    >>> p2 = Player('Don', random)
    >>> p1.popularity
    100
    >>> p1.debate(p2)  # random() should return 0.0
    >>> p1.popularity
    150
    >>> p2.popularity
    100
    >>> p2.votes
    0
    >>> p2.speech(p1)
    >>> p2.votes
    10
    >>> p2.popularity
    110
    >>> p1.popularity
    135
    >>> p1.speech(p2)
    >>> p1.votes
    13
    >>> p1.popularity
    148
    >>> p2.votes
    10
    >>> p2.popularity
    99
    >>> for _ in range(4):  # 0.1, 0.2, 0.3, 0.4
    ...     p1.debate(p2)
    >>> p2.debate(p1)
    >>> p2.popularity
    49
    >>> p2.debate(p1)
    >>> p2.popularity
    0
    '''
    def __init__(self, name, random_func):
        self.name = name
        self.votes = 0
        self.popularity = 100
        self.random_func = random_func

    def debate(self, other):
        if self.random_func() < max(0.1, self.popularity / (self.popularity + other.popularity)):
            self.popularity += 50
        else:
            self.popularity = max(0, self.popularity - 50)


    def speech(self, other):
        self.votes += self.popularity // 10
        self.popularity += self.popularity // 10
       
        other.popularity -= other.popularity // 10
    def choose(self, other):
        return self.speech


### Phase 2: The Game Class
class Game:
    '''
    >>> random = make_test_random()
    >>> p1, p2 = Player('Hill',random), Player('Don', random)
    >>> g = Game(p1, p2)
    >>> winner = g.play()
    >>> p1 is winner
    True
    >>> # Additional correctness tests
    >>> winner is g.winner()
    True
    >>> g.turn
    10
    >>> p1.votes = p2.votes
    >>> print(g.winner())
    None
    '''
    def __init__(self, player1, player2):
        self.p1 = player1
        self.p2 = player2
        self.turn = 0

    def play(self):
        while not self.game_over():
            '*** YOUR CODE HERE ***'
        return self.winner()

    def game_over(self):
        return max(self.p1.votes, self.p2.votes) >= 50 or self.turn >= 10

    def winner(self):
        '*** YOUR CODE HERE ***'


### Phase 3: New Players
class AggressivePlayer(Player):
    '''
    >>> random = make_test_random()
    >>> p1, p2 = AggressivePlayer('Don', random), Player('Hill', random)
    >>> g = Game(p1, p2)
    >>> winner = g.play()
    >>> p1 is winner
    True
    >>> # Additional correctness tests
    >>> p1.popularity = p2.popularity
    >>> p1.choose(p2) == p1.debate
    True
    >>> p1.popularity += 1
    >>> p1.choose(p2) == p1.debate
    False
    >>> p2.choose(p1) == p2.speech
    True
    '''
    def choose(self, other):
        '*** YOUR CODE HERE ***'

class CautiousPlayer(Player):
    '''
    >>> random = make_test_random()
    >>> p1, p2 = CautiousPlayer('Hill', random), AggressivePlayer('Don', random)
    >>> p1.popularity = 0
    >>> p1.choose(p2) == p1.debate
    True
    >>> p1.popularity = 1
    >>> p1.choose(p2) == p1.debate
    False
    >>> # Additional correctness tests
    >>> p2.choose(p1) == p2.speech
    True
    '''
    def choose(self, other):
        '*** YOUR CODE HERE ***'


def add_d_leaves(t, v):
    '''Add d leaves containing v to each node at every depth d.

    >>> t_one_to_four = Tree(1, [Tree(2), Tree(3, [Tree(4)])])
    >>> print(t_one_to_four)
    1
      2
      3
        4
    >>> add_d_leaves(t_one_to_four, 5)
    >>> print(t_one_to_four)
    1
      2
        5
      3
        4
          5
          5
        5

    >>> t0 = Tree(9)
    >>> add_d_leaves(t0, 4)
    >>> t0
    Tree(9)
    >>> t1 = Tree(1, [Tree(3)])
    >>> add_d_leaves(t1, 4)
    >>> t1
    Tree(1, [Tree(3, [Tree(4)])])
    >>> t2 = Tree(2, [Tree(5), Tree(6)])
    >>> t3 = Tree(3, [t1, Tree(0), t2])
    >>> print(t3)
    3
      1
        3
          4
      0
      2
        5
        6
    >>> add_d_leaves(t3, 10)
    >>> print(t3)
    3
      1
        3
          4
            10
            10
            10
          10
          10
        10
      0
        10
      2
        5
          10
          10
        6
          10
          10
        10
    '''
    '*** YOUR CODE HERE ***'


def level_mutation_link(t, funcs):
	'''Mutates t using the functions in the linked list funcs.

	>>> t = Tree(1, [Tree(2, [Tree(3)])])
	>>> funcs = Link(lambda x: x + 1, Link(lambda y: y * 5, Link(lambda z: z ** 2)))
	>>> level_mutation_link(t, funcs)
	>>> t    # At level 0, apply x + 1; at level 1, apply y * 5; at level 2 (leaf), apply z ** 2
	Tree(2, [Tree(10, [Tree(9)])])
	>>> t2 = Tree(1, [Tree(2), Tree(3, [Tree(4)])])
	>>> level_mutation_link(t2, funcs)
	>>> t2    # Level 0: 1+1=2; Level 1: 2*5=10 => 10**2 = 100, 3*5=15; Level 2 (leaf): 4**2=16
	Tree(2, [Tree(100), Tree(15, [Tree(16)])])
	>>> t3 = Tree(1, [Tree(2)])
	>>> level_mutation_link(t3, funcs)
	>>> t3    # Level 0: 1+1=2; Level 1: 2*5=10; no further levels, so apply remaining z ** 2: 10**2=100
	Tree(2, [Tree(100)])
	'''
	if _____________________:
		return
	t.label = _____________________
	remaining = _____________________
	if __________________ and __________________:
		while _____________________:
			_____________________
			remaining = remaining.rest
	for b in t.branches:
		_____________________


def store_digits(n):
    '''Stores the digits of a positive number n in a linked list.

    >>> s = store_digits(1)
    >>> s
    Link(1)
    >>> store_digits(2345)
    Link(2, Link(3, Link(4, Link(5))))
    >>> store_digits(876)
    Link(8, Link(7, Link(6)))
    >>> store_digits(2450)
    Link(2, Link(4, Link(5, Link(0))))
    >>> # a check for restricted functions
    >>> import inspect, re
    >>> cleaned = re.sub(r'#.*\\n', '', re.sub(r''{3}[\s\S]*?'{3}', '', inspect.getsource(store_digits)))
    >>> print('Do not use str or reversed!') if any([r in cleaned for r in ['str', 'reversed']]) else None
    '''
    '*** YOUR CODE HERE ***'


def deep_map_mut(func, lnk):
    '''Mutates a deep link lnk by replacing each item found with the
    result of calling func on the item. Does NOT create new Links (so
    no use of Link's constructor).

    Does not return the modified Link object.

    >>> link1 = Link(3, Link(Link(4), Link(5, Link(6))))
    >>> print(link1)
    <3 <4> 5 6>
    >>> # Disallow the use of making new Links before calling deep_map_mut
    >>> Link.__init__, hold = lambda *args: print('Do not create any new Links.'), Link.__init__
    >>> try:
    ...     deep_map_mut(lambda x: x * x, link1)
    ... finally:
    ...     Link.__init__ = hold
    >>> print(link1)
    <9 <16> 25 36>
    '''
    '*** YOUR CODE HERE ***'


def crispr_gene_insertion(lnk_of_genes, insert):
    '''Takes a linked list of genes and mutates the genes with the INSERT codon added the correct number of times.

    >>> link = Link(Link('AUG', Link('GCC', Link('ACG'))), Link(Link('ATG', Link('AUG', Link('ACG', Link('GCC'))))))
    >>> print(link)
    <<AUG GCC ACG> <ATG AUG ACG GCC>>
    >>> crispr_gene_insertion(link, 'TTA')
    >>> print(link)
    <<AUG TTA GCC ACG> <ATG AUG TTA TTA ACG GCC>>
    >>> link = Link(Link('ATG'), Link(Link('AUG', Link('AUG')), Link(Link('AUG', Link('GCC')))))
    >>> print(link)
    <<ATG> <AUG AUG> <AUG GCC>>
    >>> crispr_gene_insertion(link, 'TTA') # first gene has no AUG so unchanged, 2nd gene has 2 AUGs but only first considered for insertion
    >>> print(link)
    <<ATG> <AUG TTA TTA AUG> <AUG TTA TTA TTA GCC>>
    >>> link = Link.empty # empty linked list of genes stays empty
    >>> crispr_gene_insertion(link, 'TTA')
    >>> print(link)
    ()
    '''
    '*** YOUR CODE HERE ***'

def transcribe(dna):
    '''Takes a string of DNA and returns a Python list with the RNA codons.

    >>> DNA = 'TACCTAGCCCATAAA'
    >>> transcribe(DNA)
    ['AUG', 'GAU', 'CGG', 'GUA', 'UUU']
    '''
    dict = {'A': 'U', 'T': 'A', 'G': 'C', 'C': 'G'}
    return __________________


class Tree:
    '''
    >>> t = Tree(3, [Tree(2, [Tree(5)]), Tree(4)])
    >>> t.label
    3
    >>> t.branches[0].label
    2
    >>> t.branches[1].is_leaf()
    True
    '''
    def __init__(self, label, branches=[]):
        for b in branches:
            assert isinstance(b, Tree)
        self.label = label
        self.branches = list(branches)

    def is_leaf(self):
        return not self.branches

    def __repr__(self):
        if self.branches:
            branch_str = ', ' + repr(self.branches)
        else:
            branch_str = ''
        return 'Tree({0}{1})'.format(self.label, branch_str)

    def __str__(self):
        def print_tree(t, indent=0):
            tree_str = '  ' * indent + str(t.label) + '\n'
            for b in t.branches:
                tree_str += print_tree(b, indent + 1)
            return tree_str
        return print_tree(self).rstrip()


class Link:
    '''A linked list.

    >>> s = Link(1)
    >>> s.first
    1
    >>> s.rest is Link.empty
    True
    >>> s = Link(2, Link(3, Link(4)))
    >>> s.first = 5
    >>> s.rest.first = 6
    >>> s.rest.rest = Link.empty
    >>> s                                    # Displays the contents of repr(s)
    Link(5, Link(6))
    >>> s.rest = Link(7, Link(Link(8, Link(9))))
    >>> s
    Link(5, Link(7, Link(Link(8, Link(9)))))
    >>> print(s)                             # Prints str(s)
    <5 7 <8 9>>
    '''
    empty = ()

    def __init__(self, first, rest=empty):
        assert rest is Link.empty or isinstance(rest, Link)
        self.first = first
        self.rest = rest

    def __repr__(self):
        if self.rest is not Link.empty:
            rest_repr = ', ' + repr(self.rest)
        else:
            rest_repr = ''
        return 'Link(' + repr(self.first) + rest_repr + ')'

    def __str__(self):
        string = '<'
        while self.rest is not Link.empty:
            string += str(self.first) + ' '
            self = self.rest
        return string + str(self.first) + '>'
 
```





## hw06



```scheme
(define (square n) (* n n))

(define (pow base exp) 
  (cond 
    ((= exp 1) base)
    ((= exp 2) (square base))
    ((even? (modulo exp 2)) (square (pow base (quotient exp 2))))
    (else (* base (square (pow base (quotient exp 2)))))
  )
)

(define (repeatedly-cube n x)
  (if (zero? n)
      x
      (let ((y (repeatedly-cube (- n 1) x)))
        (* y y y)
      )
  )
)

(define (cddr s) (cdr (cdr s)))

(define (cadr s) (car (cdr s)))

(define (caddr s) (car (cdr (cdr s))))

(define (ascending? s) 
  (cond 
    ((or (null? s) (null? (cdr s))) #t)
    ((> (car s) (cadr s)) #f)
    (else (ascending? (cdr s)))
  )
)

(define (my-filter pred s)
  (cond 
    ((null? s) s)
    ((pred (car s)) 
      (cons (car s) (my-filter pred (cdr s)))
    )
    (else (my-filter pred (cdr s)))
  )
)
(define (no-repeats s) 
  (cond
    ((null? s) s)
    ((null? (cdr s)) s)
    (else (cons (car s) (no-repeats (my-filter (lambda (x) (not (= x (car s)))) (cdr s)))))
  )
)
; helper function
; returns the values of lst that are bigger than x
; e.g., (larger-values 3 '(1 2 3 4 5 1 2 3 4 5)) --> (4 5 4 5)
(define (larger-values x lst)
  (cond 
    ((null? lst) lst)
    ((< x (car lst)) (cons (car lst) (larger-values x (cdr lst))))
    (else (larger-values x (cdr lst)))
  )
)
(define (longest-increasing-subsequence lst)
  (if (null? lst)
      nil
      (begin (define first (car lst))
             (define rest (cdr lst))
             (define large-values-rest
                    (larger-values first rest)
             )
             (define with-first
                (cons first (longest-increasing-subsequence large-values-rest)
                )
             )
             (define without-first
                  (longest-increasing-subsequence rest)
              )
            (if (> (length with-first) (length without-first))
                 with-first
                 without-first
            )
      )
  )
)
(define (sqrt x)
  (define (good-enough? guess)
    (< (abs (- (square guess) x)) 0.001))
  (define (improve guess)
    (average guess (/ x guess)))
  (define (sqrt-iter guess)
    (if (good-enough? guess)
        guess
        (sqrt-iter (improve guess))))
  (sqrt-iter 1.0))
(sqrt 9)
```





## hw07



```scheme
(define (add-leaf t x)
  (if (is-leaf t)
      (tree (label t) nil)
      (begin (define mapped-branches
                (map  (lambda (b) (add-leaf b x))
                      (branches t)
                )
             )
            (tree (label t)
              (append mapped-branches (list (tree x nil)))
            )
      )
  )
)
```



```sqlite
CREATE TABLE parents AS
  SELECT 'abraham' AS parent, 'barack' AS child UNION
  SELECT 'abraham'          , 'clinton'         UNION
  SELECT 'delano'           , 'herbert'         UNION
  SELECT 'fillmore'         , 'abraham'         UNION
  SELECT 'fillmore'         , 'delano'          UNION
  SELECT 'fillmore'         , 'grover'          UNION
  SELECT 'eisenhower'       , 'fillmore';

CREATE TABLE dogs AS
  SELECT 'abraham' AS name, 'long' AS fur, 26 AS height UNION
  SELECT 'barack'         , 'short'      , 52           UNION
  SELECT 'clinton'        , 'long'       , 47           UNION
  SELECT 'delano'         , 'long'       , 46           UNION
  SELECT 'eisenhower'     , 'short'      , 35           UNION
  SELECT 'fillmore'       , 'curly'      , 32           UNION
  SELECT 'grover'         , 'short'      , 28           UNION
  SELECT 'herbert'        , 'curly'      , 31;

CREATE TABLE sizes AS
  SELECT 'toy' AS size, 24 AS min, 28 AS max UNION
  SELECT 'mini'       , 28       , 35        UNION
  SELECT 'medium'     , 35       , 45        UNION
  SELECT 'standard'   , 45       , 60;


-- All dogs with parents ordered by decreasing height of their parent
CREATE TABLE by_parent_height AS
  SELECT child FROM parents, dogs WHERE name = parent ORDER BY height desc;

-- The size of each dog
CREATE TABLE size_of_dogs AS

SELECT name, size FROM dogs, sizes
    WHERE height > min AND height <= max;
-- Filling out this helper table is optional
CREATE TABLE siblings AS
  SELECT a.child AS first, b.child AS second FROM parents AS a, parents AS b
      WHERE a.parent = b.parent AND a.child < b.child;
-- Sentences about siblings that are the same size
CREATE TABLE sentences AS
  SELECT 'The two siblings, ' || first || ' and ' || second || ', have the same size: ' || a.size
      FROM siblings, size_of_dogs AS a, size_of_dogs AS b
      WHERE a.size = b.size AND a.name = first AND b.name = second;

-- Height range for each fur type where all of the heights differ by no more than 30% from the average height
CREATE TABLE low_variance AS
  SELECT  fur, max(height) - min(height) 
  from dogs 
  group by fur 
  having MIN(height) >= .7 * AVG(height) AND MAX(height) <= 1.3 * AVG(height) ;
```

ã€‚">
<meta property="og:type" content="article">
<meta property="og:url" content="https://LianSeKong.github.io/lizi/post/cs61a-su24-hws.html">
<meta property="og:image" content="https://img.icons8.com/doodle/480/mugman.png">
<title>cs61a-su24-hws</title>
<link href="//unpkg.com/@wooorm/starry-night@2.1.1/style/both.css" rel="stylesheet" />


</head>
<style>
body{box-sizing: border-box;min-width: 200px;max-width: 900px;margin: 20px auto;padding: 45px;font-size: 16px;font-family: sans-serif;line-height: 1.25;}
#header{display:flex;padding-bottom:8px;border-bottom: 1px solid var(--borderColor-muted, var(--color-border-muted));margin-bottom: 16px;}
#footer {margin-top:64px; text-align: center;font-size: small;}

</style>

<style>
.postTitle{margin: auto 0;font-size:40px;font-weight:bold;}
.title-right{display:flex;margin:auto 0 0 auto;}
.title-right .circle{padding: 14px 16px;margin-right:8px;}
#postBody{border-bottom: 1px solid var(--color-border-default);padding-bottom:36px;}
#postBody hr{height:2px;}
#cmButton{height:48px;margin-top:48px;}
#comments{margin-top:64px;}
.g-emoji{font-size:24px;}
@media (max-width: 600px) {
    body {padding: 8px;}
    .postTitle{font-size:24px;}
}
.copy-feedback {
    display: none;
    position: absolute;
    top: 10px;
    right: 50px;
    color: var(--color-fg-on-emphasis);
    background-color: var(--color-fg-muted);
    border-radius: 3px;
    padding: 5px 8px;
    font-size: 12px;
}
</style>




<body>
    <div id="header">
<h1 class="postTitle">cs61a-su24-hws</h1>
<div class="title-right">
    <a href="https://LianSeKong.github.io/lizi" id="buttonHome" class="btn btn-invisible circle" title="é¦–é¡µ">
        <svg class="octicon" width="16" height="16">
            <path id="pathHome" fill-rule="evenodd"></path>
        </svg>
    </a>
    
    <a href="https://github.com/LianSeKong/lizi/issues/13" target="_blank" class="btn btn-invisible circle" title="Issue">
        <svg class="octicon" width="16" height="16">
            <path id="pathIssue" fill-rule="evenodd"></path>
        </svg>
    </a>
    

    <a class="btn btn-invisible circle" onclick="modeSwitch();" title="åˆ‡æ¢ä¸»é¢˜">
        <svg class="octicon" width="16" height="16" >
            <path id="themeSwitch" fill-rule="evenodd"></path>
        </svg>
    </a>

</div>
</div>
    <div id="content">
<div class="markdown-body" id="postBody"><h1>CS61 Summer2024  homework</h1>
<h2>hw01</h2>
<div class="highlight highlight-source-python"><pre class="notranslate"><span class="pl-k">from</span> <span class="pl-s1">operator</span> <span class="pl-k">import</span> <span class="pl-s1">add</span>, <span class="pl-s1">sub</span>

<span class="pl-k">def</span> <span class="pl-en">a_plus_abs_b</span>(<span class="pl-s1">a</span>, <span class="pl-s1">b</span>):
    <span class="pl-s">"""Return a+abs(b), but without calling abs.</span>
<span class="pl-s"></span>
<span class="pl-s">    &gt;&gt;&gt; a_plus_abs_b(2, 3)</span>
<span class="pl-s">    5</span>
<span class="pl-s">    &gt;&gt;&gt; a_plus_abs_b(2, -3)</span>
<span class="pl-s">    5</span>
<span class="pl-s">    &gt;&gt;&gt; a_plus_abs_b(-1, 4)</span>
<span class="pl-s">    3</span>
<span class="pl-s">    &gt;&gt;&gt; a_plus_abs_b(-1, -4)</span>
<span class="pl-s">    3</span>
<span class="pl-s">    """</span>
    <span class="pl-k">if</span> <span class="pl-s1">b</span> <span class="pl-c1">&lt;</span> <span class="pl-c1">0</span>:
        <span class="pl-s1">f</span> <span class="pl-c1">=</span> <span class="pl-s1">sub</span>
    <span class="pl-k">else</span>:
        <span class="pl-s1">f</span> <span class="pl-c1">=</span> <span class="pl-s1">add</span>
    <span class="pl-k">return</span> <span class="pl-en">f</span>(<span class="pl-s1">a</span>, <span class="pl-s1">b</span>)


<span class="pl-k">def</span> <span class="pl-en">two_of_three</span>(<span class="pl-s1">i</span>, <span class="pl-s1">j</span>, <span class="pl-s1">k</span>):
    <span class="pl-s">"""Return m*m + n*n, where m and n are the two smallest members of the</span>
<span class="pl-s">    positive numbers i, j, and k.</span>
<span class="pl-s"></span>
<span class="pl-s">    &gt;&gt;&gt; two_of_three(1, 2, 3)</span>
<span class="pl-s">    5</span>
<span class="pl-s">    &gt;&gt;&gt; two_of_three(5, 3, 1)</span>
<span class="pl-s">    10</span>
<span class="pl-s">    &gt;&gt;&gt; two_of_three(10, 2, 8)</span>
<span class="pl-s">    68</span>
<span class="pl-s">    &gt;&gt;&gt; two_of_three(5, 5, 5)</span>
<span class="pl-s">    50</span>
<span class="pl-s">    """</span>
    <span class="pl-k">return</span> <span class="pl-s1">i</span> <span class="pl-c1">**</span> <span class="pl-c1">2</span> <span class="pl-c1">+</span> <span class="pl-s1">j</span> <span class="pl-c1">**</span> <span class="pl-c1">2</span> <span class="pl-c1">+</span> <span class="pl-s1">k</span> <span class="pl-c1">**</span> <span class="pl-c1">2</span> <span class="pl-c1">-</span> <span class="pl-en">max</span>(<span class="pl-s1">i</span>, <span class="pl-s1">j</span>, <span class="pl-s1">k</span>) <span class="pl-c1">**</span> <span class="pl-c1">2</span>



<span class="pl-k">def</span> <span class="pl-en">largest_factor</span>(<span class="pl-s1">n</span>):
    <span class="pl-s">"""Return the largest factor of n that is smaller than n.</span>
<span class="pl-s"></span>
<span class="pl-s">    &gt;&gt;&gt; largest_factor(15) # factors are 1, 3, 5</span>
<span class="pl-s">    5</span>
<span class="pl-s">    &gt;&gt;&gt; largest_factor(80) # factors are 1, 2, 4, 5, 8, 10, 16, 20, 40</span>
<span class="pl-s">    40</span>
<span class="pl-s">    &gt;&gt;&gt; largest_factor(13) # factor is 1 since 13 is prime</span>
<span class="pl-s">    1</span>
<span class="pl-s">    """</span>
    <span class="pl-s1">i</span> <span class="pl-c1">=</span> <span class="pl-s1">n</span> <span class="pl-c1">-</span> <span class="pl-c1">1</span>
    <span class="pl-k">while</span> <span class="pl-s1">i</span> <span class="pl-c1">&gt;=</span> <span class="pl-c1">1</span>:
        <span class="pl-k">if</span> <span class="pl-s1">n</span> <span class="pl-c1">%</span> <span class="pl-s1">i</span> <span class="pl-c1">==</span> <span class="pl-c1">0</span>: 
            <span class="pl-k">return</span> <span class="pl-s1">i</span>
        <span class="pl-s1">i</span> <span class="pl-c1">=</span> <span class="pl-s1">i</span> <span class="pl-c1">-</span><span class="pl-c1">1</span>    



<span class="pl-k">def</span> <span class="pl-en">hailstone</span>(<span class="pl-s1">n</span>):
    <span class="pl-s">"""Print the hailstone sequence starting at n and return its</span>
<span class="pl-s">    length.</span>
<span class="pl-s"></span>
<span class="pl-s">    &gt;&gt;&gt; a = hailstone(10)</span>
<span class="pl-s">    10</span>
<span class="pl-s">    5</span>
<span class="pl-s">    16</span>
<span class="pl-s">    8</span>
<span class="pl-s">    4</span>
<span class="pl-s">    2</span>
<span class="pl-s">    1</span>
<span class="pl-s">    &gt;&gt;&gt; a</span>
<span class="pl-s">    7</span>
<span class="pl-s">    &gt;&gt;&gt; b = hailstone(1)</span>
<span class="pl-s">    1</span>
<span class="pl-s">    &gt;&gt;&gt; b</span>
<span class="pl-s">    1</span>
<span class="pl-s">    """</span>
    <span class="pl-s1">length</span> <span class="pl-c1">=</span> <span class="pl-c1">1</span>
    <span class="pl-k">while</span> <span class="pl-s1">n</span> <span class="pl-c1">!=</span> <span class="pl-c1">1</span>:
        <span class="pl-en">print</span>(<span class="pl-s1">n</span>)
        <span class="pl-k">if</span> <span class="pl-s1">n</span> <span class="pl-c1">%</span> <span class="pl-c1">2</span> <span class="pl-c1">==</span> <span class="pl-c1">0</span>:
            <span class="pl-s1">n</span> <span class="pl-c1">=</span> <span class="pl-s1">n</span> <span class="pl-c1">//</span><span class="pl-c1">2</span>
        <span class="pl-k">else</span>:
            <span class="pl-s1">n</span> <span class="pl-c1">=</span> <span class="pl-c1">3</span> <span class="pl-c1">*</span> <span class="pl-s1">n</span> <span class="pl-c1">+</span> <span class="pl-c1">1</span>
        <span class="pl-s1">length</span> <span class="pl-c1">=</span> <span class="pl-s1">length</span> <span class="pl-c1">+</span> <span class="pl-c1">1</span>
    <span class="pl-en">print</span>(<span class="pl-s1">n</span>)
    <span class="pl-k">return</span> <span class="pl-s1">length</span></pre></div>
<h2>hw02</h2>
<div class="highlight highlight-source-python"><pre class="notranslate"><span class="pl-k">from</span> <span class="pl-s1">operator</span> <span class="pl-k">import</span> <span class="pl-s1">add</span>, <span class="pl-s1">mul</span>, <span class="pl-s1">sub</span>

<span class="pl-s1">square</span> <span class="pl-c1">=</span> <span class="pl-k">lambda</span> <span class="pl-s1">x</span>: <span class="pl-s1">x</span> <span class="pl-c1">*</span> <span class="pl-s1">x</span>

<span class="pl-s1">identity</span> <span class="pl-c1">=</span> <span class="pl-k">lambda</span> <span class="pl-s1">x</span>: <span class="pl-s1">x</span>

<span class="pl-s1">triple</span> <span class="pl-c1">=</span> <span class="pl-k">lambda</span> <span class="pl-s1">x</span>: <span class="pl-c1">3</span> <span class="pl-c1">*</span> <span class="pl-s1">x</span>

<span class="pl-s1">increment</span> <span class="pl-c1">=</span> <span class="pl-k">lambda</span> <span class="pl-s1">x</span>: <span class="pl-s1">x</span> <span class="pl-c1">+</span> <span class="pl-c1">1</span>


<span class="pl-v">HW_SOURCE_FILE</span><span class="pl-c1">=</span><span class="pl-s1">__file__</span>


<span class="pl-k">def</span> <span class="pl-en">product</span>(<span class="pl-s1">n</span>, <span class="pl-s1">term</span>):
    <span class="pl-s">"""Return the product of the first n terms in a sequence.</span>
<span class="pl-s"></span>
<span class="pl-s">    n: a positive integer</span>
<span class="pl-s">    term:  a function that takes one argument to produce the term</span>
<span class="pl-s"></span>
<span class="pl-s">    &gt;&gt;&gt; product(3, identity)  # 1 * 2 * 3</span>
<span class="pl-s">    6</span>
<span class="pl-s">    &gt;&gt;&gt; product(5, identity)  # 1 * 2 * 3 * 4 * 5</span>
<span class="pl-s">    120</span>
<span class="pl-s">    &gt;&gt;&gt; product(3, square)    # 1^2 * 2^2 * 3^2</span>
<span class="pl-s">    36</span>
<span class="pl-s">    &gt;&gt;&gt; product(5, square)    # 1^2 * 2^2 * 3^2 * 4^2 * 5^2</span>
<span class="pl-s">    14400</span>
<span class="pl-s">    &gt;&gt;&gt; product(3, increment) # (1+1) * (2+1) * (3+1)</span>
<span class="pl-s">    24</span>
<span class="pl-s">    &gt;&gt;&gt; product(3, triple)    # 1*3 * 2*3 * 3*3</span>
<span class="pl-s">    162</span>
<span class="pl-s">    """</span>
    <span class="pl-s1">i</span>, <span class="pl-s1">product_result</span> <span class="pl-c1">=</span> <span class="pl-c1">1</span>, <span class="pl-c1">1</span>
    <span class="pl-k">while</span> <span class="pl-s1">i</span> <span class="pl-c1">&lt;=</span> <span class="pl-s1">n</span>:
        <span class="pl-s1">product_result</span>, <span class="pl-s1">i</span> <span class="pl-c1">=</span> <span class="pl-s1">product_result</span> <span class="pl-c1">*</span> <span class="pl-en">term</span>(<span class="pl-s1">i</span>), <span class="pl-s1">i</span> <span class="pl-c1">+</span> <span class="pl-c1">1</span>
    <span class="pl-k">return</span> <span class="pl-s1">product_result</span>


<span class="pl-k">def</span> <span class="pl-en">accumulate</span>(<span class="pl-s1">fuse</span>, <span class="pl-s1">start</span>, <span class="pl-s1">n</span>, <span class="pl-s1">term</span>):
    <span class="pl-s">"""Return the result of fusing together the first n terms in a sequence </span>
<span class="pl-s">    and start.  The terms to be fused are term(1), term(2), ..., term(n). </span>
<span class="pl-s">    The function fuse is a two-argument commutative &amp; associative function.</span>
<span class="pl-s"></span>
<span class="pl-s">    &gt;&gt;&gt; accumulate(add, 0, 5, identity)  # 0 + 1 + 2 + 3 + 4 + 5</span>
<span class="pl-s">    15</span>
<span class="pl-s">    &gt;&gt;&gt; accumulate(add, 11, 5, identity) # 11 + 1 + 2 + 3 + 4 + 5</span>
<span class="pl-s">    26</span>
<span class="pl-s">    &gt;&gt;&gt; accumulate(add, 11, 0, identity) # 11 (fuse is never used)</span>
<span class="pl-s">    11</span>
<span class="pl-s">    &gt;&gt;&gt; accumulate(add, 11, 3, square)   # 11 + 1^2 + 2^2 + 3^2</span>
<span class="pl-s">    25</span>
<span class="pl-s">    &gt;&gt;&gt; accumulate(mul, 2, 3, square)    # 2 * 1^2 * 2^2 * 3^2</span>
<span class="pl-s">    72</span>
<span class="pl-s">    &gt;&gt;&gt; # 2 + (1^2 + 1) + (2^2 + 1) + (3^2 + 1)</span>
<span class="pl-s">    &gt;&gt;&gt; accumulate(lambda x, y: x + y + 1, 2, 3, square)</span>
<span class="pl-s">    19</span>
<span class="pl-s">    """</span>
    <span class="pl-s1">i</span> <span class="pl-c1">=</span> <span class="pl-c1">1</span>
    <span class="pl-s1">product_result</span> <span class="pl-c1">=</span> <span class="pl-s1">start</span>
    <span class="pl-k">while</span> <span class="pl-s1">i</span> <span class="pl-c1">&lt;=</span> <span class="pl-s1">n</span>:
        <span class="pl-s1">product_result</span> <span class="pl-c1">=</span> <span class="pl-en">fuse</span>(<span class="pl-s1">product_result</span>, <span class="pl-en">term</span>(<span class="pl-s1">i</span>))
        <span class="pl-s1">i</span> <span class="pl-c1">=</span> <span class="pl-s1">i</span> <span class="pl-c1">+</span> <span class="pl-c1">1</span>
    <span class="pl-k">return</span> <span class="pl-s1">product_result</span>


<span class="pl-k">def</span> <span class="pl-en">summation_using_accumulate</span>(<span class="pl-s1">n</span>, <span class="pl-s1">term</span>):
    <span class="pl-s">"""Returns the sum: term(1) + ... + term(n), using accumulate.</span>
<span class="pl-s"></span>
<span class="pl-s">    &gt;&gt;&gt; summation_using_accumulate(5, square) # square(0) + square(1) + ... + square(4) + square(5)</span>
<span class="pl-s">    55</span>
<span class="pl-s">    &gt;&gt;&gt; summation_using_accumulate(5, triple) # triple(0) + triple(1) + ... + triple(4) + triple(5)</span>
<span class="pl-s">    45</span>
<span class="pl-s">    &gt;&gt;&gt; # This test checks that the body of the function is just a return statement.</span>
<span class="pl-s">    &gt;&gt;&gt; import inspect, ast</span>
<span class="pl-s">    &gt;&gt;&gt; [type(x).__name__ for x in ast.parse(inspect.getsource(summation_using_accumulate)).body[0].body]</span>
<span class="pl-s">    ['Expr', 'Return']</span>
<span class="pl-s">    """</span>
    <span class="pl-k">return</span> <span class="pl-en">accumulate</span>(<span class="pl-s1">add</span>, <span class="pl-en">term</span>(<span class="pl-c1">0</span>), <span class="pl-s1">n</span>, <span class="pl-s1">term</span>)


<span class="pl-k">def</span> <span class="pl-en">product_using_accumulate</span>(<span class="pl-s1">n</span>, <span class="pl-s1">term</span>):
    <span class="pl-s">"""Returns the product: term(1) * ... * term(n), using accumulate.</span>
<span class="pl-s"></span>
<span class="pl-s">    &gt;&gt;&gt; product_using_accumulate(4, square) # square(1) * square(2) * square(3) * square()</span>
<span class="pl-s">    576</span>
<span class="pl-s">    &gt;&gt;&gt; product_using_accumulate(6, triple) # triple(1) * triple(2) * ... * triple(5) * triple(6)</span>
<span class="pl-s">    524880</span>
<span class="pl-s">    &gt;&gt;&gt; # This test checks that the body of the function is just a return statement.</span>
<span class="pl-s">    &gt;&gt;&gt; import inspect, ast</span>
<span class="pl-s">    &gt;&gt;&gt; [type(x).__name__ for x in ast.parse(inspect.getsource(product_using_accumulate)).body[0].body]</span>
<span class="pl-s">    ['Expr', 'Return']</span>
<span class="pl-s">    """</span>
    <span class="pl-k">return</span> <span class="pl-en">accumulate</span>(<span class="pl-s1">mul</span>,<span class="pl-c1">1</span>,<span class="pl-s1">n</span>,<span class="pl-s1">term</span>)


<span class="pl-k">def</span> <span class="pl-en">make_repeater</span>(<span class="pl-s1">f</span>, <span class="pl-s1">n</span>):
    <span class="pl-s">"""Returns the function that computes the nth application of f.</span>
<span class="pl-s"></span>
<span class="pl-s">    &gt;&gt;&gt; add_three = make_repeater(increment, 3)</span>
<span class="pl-s">    &gt;&gt;&gt; add_three(5)</span>
<span class="pl-s">    8</span>
<span class="pl-s">    &gt;&gt;&gt; make_repeater(triple, 5)(1) # 3 * (3 * (3 * (3 * (3 * 1))))</span>
<span class="pl-s">    243</span>
<span class="pl-s">    &gt;&gt;&gt; make_repeater(square, 2)(5) # square(square(5))</span>
<span class="pl-s">    625</span>
<span class="pl-s">    &gt;&gt;&gt; make_repeater(square, 3)(5) # square(square(square(5)))</span>
<span class="pl-s">    390625</span>
<span class="pl-s">    """</span>
    <span class="pl-k">def</span> <span class="pl-en">repeater</span>(<span class="pl-s1">x</span>):
            <span class="pl-s1">k</span> <span class="pl-c1">=</span> <span class="pl-c1">0</span>
            <span class="pl-k">while</span> <span class="pl-s1">k</span> <span class="pl-c1">&lt;</span> <span class="pl-s1">n</span>:
                <span class="pl-s1">x</span>, <span class="pl-s1">k</span> <span class="pl-c1">=</span> <span class="pl-en">f</span>(<span class="pl-s1">x</span>), <span class="pl-s1">k</span> <span class="pl-c1">+</span> <span class="pl-c1">1</span>
            <span class="pl-k">return</span> <span class="pl-s1">x</span>
    <span class="pl-k">return</span> <span class="pl-s1">repeater</span> 


<span class="pl-k">def</span> <span class="pl-en">digit_distance</span>(<span class="pl-s1">n</span>):
    <span class="pl-s">"""Determines the digit distance of n.</span>
<span class="pl-s"></span>
<span class="pl-s">    &gt;&gt;&gt; digit_distance(3)</span>
<span class="pl-s">    0</span>
<span class="pl-s">    &gt;&gt;&gt; digit_distance(777)</span>
<span class="pl-s">    0</span>
<span class="pl-s">    &gt;&gt;&gt; digit_distance(314)</span>
<span class="pl-s">    5</span>
<span class="pl-s">    &gt;&gt;&gt; digit_distance(31415926535)</span>
<span class="pl-s">    32</span>
<span class="pl-s">    &gt;&gt;&gt; digit_distance(3464660003)</span>
<span class="pl-s">    16</span>
<span class="pl-s">    &gt;&gt;&gt; from construct_check import check</span>
<span class="pl-s">    &gt;&gt;&gt; # ban all loops</span>
<span class="pl-s">    &gt;&gt;&gt; check(HW_SOURCE_FILE, 'digit_distance',</span>
<span class="pl-s">    ...       ['For', 'While'])</span>
<span class="pl-s">    True</span>
<span class="pl-s">    """</span>
    <span class="pl-k">if</span> <span class="pl-s1">n</span> <span class="pl-c1">&lt;</span> <span class="pl-c1">10</span>:
        <span class="pl-k">return</span> <span class="pl-c1">0</span>
    <span class="pl-k">else</span>:
        <span class="pl-k">return</span> <span class="pl-en">abs</span>(<span class="pl-en">sub</span>(<span class="pl-s1">n</span> <span class="pl-c1">%</span> <span class="pl-c1">10</span>, <span class="pl-s1">n</span> <span class="pl-c1">//</span> <span class="pl-c1">10</span> <span class="pl-c1">%</span> <span class="pl-c1">10</span>)) <span class="pl-c1">+</span> <span class="pl-en">digit_distance</span>(<span class="pl-s1">n</span> <span class="pl-c1">//</span> <span class="pl-c1">10</span>)


<span class="pl-k">def</span> <span class="pl-en">interleaved_sum</span>(<span class="pl-s1">n</span>, <span class="pl-s1">odd_func</span>, <span class="pl-s1">even_func</span>):
    <span class="pl-s">"""Compute the sum odd_func(1) + even_func(2) + odd_func(3) + ..., up</span>
<span class="pl-s">    to n.</span>
<span class="pl-s"></span>
<span class="pl-s">    &gt;&gt;&gt; identity = lambda x: x</span>
<span class="pl-s">    &gt;&gt;&gt; square = lambda x: x * x</span>
<span class="pl-s">    &gt;&gt;&gt; triple = lambda x: x * 3</span>
<span class="pl-s">    &gt;&gt;&gt; interleaved_sum(5, identity, square) # 1   + 2*2 + 3   + 4*4 + 5</span>
<span class="pl-s">    29</span>
<span class="pl-s">    &gt;&gt;&gt; interleaved_sum(5, square, identity) # 1*1 + 2   + 3*3 + 4   + 5*5</span>
<span class="pl-s">    41</span>
<span class="pl-s">    &gt;&gt;&gt; interleaved_sum(4, triple, square)   # 1*3 + 2*2 + 3*3 + 4*4</span>
<span class="pl-s">    32</span>
<span class="pl-s">    &gt;&gt;&gt; interleaved_sum(4, square, triple)   # 1*1 + 2*3 + 3*3 + 4*3</span>
<span class="pl-s">    28</span>
<span class="pl-s">    &gt;&gt;&gt; from construct_check import check</span>
<span class="pl-s">    &gt;&gt;&gt; check(HW_SOURCE_FILE, 'interleaved_sum', ['While', 'For', 'Mod']) # ban loops and %</span>
<span class="pl-s">    True</span>
<span class="pl-s">    &gt;&gt;&gt; check(HW_SOURCE_FILE, 'interleaved_sum', ['BitAnd', 'BitOr', 'BitXor']) # ban bitwise operators, don't worry about these if you don't know what they are</span>
<span class="pl-s">    True</span>
<span class="pl-s">    """</span>

    <span class="pl-k">if</span> <span class="pl-s1">n</span> <span class="pl-c1">==</span> <span class="pl-c1">0</span>:
        <span class="pl-k">return</span> <span class="pl-c1">0</span>
    <span class="pl-k">elif</span> <span class="pl-s1">n</span> <span class="pl-c1">%</span> <span class="pl-c1">2</span> <span class="pl-c1">==</span> <span class="pl-c1">1</span>:
        <span class="pl-k">return</span> <span class="pl-en">odd_func</span>(<span class="pl-s1">n</span>) <span class="pl-c1">+</span> <span class="pl-en">interleaved_sum</span>(<span class="pl-s1">n</span> <span class="pl-c1">-</span> <span class="pl-c1">1</span>, <span class="pl-s1">odd_func</span>, <span class="pl-s1">even_func</span>)
    <span class="pl-k">else</span>:
        <span class="pl-k">return</span> <span class="pl-en">even_func</span>(<span class="pl-s1">n</span>) <span class="pl-c1">+</span> <span class="pl-en">interleaved_sum</span>(<span class="pl-s1">n</span> <span class="pl-c1">-</span> <span class="pl-c1">1</span>, <span class="pl-s1">odd_func</span>, <span class="pl-s1">even_func</span>)


<span class="pl-k">def</span> <span class="pl-en">next_larger_coin</span>(<span class="pl-s1">coin</span>):
    <span class="pl-s">"""Returns the next larger coin in order.</span>
<span class="pl-s">    &gt;&gt;&gt; next_larger_coin(1)</span>
<span class="pl-s">    5</span>
<span class="pl-s">    &gt;&gt;&gt; next_larger_coin(5)</span>
<span class="pl-s">    10</span>
<span class="pl-s">    &gt;&gt;&gt; next_larger_coin(10)</span>
<span class="pl-s">    25</span>
<span class="pl-s">    &gt;&gt;&gt; next_larger_coin(2) # Other values return None</span>
<span class="pl-s">    """</span>
    <span class="pl-k">if</span> <span class="pl-s1">coin</span> <span class="pl-c1">==</span> <span class="pl-c1">1</span>:
        <span class="pl-k">return</span> <span class="pl-c1">5</span>
    <span class="pl-k">elif</span> <span class="pl-s1">coin</span> <span class="pl-c1">==</span> <span class="pl-c1">5</span>:
        <span class="pl-k">return</span> <span class="pl-c1">10</span>
    <span class="pl-k">elif</span> <span class="pl-s1">coin</span> <span class="pl-c1">==</span> <span class="pl-c1">10</span>:
        <span class="pl-k">return</span> <span class="pl-c1">25</span>

<span class="pl-k">def</span> <span class="pl-en">next_smaller_coin</span>(<span class="pl-s1">coin</span>):
    <span class="pl-s">"""Returns the next smaller coin in order.</span>
<span class="pl-s">    &gt;&gt;&gt; next_smaller_coin(25)</span>
<span class="pl-s">    10</span>
<span class="pl-s">    &gt;&gt;&gt; next_smaller_coin(10)</span>
<span class="pl-s">    5</span>
<span class="pl-s">    &gt;&gt;&gt; next_smaller_coin(5)</span>
<span class="pl-s">    1</span>
<span class="pl-s">    &gt;&gt;&gt; next_smaller_coin(2) # Other values return None</span>
<span class="pl-s">    """</span>
    <span class="pl-k">if</span> <span class="pl-s1">coin</span> <span class="pl-c1">==</span> <span class="pl-c1">25</span>:
        <span class="pl-k">return</span> <span class="pl-c1">10</span>
    <span class="pl-k">elif</span> <span class="pl-s1">coin</span> <span class="pl-c1">==</span> <span class="pl-c1">10</span>:
        <span class="pl-k">return</span> <span class="pl-c1">5</span>
    <span class="pl-k">elif</span> <span class="pl-s1">coin</span> <span class="pl-c1">==</span> <span class="pl-c1">5</span>:
        <span class="pl-k">return</span> <span class="pl-c1">1</span>

<span class="pl-k">def</span> <span class="pl-en">count_coins</span>(<span class="pl-s1">total</span>):
    <span class="pl-s">"""Return the number of ways to make change using coins of value of 1, 5, 10, 25.</span>
<span class="pl-s">    &gt;&gt;&gt; count_coins(15)</span>
<span class="pl-s">    6</span>
<span class="pl-s">    &gt;&gt;&gt; count_coins(10)</span>
<span class="pl-s">    4</span>
<span class="pl-s">    &gt;&gt;&gt; count_coins(20)</span>
<span class="pl-s">    9</span>
<span class="pl-s">    &gt;&gt;&gt; count_coins(100) # How many ways to make change for a dollar?</span>
<span class="pl-s">    242</span>
<span class="pl-s">    &gt;&gt;&gt; count_coins(200)</span>
<span class="pl-s">    1463</span>
<span class="pl-s">    &gt;&gt;&gt; from construct_check import check</span>
<span class="pl-s">    &gt;&gt;&gt; # ban iteration</span>
<span class="pl-s">    &gt;&gt;&gt; check(HW_SOURCE_FILE, 'count_coins', ['While', 'For'])</span>
<span class="pl-s">    True</span>
<span class="pl-s">    """</span>
                                        
    <span class="pl-k">def</span> <span class="pl-en">helper</span>(<span class="pl-s1">total</span>, <span class="pl-s1">coin</span>):
        <span class="pl-k">if</span> <span class="pl-s1">total</span> <span class="pl-c1">==</span> <span class="pl-c1">0</span>:
            <span class="pl-k">return</span> <span class="pl-c1">1</span>
        <span class="pl-k">if</span> <span class="pl-s1">total</span> <span class="pl-c1">&lt;</span> <span class="pl-c1">0</span> <span class="pl-c1">or</span> <span class="pl-c1">not</span> <span class="pl-s1">coin</span> :
            <span class="pl-k">return</span> <span class="pl-c1">0</span>
        <span class="pl-k">return</span> <span class="pl-en">helper</span>(<span class="pl-s1">total</span> <span class="pl-c1">-</span> <span class="pl-s1">coin</span>,<span class="pl-s1">coin</span>) <span class="pl-c1">+</span> <span class="pl-en">helper</span>(<span class="pl-s1">total</span>, <span class="pl-en">next_smaller_coin</span>(<span class="pl-s1">coin</span>))
    <span class="pl-k">return</span> <span class="pl-en">helper</span>(<span class="pl-s1">total</span>, <span class="pl-c1">25</span>)</pre></div>
<h2>hw03</h2>
<div class="highlight highlight-source-python"><pre class="notranslate"><span class="pl-v">HW_SOURCE_FILE</span><span class="pl-c1">=</span><span class="pl-s1">__file__</span>


<span class="pl-k">def</span> <span class="pl-en">pascal</span>(<span class="pl-s1">row</span>, <span class="pl-s1">column</span>):
    <span class="pl-s">"""Returns the value of the item in Pascal's Triangle</span>
<span class="pl-s">    whose position is specified by row and column.</span>
<span class="pl-s">    &gt;&gt;&gt; pascal(0, 0)    # The top left (the point of the triangle)</span>
<span class="pl-s">    1</span>
<span class="pl-s">    &gt;&gt;&gt; pascal(0, 5)	# Empty entry; outside of Pascal's Triangle</span>
<span class="pl-s">    0</span>
<span class="pl-s">    &gt;&gt;&gt; pascal(3, 2)	# Row 3 (1 3 3 1), Column 2</span>
<span class="pl-s">    3</span>
<span class="pl-s">    &gt;&gt;&gt; pascal(4, 2)     # Row 4 (1 4 6 4 1), Column 2</span>
<span class="pl-s">    6</span>
<span class="pl-s">    """</span>
    <span class="pl-k">if</span> <span class="pl-s1">column</span> <span class="pl-c1">==</span> <span class="pl-c1">0</span>:
        <span class="pl-k">return</span> <span class="pl-c1">1</span>
    <span class="pl-k">elif</span> <span class="pl-s1">row</span> <span class="pl-c1">==</span> <span class="pl-c1">0</span>:
        <span class="pl-k">return</span> <span class="pl-c1">0</span>
    <span class="pl-k">else</span>:
        <span class="pl-k">return</span> <span class="pl-en">pascal</span>(<span class="pl-s1">row</span> <span class="pl-c1">-</span> <span class="pl-c1">1</span>, <span class="pl-s1">column</span>) <span class="pl-c1">+</span> <span class="pl-en">pascal</span>(<span class="pl-s1">row</span> <span class="pl-c1">-</span> <span class="pl-c1">1</span>, <span class="pl-s1">column</span> <span class="pl-c1">-</span> <span class="pl-c1">1</span>)

<span class="pl-k">def</span> <span class="pl-en">insert_items</span>(<span class="pl-s1">s</span>, <span class="pl-s1">before</span>, <span class="pl-s1">after</span>):
    <span class="pl-s">"""Insert after into s after each occurrence of before and then return s.</span>
<span class="pl-s"></span>
<span class="pl-s">    &gt;&gt;&gt; test_s = [1, 5, 8, 5, 2, 3]</span>
<span class="pl-s">    &gt;&gt;&gt; new_s = insert_items(test_s, 5, 7)</span>
<span class="pl-s">    &gt;&gt;&gt; new_s</span>
<span class="pl-s">    [1, 5, 7, 8, 5, 7, 2, 3]</span>
<span class="pl-s">    &gt;&gt;&gt; test_s</span>
<span class="pl-s">    [1, 5, 7, 8, 5, 7, 2, 3]</span>
<span class="pl-s">    &gt;&gt;&gt; new_s is test_s</span>
<span class="pl-s">    True</span>
<span class="pl-s">    &gt;&gt;&gt; double_s = [1, 2, 1, 2, 3, 3]</span>
<span class="pl-s">    &gt;&gt;&gt; double_s = insert_items(double_s, 3, 4)</span>
<span class="pl-s">    &gt;&gt;&gt; double_s</span>
<span class="pl-s">    [1, 2, 1, 2, 3, 4, 3, 4]</span>
<span class="pl-s">    &gt;&gt;&gt; large_s = [1, 4, 8]</span>
<span class="pl-s">    &gt;&gt;&gt; large_s2 = insert_items(large_s, 4, 4)</span>
<span class="pl-s">    &gt;&gt;&gt; large_s2</span>
<span class="pl-s">    [1, 4, 4, 8]</span>
<span class="pl-s">    &gt;&gt;&gt; large_s3 = insert_items(large_s2, 4, 6)</span>
<span class="pl-s">    &gt;&gt;&gt; large_s3</span>
<span class="pl-s">    [1, 4, 6, 4, 6, 8]</span>
<span class="pl-s">    &gt;&gt;&gt; large_s3 is large_s</span>
<span class="pl-s">    True</span>
<span class="pl-s">    """</span>
    <span class="pl-s1">i</span> <span class="pl-c1">=</span> <span class="pl-c1">0</span>
    <span class="pl-k">while</span> <span class="pl-s1">i</span> <span class="pl-c1">&lt;</span> <span class="pl-en">len</span>(<span class="pl-s1">s</span>):
        <span class="pl-k">if</span> <span class="pl-s1">s</span>[<span class="pl-s1">i</span>] <span class="pl-c1">==</span> <span class="pl-s1">before</span>:
            <span class="pl-s1">s</span>.<span class="pl-en">insert</span>(<span class="pl-s1">i</span> <span class="pl-c1">+</span> <span class="pl-c1">1</span>, <span class="pl-s1">after</span>)
            <span class="pl-s1">i</span> <span class="pl-c1">+=</span> <span class="pl-c1">1</span>
        <span class="pl-s1">i</span> <span class="pl-c1">+=</span> <span class="pl-c1">1</span>
    <span class="pl-k">return</span> <span class="pl-s1">s</span>


<span class="pl-v">HW_SOURCE_FILE</span><span class="pl-c1">=</span><span class="pl-s1">__file__</span>


<span class="pl-k">def</span> <span class="pl-en">planet</span>(<span class="pl-s1">mass</span>):
    <span class="pl-s">"""Construct a planet of some mass."""</span>
    <span class="pl-k">assert</span> <span class="pl-s1">mass</span> <span class="pl-c1">&gt;</span> <span class="pl-c1">0</span>

    <span class="pl-k">return</span> [<span class="pl-s">"planet"</span>, <span class="pl-s1">mass</span>]
<span class="pl-k">def</span> <span class="pl-en">mass</span>(<span class="pl-s1">p</span>):
    <span class="pl-s">"""Select the mass of a planet."""</span>
    <span class="pl-k">assert</span> <span class="pl-en">is_planet</span>(<span class="pl-s1">p</span>), <span class="pl-s">'must call mass on a planet'</span>
    <span class="pl-k">return</span> <span class="pl-s1">p</span>[<span class="pl-c1">1</span>]


<span class="pl-k">def</span> <span class="pl-en">is_planet</span>(<span class="pl-s1">p</span>):
    <span class="pl-s">"""Whether p is a planet."""</span>
    <span class="pl-k">return</span> <span class="pl-en">type</span>(<span class="pl-s1">p</span>) <span class="pl-c1">==</span> <span class="pl-s1">list</span> <span class="pl-c1">and</span> <span class="pl-en">len</span>(<span class="pl-s1">p</span>) <span class="pl-c1">==</span> <span class="pl-c1">2</span> <span class="pl-c1">and</span> <span class="pl-s1">p</span>[<span class="pl-c1">0</span>] <span class="pl-c1">==</span> <span class="pl-s">'planet'</span>

<span class="pl-k">def</span> <span class="pl-en">examples</span>():
    <span class="pl-s1">t</span> <span class="pl-c1">=</span> <span class="pl-en">mobile</span>(<span class="pl-en">arm</span>(<span class="pl-c1">1</span>, <span class="pl-en">planet</span>(<span class="pl-c1">2</span>)),
               <span class="pl-en">arm</span>(<span class="pl-c1">2</span>, <span class="pl-en">planet</span>(<span class="pl-c1">1</span>)))
    <span class="pl-s1">u</span> <span class="pl-c1">=</span> <span class="pl-en">mobile</span>(<span class="pl-en">arm</span>(<span class="pl-c1">5</span>, <span class="pl-en">planet</span>(<span class="pl-c1">1</span>)),
               <span class="pl-en">arm</span>(<span class="pl-c1">1</span>, <span class="pl-en">mobile</span>(<span class="pl-en">arm</span>(<span class="pl-c1">2</span>, <span class="pl-en">planet</span>(<span class="pl-c1">3</span>)),
                             <span class="pl-en">arm</span>(<span class="pl-c1">3</span>, <span class="pl-en">planet</span>(<span class="pl-c1">2</span>)))))
    <span class="pl-s1">v</span> <span class="pl-c1">=</span> <span class="pl-en">mobile</span>(<span class="pl-en">arm</span>(<span class="pl-c1">4</span>, <span class="pl-s1">t</span>), <span class="pl-en">arm</span>(<span class="pl-c1">2</span>, <span class="pl-s1">u</span>))
    <span class="pl-k">return</span> <span class="pl-s1">t</span>, <span class="pl-s1">u</span>, <span class="pl-s1">v</span>

<span class="pl-k">def</span> <span class="pl-en">total_mass</span>(<span class="pl-s1">m</span>):
    <span class="pl-s">"""Return the total mass of m, a planet or mobile.</span>
<span class="pl-s"></span>
<span class="pl-s">    &gt;&gt;&gt; t, u, v = examples()</span>
<span class="pl-s">    &gt;&gt;&gt; total_mass(t)</span>
<span class="pl-s">    3</span>
<span class="pl-s">    &gt;&gt;&gt; total_mass(u)</span>
<span class="pl-s">    6</span>
<span class="pl-s">    &gt;&gt;&gt; total_mass(v)</span>
<span class="pl-s">    9</span>
<span class="pl-s">    """</span>
    <span class="pl-k">if</span> <span class="pl-en">is_planet</span>(<span class="pl-s1">m</span>):
        <span class="pl-k">return</span> <span class="pl-en">mass</span>(<span class="pl-s1">m</span>)
    <span class="pl-k">else</span>:
        <span class="pl-k">assert</span> <span class="pl-en">is_mobile</span>(<span class="pl-s1">m</span>), <span class="pl-s">"must get total mass of a mobile or a planet"</span>
        <span class="pl-k">return</span> <span class="pl-en">total_mass</span>(<span class="pl-en">end</span>(<span class="pl-en">left</span>(<span class="pl-s1">m</span>))) <span class="pl-c1">+</span> <span class="pl-en">total_mass</span>(<span class="pl-en">end</span>(<span class="pl-en">right</span>(<span class="pl-s1">m</span>)))

<span class="pl-k">def</span> <span class="pl-en">balanced</span>(<span class="pl-s1">m</span>):
    <span class="pl-s">"""Return whether m is balanced.</span>
<span class="pl-s"></span>
<span class="pl-s">    &gt;&gt;&gt; t, u, v = examples()</span>
<span class="pl-s">    &gt;&gt;&gt; balanced(t)</span>
<span class="pl-s">    True</span>
<span class="pl-s">    &gt;&gt;&gt; balanced(v)</span>
<span class="pl-s">    True</span>
<span class="pl-s">    &gt;&gt;&gt; p = mobile(arm(3, t), arm(2, u))</span>
<span class="pl-s">    &gt;&gt;&gt; balanced(p)</span>
<span class="pl-s">    False</span>
<span class="pl-s">    &gt;&gt;&gt; balanced(mobile(arm(1, v), arm(1, p)))</span>
<span class="pl-s">    False</span>
<span class="pl-s">    &gt;&gt;&gt; balanced(mobile(arm(1, p), arm(1, v)))</span>
<span class="pl-s">    False</span>
<span class="pl-s">    &gt;&gt;&gt; from construct_check import check</span>
<span class="pl-s">    &gt;&gt;&gt; # checking for abstraction barrier violations by banning indexing</span>
<span class="pl-s">    &gt;&gt;&gt; check(HW_SOURCE_FILE, 'balanced', ['Index'])</span>
<span class="pl-s">    True</span>
<span class="pl-s">    """</span>
    <span class="pl-k">if</span> <span class="pl-en">is_planet</span>(<span class="pl-s1">m</span>):
        <span class="pl-k">return</span> <span class="pl-c1">True</span>
    <span class="pl-k">else</span>:
        <span class="pl-s1">left_end</span>, <span class="pl-s1">right_end</span> <span class="pl-c1">=</span> <span class="pl-en">end</span>(<span class="pl-en">left</span>(<span class="pl-s1">m</span>)), <span class="pl-en">end</span>(<span class="pl-en">right</span>(<span class="pl-s1">m</span>))
        <span class="pl-s1">torque_left</span> <span class="pl-c1">=</span> <span class="pl-en">length</span>(<span class="pl-en">left</span>(<span class="pl-s1">m</span>)) <span class="pl-c1">*</span> <span class="pl-en">total_mass</span>(<span class="pl-s1">left_end</span>)
        <span class="pl-s1">torque_right</span> <span class="pl-c1">=</span> <span class="pl-en">length</span>(<span class="pl-en">right</span>(<span class="pl-s1">m</span>)) <span class="pl-c1">*</span> <span class="pl-en">total_mass</span>(<span class="pl-s1">right_end</span>)
        <span class="pl-k">return</span> <span class="pl-s1">torque_left</span> <span class="pl-c1">==</span> <span class="pl-s1">torque_right</span> <span class="pl-c1">and</span> <span class="pl-en">balanced</span>(<span class="pl-s1">left_end</span>) <span class="pl-c1">and</span> <span class="pl-en">balanced</span>(<span class="pl-s1">right_end</span>)

<span class="pl-k">def</span> <span class="pl-en">berry_finder</span>(<span class="pl-s1">t</span>):
    <span class="pl-s">"""Returns True if t contains a node with the value 'berry' and </span>
<span class="pl-s">    False otherwise.</span>
<span class="pl-s"></span>
<span class="pl-s">    &gt;&gt;&gt; scrat = tree('berry')</span>
<span class="pl-s">    &gt;&gt;&gt; berry_finder(scrat)</span>
<span class="pl-s">    True</span>
<span class="pl-s">    &gt;&gt;&gt; sproul = tree('roots', [tree('branch1', [tree('leaf'), tree('berry')]), tree('branch2')])</span>
<span class="pl-s">    &gt;&gt;&gt; berry_finder(sproul)</span>
<span class="pl-s">    True</span>
<span class="pl-s">    &gt;&gt;&gt; numbers = tree(1, [tree(2), tree(3, [tree(4), tree(5)]), tree(6, [tree(7)])])</span>
<span class="pl-s">    &gt;&gt;&gt; berry_finder(numbers)</span>
<span class="pl-s">    False</span>
<span class="pl-s">    &gt;&gt;&gt; t = tree(1, [tree('berry',[tree('not berry')])])</span>
<span class="pl-s">    &gt;&gt;&gt; berry_finder(t)</span>
<span class="pl-s">    True</span>
<span class="pl-s">    """</span>
    <span class="pl-k">if</span> <span class="pl-en">label</span>(<span class="pl-s1">t</span>) <span class="pl-c1">==</span> <span class="pl-s">'berry'</span>:
        <span class="pl-k">return</span> <span class="pl-c1">True</span>
    
    <span class="pl-k">return</span> <span class="pl-en">len</span>([<span class="pl-s1">x</span> <span class="pl-k">for</span> <span class="pl-s1">x</span> <span class="pl-c1">in</span> <span class="pl-en">branches</span>(<span class="pl-s1">t</span>) <span class="pl-k">if</span> <span class="pl-en">berry_finder</span>(<span class="pl-s1">x</span>) <span class="pl-c1">==</span> <span class="pl-c1">True</span>]) <span class="pl-c1">&gt;</span> <span class="pl-c1">0</span>


<span class="pl-v">HW_SOURCE_FILE</span><span class="pl-c1">=</span><span class="pl-s1">__file__</span>


<span class="pl-k">def</span> <span class="pl-en">max_path_sum</span>(<span class="pl-s1">t</span>):
    <span class="pl-s">"""Return the maximum root-to-leaf path sum of a tree.</span>
<span class="pl-s">    &gt;&gt;&gt; t = tree(1, [tree(5, [tree(1), tree(3)]), tree(10)])</span>
<span class="pl-s">    &gt;&gt;&gt; max_path_sum(t) # 1, 10</span>
<span class="pl-s">    11</span>
<span class="pl-s">    &gt;&gt;&gt; t2 = tree(5, [tree(4, [tree(1), tree(3)]), tree(2, [tree(10), tree(3)])])</span>
<span class="pl-s">    &gt;&gt;&gt; max_path_sum(t2) # 5, 2, 10</span>
<span class="pl-s">    17</span>
<span class="pl-s">    """</span>
    <span class="pl-k">if</span> <span class="pl-en">is_leaf</span>(<span class="pl-s1">t</span>):
        <span class="pl-k">return</span> <span class="pl-en">label</span>(<span class="pl-s1">t</span>)
    
    <span class="pl-k">return</span> <span class="pl-en">max</span>([<span class="pl-en">max_path_sum</span>(<span class="pl-s1">i</span>) <span class="pl-k">for</span> <span class="pl-s1">i</span> <span class="pl-c1">in</span> <span class="pl-en">branches</span>(<span class="pl-s1">t</span>)]) <span class="pl-c1">+</span> <span class="pl-en">label</span>(<span class="pl-s1">t</span>)


<span class="pl-k">def</span> <span class="pl-en">print_move</span>(<span class="pl-s1">origin</span>, <span class="pl-s1">destination</span>):
    <span class="pl-s">"""Print instructions to move a disk."""</span>
    <span class="pl-en">print</span>(<span class="pl-s">"Move the top disk from rod"</span>, <span class="pl-s1">origin</span>, <span class="pl-s">"to rod"</span>, <span class="pl-s1">destination</span>)

<span class="pl-k">def</span> <span class="pl-en">move_stack</span>(<span class="pl-s1">n</span>, <span class="pl-s1">start</span>, <span class="pl-s1">end</span>):
    <span class="pl-s">"""Print the moves required to move n disks on the start pole to the end</span>
<span class="pl-s">    pole without violating the rules of Towers of Hanoi.</span>
<span class="pl-s"></span>
<span class="pl-s">    n -- number of disks</span>
<span class="pl-s">    start -- a pole position, either 1, 2, or 3</span>
<span class="pl-s">    end -- a pole position, either 1, 2, or 3</span>
<span class="pl-s"></span>
<span class="pl-s">    There are exactly three poles, and start and end must be different. Assume</span>
<span class="pl-s">    that the start pole has at least n disks of increasing size, and the end</span>
<span class="pl-s">    pole is either empty or has a top disk larger than the top n start disks.</span>
<span class="pl-s"></span>
<span class="pl-s">    &gt;&gt;&gt; move_stack(1, 1, 3)</span>
<span class="pl-s">    Move the top disk from rod 1 to rod 3</span>
<span class="pl-s">    &gt;&gt;&gt; move_stack(2, 1, 3)</span>
<span class="pl-s">    Move the top disk from rod 1 to rod 2</span>
<span class="pl-s">    Move the top disk from rod 1 to rod 3</span>
<span class="pl-s">    Move the top disk from rod 2 to rod 3</span>
<span class="pl-s">    &gt;&gt;&gt; move_stack(3, 1, 3)</span>
<span class="pl-s">    Move the top disk from rod 1 to rod 3</span>
<span class="pl-s">    Move the top disk from rod 1 to rod 2</span>
<span class="pl-s">    Move the top disk from rod 3 to rod 2</span>
<span class="pl-s">    Move the top disk from rod 1 to rod 3</span>
<span class="pl-s">    Move the top disk from rod 2 to rod 1</span>
<span class="pl-s">    Move the top disk from rod 2 to rod 3</span>
<span class="pl-s">    Move the top disk from rod 1 to rod 3</span>
<span class="pl-s">    """</span>
    <span class="pl-k">assert</span> <span class="pl-c1">1</span> <span class="pl-c1">&lt;=</span> <span class="pl-s1">start</span> <span class="pl-c1">&lt;=</span> <span class="pl-c1">3</span> <span class="pl-c1">and</span> <span class="pl-c1">1</span> <span class="pl-c1">&lt;=</span> <span class="pl-s1">end</span> <span class="pl-c1">&lt;=</span> <span class="pl-c1">3</span> <span class="pl-c1">and</span> <span class="pl-s1">start</span> <span class="pl-c1">!=</span> <span class="pl-s1">end</span>, <span class="pl-s">"Bad start/end"</span>
    <span class="pl-k">if</span> <span class="pl-s1">n</span> <span class="pl-c1">==</span> <span class="pl-c1">1</span>:
        <span class="pl-en">print_move</span>(<span class="pl-s1">start</span>, <span class="pl-s1">end</span>)
    <span class="pl-k">else</span>: 
        <span class="pl-en">move_stack</span>(<span class="pl-s1">n</span> <span class="pl-c1">-</span> <span class="pl-c1">1</span>, <span class="pl-s1">start</span>, <span class="pl-c1">6</span> <span class="pl-c1">-</span> <span class="pl-s1">start</span> <span class="pl-c1">-</span> <span class="pl-s1">end</span>)
        <span class="pl-en">move_stack</span>(<span class="pl-c1">1</span>, <span class="pl-s1">start</span>, <span class="pl-s1">end</span>)
        <span class="pl-en">move_stack</span>(<span class="pl-s1">n</span> <span class="pl-c1">-</span> <span class="pl-c1">1</span>, <span class="pl-c1">6</span> <span class="pl-c1">-</span> <span class="pl-s1">start</span> <span class="pl-c1">-</span> <span class="pl-s1">end</span>, <span class="pl-s1">end</span>)

<span class="pl-k">from</span> <span class="pl-s1">operator</span> <span class="pl-k">import</span> <span class="pl-s1">sub</span>, <span class="pl-s1">mul</span>

<span class="pl-k">def</span> <span class="pl-en">make_anonymous_factorial</span>():
    <span class="pl-s">"""Return the value of an expression that computes factorial.</span>
<span class="pl-s"></span>
<span class="pl-s">    &gt;&gt;&gt; make_anonymous_factorial()(5)</span>
<span class="pl-s">    120</span>
<span class="pl-s">    &gt;&gt;&gt; from construct_check import check</span>
<span class="pl-s">    &gt;&gt;&gt; # ban any assignments or recursion</span>
<span class="pl-s">    &gt;&gt;&gt; check(HW_SOURCE_FILE, 'make_anonymous_factorial',</span>
<span class="pl-s">    ...     ['Assign', 'AnnAssign', 'AugAssign', 'NamedExpr', 'FunctionDef', 'Recursion'])</span>
<span class="pl-s">    True</span>
<span class="pl-s">    """</span>
    <span class="pl-k">return</span> (<span class="pl-k">lambda</span> <span class="pl-s1">f</span>: <span class="pl-k">lambda</span> <span class="pl-s1">k</span>: <span class="pl-en">f</span>(<span class="pl-s1">f</span>, <span class="pl-s1">k</span>))(<span class="pl-k">lambda</span> <span class="pl-s1">f</span>, <span class="pl-s1">k</span>: <span class="pl-s1">k</span> <span class="pl-k">if</span> <span class="pl-s1">k</span> <span class="pl-c1">==</span> <span class="pl-c1">1</span> <span class="pl-k">else</span> <span class="pl-en">mul</span>(<span class="pl-s1">k</span>, <span class="pl-en">f</span>(<span class="pl-s1">f</span>, <span class="pl-en">sub</span>(<span class="pl-s1">k</span>, <span class="pl-c1">1</span>))))


<span class="pl-k">def</span> <span class="pl-en">mobile</span>(<span class="pl-s1">left</span>, <span class="pl-s1">right</span>):
    <span class="pl-s">"""Construct a mobile from a left arm and a right arm."""</span>
    <span class="pl-k">assert</span> <span class="pl-en">is_arm</span>(<span class="pl-s1">left</span>), <span class="pl-s">"left must be an arm"</span>
    <span class="pl-k">assert</span> <span class="pl-en">is_arm</span>(<span class="pl-s1">right</span>), <span class="pl-s">"right must be an arm"</span>
    <span class="pl-k">return</span> [<span class="pl-s">'mobile'</span>, <span class="pl-s1">left</span>, <span class="pl-s1">right</span>]

<span class="pl-k">def</span> <span class="pl-en">is_mobile</span>(<span class="pl-s1">m</span>):
    <span class="pl-s">"""Return whether m is a mobile."""</span>
    <span class="pl-k">return</span> <span class="pl-en">type</span>(<span class="pl-s1">m</span>) <span class="pl-c1">==</span> <span class="pl-s1">list</span> <span class="pl-c1">and</span> <span class="pl-en">len</span>(<span class="pl-s1">m</span>) <span class="pl-c1">==</span> <span class="pl-c1">3</span> <span class="pl-c1">and</span> <span class="pl-s1">m</span>[<span class="pl-c1">0</span>] <span class="pl-c1">==</span> <span class="pl-s">'mobile'</span>

<span class="pl-k">def</span> <span class="pl-en">left</span>(<span class="pl-s1">m</span>):
    <span class="pl-s">"""Select the left arm of a mobile."""</span>
    <span class="pl-k">assert</span> <span class="pl-en">is_mobile</span>(<span class="pl-s1">m</span>), <span class="pl-s">"must call left on a mobile"</span>
    <span class="pl-k">return</span> <span class="pl-s1">m</span>[<span class="pl-c1">1</span>]

<span class="pl-k">def</span> <span class="pl-en">right</span>(<span class="pl-s1">m</span>):
    <span class="pl-s">"""Select the right arm of a mobile."""</span>
    <span class="pl-k">assert</span> <span class="pl-en">is_mobile</span>(<span class="pl-s1">m</span>), <span class="pl-s">"must call right on a mobile"</span>
    <span class="pl-k">return</span> <span class="pl-s1">m</span>[<span class="pl-c1">2</span>]

<span class="pl-k">def</span> <span class="pl-en">arm</span>(<span class="pl-s1">length</span>, <span class="pl-s1">mobile_or_planet</span>):
    <span class="pl-s">"""Construct an arm: a length of rod with a mobile or planet at the end."""</span>
    <span class="pl-k">assert</span> <span class="pl-en">is_mobile</span>(<span class="pl-s1">mobile_or_planet</span>) <span class="pl-c1">or</span> <span class="pl-en">is_planet</span>(<span class="pl-s1">mobile_or_planet</span>)
    <span class="pl-k">return</span> [<span class="pl-s">'arm'</span>, <span class="pl-s1">length</span>, <span class="pl-s1">mobile_or_planet</span>]

<span class="pl-k">def</span> <span class="pl-en">is_arm</span>(<span class="pl-s1">s</span>):
    <span class="pl-s">"""Return whether s is an arm."""</span>
    <span class="pl-k">return</span> <span class="pl-en">type</span>(<span class="pl-s1">s</span>) <span class="pl-c1">==</span> <span class="pl-s1">list</span> <span class="pl-c1">and</span> <span class="pl-en">len</span>(<span class="pl-s1">s</span>) <span class="pl-c1">==</span> <span class="pl-c1">3</span> <span class="pl-c1">and</span> <span class="pl-s1">s</span>[<span class="pl-c1">0</span>] <span class="pl-c1">==</span> <span class="pl-s">'arm'</span>

<span class="pl-k">def</span> <span class="pl-en">length</span>(<span class="pl-s1">s</span>):
    <span class="pl-s">"""Select the length of an arm."""</span>
    <span class="pl-k">assert</span> <span class="pl-en">is_arm</span>(<span class="pl-s1">s</span>), <span class="pl-s">"must call length on an arm"</span>
    <span class="pl-k">return</span> <span class="pl-s1">s</span>[<span class="pl-c1">1</span>]

<span class="pl-k">def</span> <span class="pl-en">end</span>(<span class="pl-s1">s</span>):
    <span class="pl-s">"""Select the mobile or planet hanging at the end of an arm."""</span>
    <span class="pl-k">assert</span> <span class="pl-en">is_arm</span>(<span class="pl-s1">s</span>), <span class="pl-s">"must call end on an arm"</span>
    <span class="pl-k">return</span> <span class="pl-s1">s</span>[<span class="pl-c1">2</span>]



<span class="pl-c"># Tree Data Abstraction</span>

<span class="pl-k">def</span> <span class="pl-en">tree</span>(<span class="pl-s1">label</span>, <span class="pl-s1">branches</span><span class="pl-c1">=</span>[]):
    <span class="pl-s">"""Construct a tree with the given label value and a list of branches."""</span>
    <span class="pl-k">for</span> <span class="pl-s1">branch</span> <span class="pl-c1">in</span> <span class="pl-s1">branches</span>:
        <span class="pl-k">assert</span> <span class="pl-en">is_tree</span>(<span class="pl-s1">branch</span>), <span class="pl-s">'branches must be trees'</span>
    <span class="pl-k">return</span> [<span class="pl-s1">label</span>] <span class="pl-c1">+</span> <span class="pl-en">list</span>(<span class="pl-s1">branches</span>)

<span class="pl-k">def</span> <span class="pl-en">label</span>(<span class="pl-s1">tree</span>):
    <span class="pl-s">"""Return the label value of a tree."""</span>
    <span class="pl-k">return</span> <span class="pl-s1">tree</span>[<span class="pl-c1">0</span>]

<span class="pl-k">def</span> <span class="pl-en">branches</span>(<span class="pl-s1">tree</span>):
    <span class="pl-s">"""Return the list of branches of the given tree."""</span>
    <span class="pl-k">return</span> <span class="pl-s1">tree</span>[<span class="pl-c1">1</span>:]

<span class="pl-k">def</span> <span class="pl-en">is_tree</span>(<span class="pl-s1">tree</span>):
    <span class="pl-s">"""Returns True if the given tree is a tree, and False otherwise."""</span>
    <span class="pl-k">if</span> <span class="pl-en">type</span>(<span class="pl-s1">tree</span>) <span class="pl-c1">!=</span> <span class="pl-s1">list</span> <span class="pl-c1">or</span> <span class="pl-en">len</span>(<span class="pl-s1">tree</span>) <span class="pl-c1">&lt;</span> <span class="pl-c1">1</span>:
        <span class="pl-k">return</span> <span class="pl-c1">False</span>
    <span class="pl-k">for</span> <span class="pl-s1">branch</span> <span class="pl-c1">in</span> <span class="pl-en">branches</span>(<span class="pl-s1">tree</span>):
        <span class="pl-k">if</span> <span class="pl-c1">not</span> <span class="pl-en">is_tree</span>(<span class="pl-s1">branch</span>):
            <span class="pl-k">return</span> <span class="pl-c1">False</span>
    <span class="pl-k">return</span> <span class="pl-c1">True</span>

<span class="pl-k">def</span> <span class="pl-en">is_leaf</span>(<span class="pl-s1">tree</span>):
    <span class="pl-s">"""Returns True if the given tree's list of branches is empty, and False</span>
<span class="pl-s">    otherwise.</span>
<span class="pl-s">    """</span>
    <span class="pl-k">return</span> <span class="pl-c1">not</span> <span class="pl-en">branches</span>(<span class="pl-s1">tree</span>)

<span class="pl-k">def</span> <span class="pl-en">print_tree</span>(<span class="pl-s1">t</span>, <span class="pl-s1">indent</span><span class="pl-c1">=</span><span class="pl-c1">0</span>):
    <span class="pl-s">"""Print a representation of this tree in which each node is</span>
<span class="pl-s">    indented by two spaces times its depth from the root.</span>
<span class="pl-s"></span>
<span class="pl-s">    &gt;&gt;&gt; print_tree(tree(1))</span>
<span class="pl-s">    1</span>
<span class="pl-s">    &gt;&gt;&gt; print_tree(tree(1, [tree(2)]))</span>
<span class="pl-s">    1</span>
<span class="pl-s">      2</span>
<span class="pl-s">    &gt;&gt;&gt; numbers = tree(1, [tree(2), tree(3, [tree(4), tree(5)]), tree(6, [tree(7)])])</span>
<span class="pl-s">    &gt;&gt;&gt; print_tree(numbers)</span>
<span class="pl-s">    1</span>
<span class="pl-s">      2</span>
<span class="pl-s">      3</span>
<span class="pl-s">        4</span>
<span class="pl-s">        5</span>
<span class="pl-s">      6</span>
<span class="pl-s">        7</span>
<span class="pl-s">    """</span>
    <span class="pl-en">print</span>(<span class="pl-s">'  '</span> <span class="pl-c1">*</span> <span class="pl-s1">indent</span> <span class="pl-c1">+</span> <span class="pl-en">str</span>(<span class="pl-en">label</span>(<span class="pl-s1">t</span>)))
    <span class="pl-k">for</span> <span class="pl-s1">b</span> <span class="pl-c1">in</span> <span class="pl-en">branches</span>(<span class="pl-s1">t</span>):
        <span class="pl-en">print_tree</span>(<span class="pl-s1">b</span>, <span class="pl-s1">indent</span> <span class="pl-c1">+</span> <span class="pl-c1">1</span>)

<span class="pl-k">def</span> <span class="pl-en">copy_tree</span>(<span class="pl-s1">t</span>):
    <span class="pl-s">"""Returns a copy of t. Only for testing purposes.</span>
<span class="pl-s"></span>
<span class="pl-s">    &gt;&gt;&gt; t = tree(5)</span>
<span class="pl-s">    &gt;&gt;&gt; copy = copy_tree(t)</span>
<span class="pl-s">    &gt;&gt;&gt; t = tree(6)</span>
<span class="pl-s">    &gt;&gt;&gt; print_tree(copy)</span>
<span class="pl-s">    5</span>
<span class="pl-s">    """</span>
    <span class="pl-k">return</span> <span class="pl-en">tree</span>(<span class="pl-en">label</span>(<span class="pl-s1">t</span>), [<span class="pl-en">copy_tree</span>(<span class="pl-s1">b</span>) <span class="pl-k">for</span> <span class="pl-s1">b</span> <span class="pl-c1">in</span> <span class="pl-en">branches</span>(<span class="pl-s1">t</span>)])</pre></div>
<h2>hw04</h2>
<div class="highlight highlight-source-python"><pre class="notranslate"><span class="pl-k">def</span> <span class="pl-en">hailstone</span>(<span class="pl-s1">n</span>):
    <span class="pl-s">"""Q1: Yields the elements of the hailstone sequence starting at n.</span>
<span class="pl-s">       At the end of the sequence, yield 1 infinitely.</span>
<span class="pl-s"></span>
<span class="pl-s">    &gt;&gt;&gt; hail_gen = hailstone(10)</span>
<span class="pl-s">    &gt;&gt;&gt; [next(hail_gen) for _ in range(10)]</span>
<span class="pl-s">    [10, 5, 16, 8, 4, 2, 1, 1, 1, 1]</span>
<span class="pl-s">    &gt;&gt;&gt; next(hail_gen)</span>
<span class="pl-s">    1</span>
<span class="pl-s">    """</span>
    <span class="pl-k">yield</span> <span class="pl-s1">n</span>
    <span class="pl-k">if</span> <span class="pl-s1">n</span> <span class="pl-c1">==</span> <span class="pl-c1">1</span>:
       <span class="pl-k">yield</span> <span class="pl-k">from</span> <span class="pl-en">hailstone</span>(<span class="pl-c1">1</span>)
    <span class="pl-k">elif</span> <span class="pl-s1">n</span> <span class="pl-c1">%</span> <span class="pl-c1">2</span> <span class="pl-c1">==</span> <span class="pl-c1">1</span>: 
        <span class="pl-k">yield</span> <span class="pl-k">from</span> <span class="pl-en">hailstone</span>(<span class="pl-s1">n</span> <span class="pl-c1">*</span> <span class="pl-c1">3</span> <span class="pl-c1">+</span> <span class="pl-c1">1</span>)
    <span class="pl-k">else</span>:
        <span class="pl-k">yield</span> <span class="pl-k">from</span> <span class="pl-en">hailstone</span>(<span class="pl-s1">n</span> <span class="pl-c1">//</span> <span class="pl-c1">2</span>)


<span class="pl-k">def</span> <span class="pl-en">merge</span>(<span class="pl-s1">a</span>, <span class="pl-s1">b</span>):
    <span class="pl-s">"""Q2:</span>
<span class="pl-s">    &gt;&gt;&gt; def sequence(start, step):</span>
<span class="pl-s">    ...     while True:</span>
<span class="pl-s">    ...         yield start</span>
<span class="pl-s">    ...         start += step</span>
<span class="pl-s">    &gt;&gt;&gt; a = sequence(2, 3) # 2, 5, 8, 11, 14, ...</span>
<span class="pl-s">    &gt;&gt;&gt; b = sequence(3, 2) # 3, 5, 7, 9, 11, 13, 15, ...</span>
<span class="pl-s">    &gt;&gt;&gt; result = merge(a, b) # 2, 3, 5, 7, 8, 9, 11, 13, 14, 15</span>
<span class="pl-s">    &gt;&gt;&gt; [next(result) for _ in range(10)]</span>
<span class="pl-s">    [2, 3, 5, 7, 8, 9, 11, 13, 14, 15]</span>
<span class="pl-s">    """</span>
    <span class="pl-s1">first_a</span>, <span class="pl-s1">first_b</span> <span class="pl-c1">=</span> <span class="pl-en">next</span>(<span class="pl-s1">a</span>), <span class="pl-en">next</span>(<span class="pl-s1">b</span>)
    <span class="pl-k">while</span> <span class="pl-c1">True</span>:
        <span class="pl-k">if</span> <span class="pl-s1">first_a</span> <span class="pl-c1">==</span> <span class="pl-s1">first_b</span>:
            <span class="pl-k">yield</span> <span class="pl-s1">first_a</span>
            <span class="pl-s1">first_a</span>, <span class="pl-s1">first_b</span> <span class="pl-c1">=</span> <span class="pl-en">next</span>(<span class="pl-s1">a</span>), <span class="pl-en">next</span>(<span class="pl-s1">b</span>)
        <span class="pl-k">elif</span> <span class="pl-s1">first_a</span> <span class="pl-c1">&lt;</span> <span class="pl-s1">first_b</span>:
            <span class="pl-k">yield</span> <span class="pl-s1">first_a</span>
            <span class="pl-s1">first_a</span> <span class="pl-c1">=</span> <span class="pl-en">next</span>(<span class="pl-s1">a</span>)
        <span class="pl-k">else</span>:
            <span class="pl-k">yield</span> <span class="pl-s1">first_b</span>
            <span class="pl-s1">first_b</span> <span class="pl-c1">=</span> <span class="pl-en">next</span>(<span class="pl-s1">b</span>)

<span class="pl-k">def</span> <span class="pl-en">perms</span>(<span class="pl-s1">seq</span>):
    <span class="pl-s">"""Q3: Generates all permutations of the given sequence. Each permutation is a</span>
<span class="pl-s">    list of the elements in SEQ in a different order. The permutations may be</span>
<span class="pl-s">    yielded in any order.</span>
<span class="pl-s"></span>
<span class="pl-s">    &gt;&gt;&gt; p = perms([100])</span>
<span class="pl-s">    &gt;&gt;&gt; type(p)</span>
<span class="pl-s">    &lt;class 'generator'&gt;</span>
<span class="pl-s">    &gt;&gt;&gt; next(p)</span>
<span class="pl-s">    [100]</span>
<span class="pl-s">    &gt;&gt;&gt; try: # Prints "No more permutations!" if calling next would cause an error</span>
<span class="pl-s">    ...     next(p)</span>
<span class="pl-s">    ... except StopIteration:</span>
<span class="pl-s">    ...     print('No more permutations!')</span>
<span class="pl-s">    No more permutations!</span>
<span class="pl-s">    &gt;&gt;&gt; sorted(perms([1, 2, 3])) # Returns a sorted list containing elements of the generator</span>
<span class="pl-s">    [[1, 2, 3], [1, 3, 2], [2, 1, 3], [2, 3, 1], [3, 1, 2], [3, 2, 1]]</span>
<span class="pl-s">    &gt;&gt;&gt; sorted(perms((10, 20, 30)))</span>
<span class="pl-s">    [[10, 20, 30], [10, 30, 20], [20, 10, 30], [20, 30, 10], [30, 10, 20], [30, 20, 10]]</span>
<span class="pl-s">    &gt;&gt;&gt; sorted(perms("ab"))</span>
<span class="pl-s">    [['a', 'b'], ['b', 'a']]</span>
<span class="pl-s">    """</span>
    <span class="pl-k">if</span> <span class="pl-en">len</span>(<span class="pl-s1">seq</span>) <span class="pl-c1">==</span> <span class="pl-c1">1</span>:
        <span class="pl-k">yield</span> [<span class="pl-s1">seq</span>[<span class="pl-c1">0</span>]]
    <span class="pl-k">else</span>:
        <span class="pl-k">for</span> <span class="pl-s1">i</span> <span class="pl-c1">in</span> <span class="pl-en">range</span>(<span class="pl-en">len</span>(<span class="pl-s1">seq</span>)):
            <span class="pl-s1">lst</span> <span class="pl-c1">=</span> <span class="pl-en">list</span>(<span class="pl-en">perms</span>(<span class="pl-s1">seq</span>[:<span class="pl-s1">i</span>] <span class="pl-c1">+</span> <span class="pl-s1">seq</span>[(<span class="pl-s1">i</span> <span class="pl-c1">+</span> <span class="pl-c1">1</span>):]))
            <span class="pl-k">for</span> <span class="pl-s1">it</span> <span class="pl-c1">in</span> <span class="pl-s1">lst</span>:
                <span class="pl-s1">it</span>.<span class="pl-en">append</span>(<span class="pl-s1">seq</span>[<span class="pl-s1">i</span>]) 
                <span class="pl-k">yield</span> <span class="pl-s1">it</span>




<span class="pl-k">def</span> <span class="pl-en">yield_paths</span>(<span class="pl-s1">t</span>, <span class="pl-s1">value</span>):
    <span class="pl-s">"""Q4: Yields all possible paths from the root of t to a node with the label</span>
<span class="pl-s">    value as a list.</span>
<span class="pl-s"></span>
<span class="pl-s">    &gt;&gt;&gt; t1 = tree(1, [tree(2, [tree(3), tree(4, [tree(6)]), tree(5)]), tree(5)])</span>
<span class="pl-s">    &gt;&gt;&gt; print_tree(t1)</span>
<span class="pl-s">    1</span>
<span class="pl-s">      2</span>
<span class="pl-s">        3</span>
<span class="pl-s">        4</span>
<span class="pl-s">          6</span>
<span class="pl-s">        5</span>
<span class="pl-s">      5</span>
<span class="pl-s">    &gt;&gt;&gt; next(yield_paths(t1, 6))</span>
<span class="pl-s">    [1, 2, 4, 6]</span>
<span class="pl-s">    &gt;&gt;&gt; path_to_5 = yield_paths(t1, 5)</span>
<span class="pl-s">    &gt;&gt;&gt; sorted(list(path_to_5))</span>
<span class="pl-s">    [[1, 2, 5], [1, 5]]</span>
<span class="pl-s"></span>
<span class="pl-s">    &gt;&gt;&gt; t2 = tree(0, [tree(2, [t1])])</span>
<span class="pl-s">    &gt;&gt;&gt; print_tree(t2)</span>
<span class="pl-s">    0</span>
<span class="pl-s">      2</span>
<span class="pl-s">        1</span>
<span class="pl-s">          2</span>
<span class="pl-s">            3</span>
<span class="pl-s">            4</span>
<span class="pl-s">              6</span>
<span class="pl-s">            5</span>
<span class="pl-s">          5</span>
<span class="pl-s">    &gt;&gt;&gt; path_to_2 = yield_paths(t2, 2)</span>
<span class="pl-s">    &gt;&gt;&gt; sorted(list(path_to_2))</span>
<span class="pl-s">    [[0, 2], [0, 2, 1, 2]]</span>
<span class="pl-s">    """</span>
    <span class="pl-k">if</span> <span class="pl-en">label</span>(<span class="pl-s1">t</span>) <span class="pl-c1">==</span> <span class="pl-s1">value</span>:
        <span class="pl-k">yield</span> [<span class="pl-en">label</span>(<span class="pl-s1">t</span>)]
    <span class="pl-k">for</span> <span class="pl-s1">b</span> <span class="pl-c1">in</span> <span class="pl-en">branches</span>(<span class="pl-s1">t</span>):
        <span class="pl-k">for</span> <span class="pl-s1">path</span> <span class="pl-c1">in</span> <span class="pl-en">list</span>(<span class="pl-en">yield_paths</span>(<span class="pl-s1">b</span>, <span class="pl-s1">value</span>)):
            <span class="pl-k">yield</span> [<span class="pl-en">label</span>(<span class="pl-s1">t</span>)] <span class="pl-c1">+</span> <span class="pl-s1">path</span>


<span class="pl-k">class</span> <span class="pl-v">Minty</span>:
    <span class="pl-s">"""A mint creates coins by stamping on years. The update method sets the mint's stamp to Minty.present_year.</span>
<span class="pl-s">    &gt;&gt;&gt; mint = Minty()</span>
<span class="pl-s">    &gt;&gt;&gt; mint.year</span>
<span class="pl-s">    2021</span>
<span class="pl-s">    &gt;&gt;&gt; dime = mint.create('Dime')</span>
<span class="pl-s">    &gt;&gt;&gt; dime.year</span>
<span class="pl-s">    2021</span>
<span class="pl-s">    &gt;&gt;&gt; Minty.present_year = 2101  # Time passes</span>
<span class="pl-s">    &gt;&gt;&gt; nickel = mint.create('Nickel')</span>
<span class="pl-s">    &gt;&gt;&gt; nickel.year     # The mint has not updated its stamp yet</span>
<span class="pl-s">    2021</span>
<span class="pl-s">    &gt;&gt;&gt; nickel.worth()  # 5 cents + (80 - 50 years)</span>
<span class="pl-s">    35</span>
<span class="pl-s">    &gt;&gt;&gt; mint.update()   # The mint's year is updated to 2101</span>
<span class="pl-s">    &gt;&gt;&gt; Minty.present_year = 2176     # More time passes</span>
<span class="pl-s">    &gt;&gt;&gt; mint.create('Dime').worth()    # 10 cents + (75 - 50 years)</span>
<span class="pl-s">    35</span>
<span class="pl-s">    &gt;&gt;&gt; Minty().create('Dime').worth()  # A new mint has the current year</span>
<span class="pl-s">    10</span>
<span class="pl-s">    &gt;&gt;&gt; dime.worth()     # 10 cents + (155 - 50 years)</span>
<span class="pl-s">    115</span>
<span class="pl-s">    """</span>
    <span class="pl-s1">present_year</span> <span class="pl-c1">=</span> <span class="pl-c1">2021</span>

    <span class="pl-k">def</span> <span class="pl-en">__init__</span>(<span class="pl-s1">self</span>):
        <span class="pl-s1">self</span>.<span class="pl-en">update</span>()

    <span class="pl-k">def</span> <span class="pl-en">create</span>(<span class="pl-s1">self</span>, <span class="pl-s1">type</span>):
        <span class="pl-k">return</span> <span class="pl-v">Coin</span>(<span class="pl-s1">self</span>.<span class="pl-s1">year</span>, <span class="pl-s1">type</span>)

    <span class="pl-k">def</span> <span class="pl-en">update</span>(<span class="pl-s1">self</span>):
        <span class="pl-s1">self</span>.<span class="pl-s1">year</span> <span class="pl-c1">=</span> <span class="pl-v">Minty</span>.<span class="pl-s1">present_year</span>

<span class="pl-k">class</span> <span class="pl-v">Coin</span>:
    <span class="pl-s1">cents</span> <span class="pl-c1">=</span> <span class="pl-c1">50</span>

    <span class="pl-k">def</span> <span class="pl-en">__init__</span>(<span class="pl-s1">self</span>, <span class="pl-s1">year</span>, <span class="pl-s1">type</span>):
        <span class="pl-s1">self</span>.<span class="pl-s1">year</span> <span class="pl-c1">=</span> <span class="pl-s1">year</span>
        <span class="pl-k">if</span> <span class="pl-s1">type</span> <span class="pl-c1">==</span> (<span class="pl-s">'Dime'</span>):
            <span class="pl-s1">self</span>.<span class="pl-s1">cents</span> <span class="pl-c1">=</span> <span class="pl-c1">10</span>
        <span class="pl-k">elif</span> <span class="pl-s1">type</span> <span class="pl-c1">==</span> (<span class="pl-s">'Nickel'</span>):
            <span class="pl-s1">self</span>.<span class="pl-s1">cents</span> <span class="pl-c1">=</span> <span class="pl-c1">5</span>

    <span class="pl-k">def</span> <span class="pl-en">worth</span>(<span class="pl-s1">self</span>):
        <span class="pl-k">return</span> <span class="pl-s1">self</span>.<span class="pl-s1">cents</span> <span class="pl-c1">+</span> <span class="pl-en">max</span>(<span class="pl-c1">0</span>, <span class="pl-v">Minty</span>.<span class="pl-s1">present_year</span> <span class="pl-c1">-</span> <span class="pl-s1">self</span>.<span class="pl-s1">year</span> <span class="pl-c1">-</span> <span class="pl-c1">50</span>)


<span class="pl-k">class</span> <span class="pl-v">VendingMachine</span>:
    <span class="pl-s">"""A vending machine that vends some product for some price.</span>
<span class="pl-s"></span>
<span class="pl-s">    &gt;&gt;&gt; v = VendingMachine('candy', 10)</span>
<span class="pl-s">    &gt;&gt;&gt; v.vend()</span>
<span class="pl-s">    'Nothing left to vend. Please restock.'</span>
<span class="pl-s">    &gt;&gt;&gt; v.add_funds(15)</span>
<span class="pl-s">    'Nothing left to vend. Please restock. Here is your $15.'</span>
<span class="pl-s">    &gt;&gt;&gt; v.restock(2)</span>
<span class="pl-s">    'Current candy stock: 2'</span>
<span class="pl-s">    &gt;&gt;&gt; v.vend()</span>
<span class="pl-s">    'Please add $10 more funds.'</span>
<span class="pl-s">    &gt;&gt;&gt; v.add_funds(7)</span>
<span class="pl-s">    'Current balance: $7'</span>
<span class="pl-s">    &gt;&gt;&gt; v.vend()</span>
<span class="pl-s">    'Please add $3 more funds.'</span>
<span class="pl-s">    &gt;&gt;&gt; v.add_funds(5)</span>
<span class="pl-s">    'Current balance: $12'</span>
<span class="pl-s">    &gt;&gt;&gt; v.vend()</span>
<span class="pl-s">    'Here is your candy and $2 change.'</span>
<span class="pl-s">    &gt;&gt;&gt; v.add_funds(10)</span>
<span class="pl-s">    'Current balance: $10'</span>
<span class="pl-s">    &gt;&gt;&gt; v.vend()</span>
<span class="pl-s">    'Here is your candy.'</span>
<span class="pl-s">    &gt;&gt;&gt; v.add_funds(15)</span>
<span class="pl-s">    'Nothing left to vend. Please restock. Here is your $15.'</span>
<span class="pl-s"></span>
<span class="pl-s">    &gt;&gt;&gt; w = VendingMachine('soda', 2)</span>
<span class="pl-s">    &gt;&gt;&gt; w.restock(3)</span>
<span class="pl-s">    'Current soda stock: 3'</span>
<span class="pl-s">    &gt;&gt;&gt; w.restock(3)</span>
<span class="pl-s">    'Current soda stock: 6'</span>
<span class="pl-s">    &gt;&gt;&gt; w.add_funds(2)</span>
<span class="pl-s">    'Current balance: $2'</span>
<span class="pl-s">    &gt;&gt;&gt; w.vend()</span>
<span class="pl-s">    'Here is your soda.'</span>
<span class="pl-s">    """</span>
    <span class="pl-k">def</span> <span class="pl-en">__init__</span>(<span class="pl-s1">self</span>, <span class="pl-s1">name</span>, <span class="pl-s1">price</span>):
        <span class="pl-s1">self</span>.<span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s1">name</span>
        <span class="pl-s1">self</span>.<span class="pl-s1">price</span> <span class="pl-c1">=</span> <span class="pl-s1">price</span>
        <span class="pl-s1">self</span>.<span class="pl-s1">balance</span> <span class="pl-c1">=</span> <span class="pl-c1">0</span>
        <span class="pl-s1">self</span>.<span class="pl-s1">inventory</span> <span class="pl-c1">=</span> <span class="pl-c1">0</span>
    <span class="pl-k">def</span> <span class="pl-en">vend</span>(<span class="pl-s1">self</span>):
        <span class="pl-k">if</span> <span class="pl-s1">self</span>.<span class="pl-s1">inventory</span> <span class="pl-c1">==</span> <span class="pl-c1">0</span>:
            <span class="pl-k">return</span> <span class="pl-s">'Nothing left to vend. Please restock.'</span>
        <span class="pl-k">elif</span> <span class="pl-s1">self</span>.<span class="pl-s1">balance</span> <span class="pl-c1">&lt;</span> <span class="pl-s1">self</span>.<span class="pl-s1">price</span>:
            <span class="pl-k">return</span>  <span class="pl-s">f'Please add $<span class="pl-s1"><span class="pl-kos">{</span><span class="pl-s1">self</span>.<span class="pl-s1">price</span> <span class="pl-c1">-</span> <span class="pl-s1">self</span>.<span class="pl-s1">balance</span><span class="pl-kos">}</span></span> more funds.'</span>
        <span class="pl-k">elif</span> <span class="pl-s1">self</span>.<span class="pl-s1">balance</span> <span class="pl-c1">&gt;</span> <span class="pl-s1">self</span>.<span class="pl-s1">price</span>:
            <span class="pl-s1">self</span>.<span class="pl-s1">inventory</span> <span class="pl-c1">-=</span> <span class="pl-c1">1</span>
            <span class="pl-s1">exchange</span> <span class="pl-c1">=</span> <span class="pl-s1">self</span>.<span class="pl-s1">balance</span> <span class="pl-c1">-</span> <span class="pl-s1">self</span>.<span class="pl-s1">price</span>
            <span class="pl-s1">self</span>.<span class="pl-s1">balance</span> <span class="pl-c1">=</span> <span class="pl-c1">0</span>
            <span class="pl-k">return</span> <span class="pl-s">f'Here is your <span class="pl-s1"><span class="pl-kos">{</span><span class="pl-s1">self</span>.<span class="pl-s1">name</span><span class="pl-kos">}</span></span> and $<span class="pl-s1"><span class="pl-kos">{</span><span class="pl-s1">exchange</span><span class="pl-kos">}</span></span> change.'</span>
        <span class="pl-k">else</span>:
            <span class="pl-s1">self</span>.<span class="pl-s1">balance</span> <span class="pl-c1">=</span> <span class="pl-c1">0</span>
            <span class="pl-s1">self</span>.<span class="pl-s1">inventory</span> <span class="pl-c1">-=</span> <span class="pl-c1">1</span>
            <span class="pl-k">return</span> <span class="pl-s">f'Here is your <span class="pl-s1"><span class="pl-kos">{</span><span class="pl-s1">self</span>.<span class="pl-s1">name</span><span class="pl-kos">}</span></span>.'</span>
    <span class="pl-k">def</span> <span class="pl-en">add_funds</span>(<span class="pl-s1">self</span>, <span class="pl-s1">funds</span>):
        <span class="pl-k">if</span> <span class="pl-s1">self</span>.<span class="pl-s1">inventory</span> <span class="pl-c1">==</span> <span class="pl-c1">0</span>:
            <span class="pl-k">return</span> <span class="pl-s">f'Nothing left to vend. Please restock. Here is your $<span class="pl-s1"><span class="pl-kos">{</span><span class="pl-s1">funds</span><span class="pl-kos">}</span></span>.'</span>
        <span class="pl-k">else</span>:
            <span class="pl-s1">self</span>.<span class="pl-s1">balance</span> <span class="pl-c1">+=</span> <span class="pl-s1">funds</span>
            <span class="pl-k">return</span> <span class="pl-s">f'Current balance: $<span class="pl-s1"><span class="pl-kos">{</span><span class="pl-s1">self</span>.<span class="pl-s1">balance</span><span class="pl-kos">}</span></span>'</span>
    <span class="pl-k">def</span> <span class="pl-en">restock</span>(<span class="pl-s1">self</span>, <span class="pl-s1">inventory</span>):
        <span class="pl-s1">self</span>.<span class="pl-s1">inventory</span> <span class="pl-c1">+=</span> <span class="pl-s1">inventory</span>
        <span class="pl-k">return</span> <span class="pl-s">f'Current <span class="pl-s1"><span class="pl-kos">{</span><span class="pl-s1">self</span>.<span class="pl-s1">name</span><span class="pl-kos">}</span></span> stock: <span class="pl-s1"><span class="pl-kos">{</span><span class="pl-s1">self</span>.<span class="pl-s1">inventory</span><span class="pl-kos">}</span></span>'</span>

<span class="pl-c"># Tree Data Abstraction</span>

<span class="pl-k">def</span> <span class="pl-en">tree</span>(<span class="pl-s1">label</span>, <span class="pl-s1">branches</span><span class="pl-c1">=</span>[]):
    <span class="pl-s">"""Construct a tree with the given label value and a list of branches."""</span>
    <span class="pl-k">for</span> <span class="pl-s1">branch</span> <span class="pl-c1">in</span> <span class="pl-s1">branches</span>:
        <span class="pl-k">assert</span> <span class="pl-en">is_tree</span>(<span class="pl-s1">branch</span>), <span class="pl-s">'branches must be trees'</span>
    <span class="pl-k">return</span> [<span class="pl-s1">label</span>] <span class="pl-c1">+</span> <span class="pl-en">list</span>(<span class="pl-s1">branches</span>)

<span class="pl-k">def</span> <span class="pl-en">label</span>(<span class="pl-s1">tree</span>):
    <span class="pl-s">"""Return the label value of a tree."""</span>
    <span class="pl-k">return</span> <span class="pl-s1">tree</span>[<span class="pl-c1">0</span>]

<span class="pl-k">def</span> <span class="pl-en">branches</span>(<span class="pl-s1">tree</span>):
    <span class="pl-s">"""Return the list of branches of the given tree."""</span>
    <span class="pl-k">return</span> <span class="pl-s1">tree</span>[<span class="pl-c1">1</span>:]

<span class="pl-k">def</span> <span class="pl-en">is_tree</span>(<span class="pl-s1">tree</span>):
    <span class="pl-s">"""Returns True if the given tree is a tree, and False otherwise."""</span>
    <span class="pl-k">if</span> <span class="pl-en">type</span>(<span class="pl-s1">tree</span>) <span class="pl-c1">!=</span> <span class="pl-s1">list</span> <span class="pl-c1">or</span> <span class="pl-en">len</span>(<span class="pl-s1">tree</span>) <span class="pl-c1">&lt;</span> <span class="pl-c1">1</span>:
        <span class="pl-k">return</span> <span class="pl-c1">False</span>
    <span class="pl-k">for</span> <span class="pl-s1">branch</span> <span class="pl-c1">in</span> <span class="pl-en">branches</span>(<span class="pl-s1">tree</span>):
        <span class="pl-k">if</span> <span class="pl-c1">not</span> <span class="pl-en">is_tree</span>(<span class="pl-s1">branch</span>):
            <span class="pl-k">return</span> <span class="pl-c1">False</span>
    <span class="pl-k">return</span> <span class="pl-c1">True</span>

<span class="pl-k">def</span> <span class="pl-en">is_leaf</span>(<span class="pl-s1">tree</span>):
    <span class="pl-s">"""Returns True if the given tree's list of branches is empty, and False</span>
<span class="pl-s">    otherwise.</span>
<span class="pl-s">    """</span>
    <span class="pl-k">return</span> <span class="pl-c1">not</span> <span class="pl-en">branches</span>(<span class="pl-s1">tree</span>)

<span class="pl-k">def</span> <span class="pl-en">print_tree</span>(<span class="pl-s1">t</span>, <span class="pl-s1">indent</span><span class="pl-c1">=</span><span class="pl-c1">0</span>):
    <span class="pl-s">"""Print a representation of this tree in which each node is</span>
<span class="pl-s">    indented by two spaces times its depth from the root.</span>
<span class="pl-s"></span>
<span class="pl-s">    &gt;&gt;&gt; print_tree(tree(1))</span>
<span class="pl-s">    1</span>
<span class="pl-s">    &gt;&gt;&gt; print_tree(tree(1, [tree(2)]))</span>
<span class="pl-s">    1</span>
<span class="pl-s">      2</span>
<span class="pl-s">    &gt;&gt;&gt; numbers = tree(1, [tree(2), tree(3, [tree(4), tree(5)]), tree(6, [tree(7)])])</span>
<span class="pl-s">    &gt;&gt;&gt; print_tree(numbers)</span>
<span class="pl-s">    1</span>
<span class="pl-s">      2</span>
<span class="pl-s">      3</span>
<span class="pl-s">        4</span>
<span class="pl-s">        5</span>
<span class="pl-s">      6</span>
<span class="pl-s">        7</span>
<span class="pl-s">    """</span>
    <span class="pl-en">print</span>(<span class="pl-s">'  '</span> <span class="pl-c1">*</span> <span class="pl-s1">indent</span> <span class="pl-c1">+</span> <span class="pl-en">str</span>(<span class="pl-en">label</span>(<span class="pl-s1">t</span>)))
    <span class="pl-k">for</span> <span class="pl-s1">b</span> <span class="pl-c1">in</span> <span class="pl-en">branches</span>(<span class="pl-s1">t</span>):
        <span class="pl-en">print_tree</span>(<span class="pl-s1">b</span>, <span class="pl-s1">indent</span> <span class="pl-c1">+</span> <span class="pl-c1">1</span>)

<span class="pl-k">def</span> <span class="pl-en">copy_tree</span>(<span class="pl-s1">t</span>):
    <span class="pl-s">"""Returns a copy of t. Only for testing purposes.</span>
<span class="pl-s"></span>
<span class="pl-s">    &gt;&gt;&gt; t = tree(5)</span>
<span class="pl-s">    &gt;&gt;&gt; copy = copy_tree(t)</span>
<span class="pl-s">    &gt;&gt;&gt; t = tree(6)</span>
<span class="pl-s">    &gt;&gt;&gt; print_tree(copy)</span>
<span class="pl-s">    5</span>
<span class="pl-s">    """</span>
    <span class="pl-k">return</span> <span class="pl-en">tree</span>(<span class="pl-en">label</span>(<span class="pl-s1">t</span>), [<span class="pl-en">copy_tree</span>(<span class="pl-s1">b</span>) <span class="pl-k">for</span> <span class="pl-s1">b</span> <span class="pl-c1">in</span> <span class="pl-en">branches</span>(<span class="pl-s1">t</span>)])
</pre></div>
<h2>hw05</h2>
<div class="highlight highlight-source-python"><pre class="notranslate"><span class="pl-c"># You do not need to understand what this function does. It is used for testing.</span>
<span class="pl-k">def</span> <span class="pl-en">make_test_random</span>():
    <span class="pl-s">"""A deterministic random function that cycles between</span>
<span class="pl-s">    [0.0, 0.1, 0.2, ..., 0.9] for testing purposes.</span>
<span class="pl-s"></span>
<span class="pl-s">    &gt;&gt;&gt; random = make_test_random()</span>
<span class="pl-s">    &gt;&gt;&gt; random()</span>
<span class="pl-s">    0.0</span>
<span class="pl-s">    &gt;&gt;&gt; random()</span>
<span class="pl-s">    0.1</span>
<span class="pl-s">    &gt;&gt;&gt; random2 = make_test_random()</span>
<span class="pl-s">    &gt;&gt;&gt; random2()</span>
<span class="pl-s">    0.0</span>
<span class="pl-s">    """</span>
    <span class="pl-s1">rands</span> <span class="pl-c1">=</span> [<span class="pl-s1">x</span> <span class="pl-c1">/</span> <span class="pl-c1">10</span> <span class="pl-k">for</span> <span class="pl-s1">x</span> <span class="pl-c1">in</span> <span class="pl-en">range</span>(<span class="pl-c1">10</span>)]
    <span class="pl-k">def</span> <span class="pl-en">random</span>():
        <span class="pl-s1">rand</span> <span class="pl-c1">=</span> <span class="pl-s1">rands</span>[<span class="pl-c1">0</span>]
        <span class="pl-s1">rands</span>.<span class="pl-en">append</span>(<span class="pl-s1">rands</span>.<span class="pl-en">pop</span>(<span class="pl-c1">0</span>))
        <span class="pl-k">return</span> <span class="pl-s1">rand</span>
    <span class="pl-k">return</span> <span class="pl-s1">random</span>

<span class="pl-c">### Phase 1: The Player Class</span>
<span class="pl-k">class</span> <span class="pl-v">Player</span>:
    <span class="pl-s">"""</span>
<span class="pl-s">    &gt;&gt;&gt; random = make_test_random()</span>
<span class="pl-s">    &gt;&gt;&gt; p1 = Player('Hill', random)</span>
<span class="pl-s">    &gt;&gt;&gt; p2 = Player('Don', random)</span>
<span class="pl-s">    &gt;&gt;&gt; p1.popularity</span>
<span class="pl-s">    100</span>
<span class="pl-s">    &gt;&gt;&gt; p1.debate(p2)  # random() should return 0.0</span>
<span class="pl-s">    &gt;&gt;&gt; p1.popularity</span>
<span class="pl-s">    150</span>
<span class="pl-s">    &gt;&gt;&gt; p2.popularity</span>
<span class="pl-s">    100</span>
<span class="pl-s">    &gt;&gt;&gt; p2.votes</span>
<span class="pl-s">    0</span>
<span class="pl-s">    &gt;&gt;&gt; p2.speech(p1)</span>
<span class="pl-s">    &gt;&gt;&gt; p2.votes</span>
<span class="pl-s">    10</span>
<span class="pl-s">    &gt;&gt;&gt; p2.popularity</span>
<span class="pl-s">    110</span>
<span class="pl-s">    &gt;&gt;&gt; p1.popularity</span>
<span class="pl-s">    135</span>
<span class="pl-s">    &gt;&gt;&gt; p1.speech(p2)</span>
<span class="pl-s">    &gt;&gt;&gt; p1.votes</span>
<span class="pl-s">    13</span>
<span class="pl-s">    &gt;&gt;&gt; p1.popularity</span>
<span class="pl-s">    148</span>
<span class="pl-s">    &gt;&gt;&gt; p2.votes</span>
<span class="pl-s">    10</span>
<span class="pl-s">    &gt;&gt;&gt; p2.popularity</span>
<span class="pl-s">    99</span>
<span class="pl-s">    &gt;&gt;&gt; for _ in range(4):  # 0.1, 0.2, 0.3, 0.4</span>
<span class="pl-s">    ...     p1.debate(p2)</span>
<span class="pl-s">    &gt;&gt;&gt; p2.debate(p1)</span>
<span class="pl-s">    &gt;&gt;&gt; p2.popularity</span>
<span class="pl-s">    49</span>
<span class="pl-s">    &gt;&gt;&gt; p2.debate(p1)</span>
<span class="pl-s">    &gt;&gt;&gt; p2.popularity</span>
<span class="pl-s">    0</span>
<span class="pl-s">    """</span>
    <span class="pl-k">def</span> <span class="pl-en">__init__</span>(<span class="pl-s1">self</span>, <span class="pl-s1">name</span>, <span class="pl-s1">random_func</span>):
        <span class="pl-s1">self</span>.<span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s1">name</span>
        <span class="pl-s1">self</span>.<span class="pl-s1">votes</span> <span class="pl-c1">=</span> <span class="pl-c1">0</span>
        <span class="pl-s1">self</span>.<span class="pl-s1">popularity</span> <span class="pl-c1">=</span> <span class="pl-c1">100</span>
        <span class="pl-s1">self</span>.<span class="pl-s1">random_func</span> <span class="pl-c1">=</span> <span class="pl-s1">random_func</span>

    <span class="pl-k">def</span> <span class="pl-en">debate</span>(<span class="pl-s1">self</span>, <span class="pl-s1">other</span>):
        <span class="pl-k">if</span> <span class="pl-s1">self</span>.<span class="pl-en">random_func</span>() <span class="pl-c1">&lt;</span> <span class="pl-en">max</span>(<span class="pl-c1">0.1</span>, <span class="pl-s1">self</span>.<span class="pl-s1">popularity</span> <span class="pl-c1">/</span> (<span class="pl-s1">self</span>.<span class="pl-s1">popularity</span> <span class="pl-c1">+</span> <span class="pl-s1">other</span>.<span class="pl-s1">popularity</span>)):
            <span class="pl-s1">self</span>.<span class="pl-s1">popularity</span> <span class="pl-c1">+=</span> <span class="pl-c1">50</span>
        <span class="pl-k">else</span>:
            <span class="pl-s1">self</span>.<span class="pl-s1">popularity</span> <span class="pl-c1">=</span> <span class="pl-en">max</span>(<span class="pl-c1">0</span>, <span class="pl-s1">self</span>.<span class="pl-s1">popularity</span> <span class="pl-c1">-</span> <span class="pl-c1">50</span>)


    <span class="pl-k">def</span> <span class="pl-en">speech</span>(<span class="pl-s1">self</span>, <span class="pl-s1">other</span>):
        <span class="pl-s1">self</span>.<span class="pl-s1">votes</span> <span class="pl-c1">+=</span> <span class="pl-s1">self</span>.<span class="pl-s1">popularity</span> <span class="pl-c1">//</span> <span class="pl-c1">10</span>
        <span class="pl-s1">self</span>.<span class="pl-s1">popularity</span> <span class="pl-c1">+=</span> <span class="pl-s1">self</span>.<span class="pl-s1">popularity</span> <span class="pl-c1">//</span> <span class="pl-c1">10</span>
       
        <span class="pl-s1">other</span>.<span class="pl-s1">popularity</span> <span class="pl-c1">-=</span> <span class="pl-s1">other</span>.<span class="pl-s1">popularity</span> <span class="pl-c1">//</span> <span class="pl-c1">10</span>
    <span class="pl-k">def</span> <span class="pl-en">choose</span>(<span class="pl-s1">self</span>, <span class="pl-s1">other</span>):
        <span class="pl-k">return</span> <span class="pl-s1">self</span>.<span class="pl-s1">speech</span>


<span class="pl-c">### Phase 2: The Game Class</span>
<span class="pl-k">class</span> <span class="pl-v">Game</span>:
    <span class="pl-s">"""</span>
<span class="pl-s">    &gt;&gt;&gt; random = make_test_random()</span>
<span class="pl-s">    &gt;&gt;&gt; p1, p2 = Player('Hill',random), Player('Don', random)</span>
<span class="pl-s">    &gt;&gt;&gt; g = Game(p1, p2)</span>
<span class="pl-s">    &gt;&gt;&gt; winner = g.play()</span>
<span class="pl-s">    &gt;&gt;&gt; p1 is winner</span>
<span class="pl-s">    True</span>
<span class="pl-s">    &gt;&gt;&gt; # Additional correctness tests</span>
<span class="pl-s">    &gt;&gt;&gt; winner is g.winner()</span>
<span class="pl-s">    True</span>
<span class="pl-s">    &gt;&gt;&gt; g.turn</span>
<span class="pl-s">    10</span>
<span class="pl-s">    &gt;&gt;&gt; p1.votes = p2.votes</span>
<span class="pl-s">    &gt;&gt;&gt; print(g.winner())</span>
<span class="pl-s">    None</span>
<span class="pl-s">    """</span>
    <span class="pl-k">def</span> <span class="pl-en">__init__</span>(<span class="pl-s1">self</span>, <span class="pl-s1">player1</span>, <span class="pl-s1">player2</span>):
        <span class="pl-s1">self</span>.<span class="pl-s1">p1</span> <span class="pl-c1">=</span> <span class="pl-s1">player1</span>
        <span class="pl-s1">self</span>.<span class="pl-s1">p2</span> <span class="pl-c1">=</span> <span class="pl-s1">player2</span>
        <span class="pl-s1">self</span>.<span class="pl-s1">turn</span> <span class="pl-c1">=</span> <span class="pl-c1">0</span>

    <span class="pl-k">def</span> <span class="pl-en">play</span>(<span class="pl-s1">self</span>):
        <span class="pl-k">while</span> <span class="pl-c1">not</span> <span class="pl-s1">self</span>.<span class="pl-en">game_over</span>():
            <span class="pl-s">"*** YOUR CODE HERE ***"</span>
        <span class="pl-k">return</span> <span class="pl-s1">self</span>.<span class="pl-en">winner</span>()

    <span class="pl-k">def</span> <span class="pl-en">game_over</span>(<span class="pl-s1">self</span>):
        <span class="pl-k">return</span> <span class="pl-en">max</span>(<span class="pl-s1">self</span>.<span class="pl-s1">p1</span>.<span class="pl-s1">votes</span>, <span class="pl-s1">self</span>.<span class="pl-s1">p2</span>.<span class="pl-s1">votes</span>) <span class="pl-c1">&gt;=</span> <span class="pl-c1">50</span> <span class="pl-c1">or</span> <span class="pl-s1">self</span>.<span class="pl-s1">turn</span> <span class="pl-c1">&gt;=</span> <span class="pl-c1">10</span>

    <span class="pl-k">def</span> <span class="pl-en">winner</span>(<span class="pl-s1">self</span>):
        <span class="pl-s">"*** YOUR CODE HERE ***"</span>


<span class="pl-c">### Phase 3: New Players</span>
<span class="pl-k">class</span> <span class="pl-v">AggressivePlayer</span>(<span class="pl-v">Player</span>):
    <span class="pl-s">"""</span>
<span class="pl-s">    &gt;&gt;&gt; random = make_test_random()</span>
<span class="pl-s">    &gt;&gt;&gt; p1, p2 = AggressivePlayer('Don', random), Player('Hill', random)</span>
<span class="pl-s">    &gt;&gt;&gt; g = Game(p1, p2)</span>
<span class="pl-s">    &gt;&gt;&gt; winner = g.play()</span>
<span class="pl-s">    &gt;&gt;&gt; p1 is winner</span>
<span class="pl-s">    True</span>
<span class="pl-s">    &gt;&gt;&gt; # Additional correctness tests</span>
<span class="pl-s">    &gt;&gt;&gt; p1.popularity = p2.popularity</span>
<span class="pl-s">    &gt;&gt;&gt; p1.choose(p2) == p1.debate</span>
<span class="pl-s">    True</span>
<span class="pl-s">    &gt;&gt;&gt; p1.popularity += 1</span>
<span class="pl-s">    &gt;&gt;&gt; p1.choose(p2) == p1.debate</span>
<span class="pl-s">    False</span>
<span class="pl-s">    &gt;&gt;&gt; p2.choose(p1) == p2.speech</span>
<span class="pl-s">    True</span>
<span class="pl-s">    """</span>
    <span class="pl-k">def</span> <span class="pl-en">choose</span>(<span class="pl-s1">self</span>, <span class="pl-s1">other</span>):
        <span class="pl-s">"*** YOUR CODE HERE ***"</span>

<span class="pl-k">class</span> <span class="pl-v">CautiousPlayer</span>(<span class="pl-v">Player</span>):
    <span class="pl-s">"""</span>
<span class="pl-s">    &gt;&gt;&gt; random = make_test_random()</span>
<span class="pl-s">    &gt;&gt;&gt; p1, p2 = CautiousPlayer('Hill', random), AggressivePlayer('Don', random)</span>
<span class="pl-s">    &gt;&gt;&gt; p1.popularity = 0</span>
<span class="pl-s">    &gt;&gt;&gt; p1.choose(p2) == p1.debate</span>
<span class="pl-s">    True</span>
<span class="pl-s">    &gt;&gt;&gt; p1.popularity = 1</span>
<span class="pl-s">    &gt;&gt;&gt; p1.choose(p2) == p1.debate</span>
<span class="pl-s">    False</span>
<span class="pl-s">    &gt;&gt;&gt; # Additional correctness tests</span>
<span class="pl-s">    &gt;&gt;&gt; p2.choose(p1) == p2.speech</span>
<span class="pl-s">    True</span>
<span class="pl-s">    """</span>
    <span class="pl-k">def</span> <span class="pl-en">choose</span>(<span class="pl-s1">self</span>, <span class="pl-s1">other</span>):
        <span class="pl-s">"*** YOUR CODE HERE ***"</span>


<span class="pl-k">def</span> <span class="pl-en">add_d_leaves</span>(<span class="pl-s1">t</span>, <span class="pl-s1">v</span>):
    <span class="pl-s">"""Add d leaves containing v to each node at every depth d.</span>
<span class="pl-s"></span>
<span class="pl-s">    &gt;&gt;&gt; t_one_to_four = Tree(1, [Tree(2), Tree(3, [Tree(4)])])</span>
<span class="pl-s">    &gt;&gt;&gt; print(t_one_to_four)</span>
<span class="pl-s">    1</span>
<span class="pl-s">      2</span>
<span class="pl-s">      3</span>
<span class="pl-s">        4</span>
<span class="pl-s">    &gt;&gt;&gt; add_d_leaves(t_one_to_four, 5)</span>
<span class="pl-s">    &gt;&gt;&gt; print(t_one_to_four)</span>
<span class="pl-s">    1</span>
<span class="pl-s">      2</span>
<span class="pl-s">        5</span>
<span class="pl-s">      3</span>
<span class="pl-s">        4</span>
<span class="pl-s">          5</span>
<span class="pl-s">          5</span>
<span class="pl-s">        5</span>
<span class="pl-s"></span>
<span class="pl-s">    &gt;&gt;&gt; t0 = Tree(9)</span>
<span class="pl-s">    &gt;&gt;&gt; add_d_leaves(t0, 4)</span>
<span class="pl-s">    &gt;&gt;&gt; t0</span>
<span class="pl-s">    Tree(9)</span>
<span class="pl-s">    &gt;&gt;&gt; t1 = Tree(1, [Tree(3)])</span>
<span class="pl-s">    &gt;&gt;&gt; add_d_leaves(t1, 4)</span>
<span class="pl-s">    &gt;&gt;&gt; t1</span>
<span class="pl-s">    Tree(1, [Tree(3, [Tree(4)])])</span>
<span class="pl-s">    &gt;&gt;&gt; t2 = Tree(2, [Tree(5), Tree(6)])</span>
<span class="pl-s">    &gt;&gt;&gt; t3 = Tree(3, [t1, Tree(0), t2])</span>
<span class="pl-s">    &gt;&gt;&gt; print(t3)</span>
<span class="pl-s">    3</span>
<span class="pl-s">      1</span>
<span class="pl-s">        3</span>
<span class="pl-s">          4</span>
<span class="pl-s">      0</span>
<span class="pl-s">      2</span>
<span class="pl-s">        5</span>
<span class="pl-s">        6</span>
<span class="pl-s">    &gt;&gt;&gt; add_d_leaves(t3, 10)</span>
<span class="pl-s">    &gt;&gt;&gt; print(t3)</span>
<span class="pl-s">    3</span>
<span class="pl-s">      1</span>
<span class="pl-s">        3</span>
<span class="pl-s">          4</span>
<span class="pl-s">            10</span>
<span class="pl-s">            10</span>
<span class="pl-s">            10</span>
<span class="pl-s">          10</span>
<span class="pl-s">          10</span>
<span class="pl-s">        10</span>
<span class="pl-s">      0</span>
<span class="pl-s">        10</span>
<span class="pl-s">      2</span>
<span class="pl-s">        5</span>
<span class="pl-s">          10</span>
<span class="pl-s">          10</span>
<span class="pl-s">        6</span>
<span class="pl-s">          10</span>
<span class="pl-s">          10</span>
<span class="pl-s">        10</span>
<span class="pl-s">    """</span>
    <span class="pl-s">"*** YOUR CODE HERE ***"</span>


<span class="pl-k">def</span> <span class="pl-en">level_mutation_link</span>(<span class="pl-s1">t</span>, <span class="pl-s1">funcs</span>):
	<span class="pl-s">"""Mutates t using the functions in the linked list funcs.</span>
<span class="pl-s"></span>
<span class="pl-s">	&gt;&gt;&gt; t = Tree(1, [Tree(2, [Tree(3)])])</span>
<span class="pl-s">	&gt;&gt;&gt; funcs = Link(lambda x: x + 1, Link(lambda y: y * 5, Link(lambda z: z ** 2)))</span>
<span class="pl-s">	&gt;&gt;&gt; level_mutation_link(t, funcs)</span>
<span class="pl-s">	&gt;&gt;&gt; t    # At level 0, apply x + 1; at level 1, apply y * 5; at level 2 (leaf), apply z ** 2</span>
<span class="pl-s">	Tree(2, [Tree(10, [Tree(9)])])</span>
<span class="pl-s">	&gt;&gt;&gt; t2 = Tree(1, [Tree(2), Tree(3, [Tree(4)])])</span>
<span class="pl-s">	&gt;&gt;&gt; level_mutation_link(t2, funcs)</span>
<span class="pl-s">	&gt;&gt;&gt; t2    # Level 0: 1+1=2; Level 1: 2*5=10 =&gt; 10**2 = 100, 3*5=15; Level 2 (leaf): 4**2=16</span>
<span class="pl-s">	Tree(2, [Tree(100), Tree(15, [Tree(16)])])</span>
<span class="pl-s">	&gt;&gt;&gt; t3 = Tree(1, [Tree(2)])</span>
<span class="pl-s">	&gt;&gt;&gt; level_mutation_link(t3, funcs)</span>
<span class="pl-s">	&gt;&gt;&gt; t3    # Level 0: 1+1=2; Level 1: 2*5=10; no further levels, so apply remaining z ** 2: 10**2=100</span>
<span class="pl-s">	Tree(2, [Tree(100)])</span>
<span class="pl-s">	"""</span>
	<span class="pl-k">if</span> <span class="pl-s1">_____________________</span>:
		<span class="pl-k">return</span>
	<span class="pl-s1">t</span>.<span class="pl-s1">label</span> <span class="pl-c1">=</span> <span class="pl-s1">_____________________</span>
	<span class="pl-s1">remaining</span> <span class="pl-c1">=</span> <span class="pl-s1">_____________________</span>
	<span class="pl-k">if</span> <span class="pl-s1">__________________</span> <span class="pl-c1">and</span> <span class="pl-s1">__________________</span>:
		<span class="pl-k">while</span> <span class="pl-s1">_____________________</span>:
			<span class="pl-s1">_____________________</span>
			<span class="pl-s1">remaining</span> <span class="pl-c1">=</span> <span class="pl-s1">remaining</span>.<span class="pl-s1">rest</span>
	<span class="pl-k">for</span> <span class="pl-s1">b</span> <span class="pl-c1">in</span> <span class="pl-s1">t</span>.<span class="pl-s1">branches</span>:
		<span class="pl-s1">_____________________</span>


<span class="pl-k">def</span> <span class="pl-en">store_digits</span>(<span class="pl-s1">n</span>):
    <span class="pl-s">"""Stores the digits of a positive number n in a linked list.</span>
<span class="pl-s"></span>
<span class="pl-s">    &gt;&gt;&gt; s = store_digits(1)</span>
<span class="pl-s">    &gt;&gt;&gt; s</span>
<span class="pl-s">    Link(1)</span>
<span class="pl-s">    &gt;&gt;&gt; store_digits(2345)</span>
<span class="pl-s">    Link(2, Link(3, Link(4, Link(5))))</span>
<span class="pl-s">    &gt;&gt;&gt; store_digits(876)</span>
<span class="pl-s">    Link(8, Link(7, Link(6)))</span>
<span class="pl-s">    &gt;&gt;&gt; store_digits(2450)</span>
<span class="pl-s">    Link(2, Link(4, Link(5, Link(0))))</span>
<span class="pl-s">    &gt;&gt;&gt; # a check for restricted functions</span>
<span class="pl-s">    &gt;&gt;&gt; import inspect, re</span>
<span class="pl-s">    &gt;&gt;&gt; cleaned = re.sub(r"#.*<span class="pl-cce">\\</span>n", '', re.sub(r'"{3}[\s\S]*?"{3}', '', inspect.getsource(store_digits)))</span>
<span class="pl-s">    &gt;&gt;&gt; print("Do not use str or reversed!") if any([r in cleaned for r in ["str", "reversed"]]) else None</span>
<span class="pl-s">    """</span>
    <span class="pl-s">"*** YOUR CODE HERE ***"</span>


<span class="pl-k">def</span> <span class="pl-en">deep_map_mut</span>(<span class="pl-s1">func</span>, <span class="pl-s1">lnk</span>):
    <span class="pl-s">"""Mutates a deep link lnk by replacing each item found with the</span>
<span class="pl-s">    result of calling func on the item. Does NOT create new Links (so</span>
<span class="pl-s">    no use of Link's constructor).</span>
<span class="pl-s"></span>
<span class="pl-s">    Does not return the modified Link object.</span>
<span class="pl-s"></span>
<span class="pl-s">    &gt;&gt;&gt; link1 = Link(3, Link(Link(4), Link(5, Link(6))))</span>
<span class="pl-s">    &gt;&gt;&gt; print(link1)</span>
<span class="pl-s">    &lt;3 &lt;4&gt; 5 6&gt;</span>
<span class="pl-s">    &gt;&gt;&gt; # Disallow the use of making new Links before calling deep_map_mut</span>
<span class="pl-s">    &gt;&gt;&gt; Link.__init__, hold = lambda *args: print("Do not create any new Links."), Link.__init__</span>
<span class="pl-s">    &gt;&gt;&gt; try:</span>
<span class="pl-s">    ...     deep_map_mut(lambda x: x * x, link1)</span>
<span class="pl-s">    ... finally:</span>
<span class="pl-s">    ...     Link.__init__ = hold</span>
<span class="pl-s">    &gt;&gt;&gt; print(link1)</span>
<span class="pl-s">    &lt;9 &lt;16&gt; 25 36&gt;</span>
<span class="pl-s">    """</span>
    <span class="pl-s">"*** YOUR CODE HERE ***"</span>


<span class="pl-k">def</span> <span class="pl-en">crispr_gene_insertion</span>(<span class="pl-s1">lnk_of_genes</span>, <span class="pl-s1">insert</span>):
    <span class="pl-s">"""Takes a linked list of genes and mutates the genes with the INSERT codon added the correct number of times.</span>
<span class="pl-s"></span>
<span class="pl-s">    &gt;&gt;&gt; link = Link(Link("AUG", Link("GCC", Link("ACG"))), Link(Link("ATG", Link("AUG", Link("ACG", Link("GCC"))))))</span>
<span class="pl-s">    &gt;&gt;&gt; print(link)</span>
<span class="pl-s">    &lt;&lt;AUG GCC ACG&gt; &lt;ATG AUG ACG GCC&gt;&gt;</span>
<span class="pl-s">    &gt;&gt;&gt; crispr_gene_insertion(link, "TTA")</span>
<span class="pl-s">    &gt;&gt;&gt; print(link)</span>
<span class="pl-s">    &lt;&lt;AUG TTA GCC ACG&gt; &lt;ATG AUG TTA TTA ACG GCC&gt;&gt;</span>
<span class="pl-s">    &gt;&gt;&gt; link = Link(Link("ATG"), Link(Link("AUG", Link("AUG")), Link(Link("AUG", Link("GCC")))))</span>
<span class="pl-s">    &gt;&gt;&gt; print(link)</span>
<span class="pl-s">    &lt;&lt;ATG&gt; &lt;AUG AUG&gt; &lt;AUG GCC&gt;&gt;</span>
<span class="pl-s">    &gt;&gt;&gt; crispr_gene_insertion(link, "TTA") # first gene has no AUG so unchanged, 2nd gene has 2 AUGs but only first considered for insertion</span>
<span class="pl-s">    &gt;&gt;&gt; print(link)</span>
<span class="pl-s">    &lt;&lt;ATG&gt; &lt;AUG TTA TTA AUG&gt; &lt;AUG TTA TTA TTA GCC&gt;&gt;</span>
<span class="pl-s">    &gt;&gt;&gt; link = Link.empty # empty linked list of genes stays empty</span>
<span class="pl-s">    &gt;&gt;&gt; crispr_gene_insertion(link, "TTA")</span>
<span class="pl-s">    &gt;&gt;&gt; print(link)</span>
<span class="pl-s">    ()</span>
<span class="pl-s">    """</span>
    <span class="pl-s">"*** YOUR CODE HERE ***"</span>

<span class="pl-k">def</span> <span class="pl-en">transcribe</span>(<span class="pl-s1">dna</span>):
    <span class="pl-s">"""Takes a string of DNA and returns a Python list with the RNA codons.</span>
<span class="pl-s"></span>
<span class="pl-s">    &gt;&gt;&gt; DNA = "TACCTAGCCCATAAA"</span>
<span class="pl-s">    &gt;&gt;&gt; transcribe(DNA)</span>
<span class="pl-s">    ['AUG', 'GAU', 'CGG', 'GUA', 'UUU']</span>
<span class="pl-s">    """</span>
    <span class="pl-s1">dict</span> <span class="pl-c1">=</span> {<span class="pl-s">'A'</span>: <span class="pl-s">'U'</span>, <span class="pl-s">'T'</span>: <span class="pl-s">'A'</span>, <span class="pl-s">'G'</span>: <span class="pl-s">'C'</span>, <span class="pl-s">'C'</span>: <span class="pl-s">'G'</span>}
    <span class="pl-k">return</span> <span class="pl-s1">__________________</span>


<span class="pl-k">class</span> <span class="pl-v">Tree</span>:
    <span class="pl-s">"""</span>
<span class="pl-s">    &gt;&gt;&gt; t = Tree(3, [Tree(2, [Tree(5)]), Tree(4)])</span>
<span class="pl-s">    &gt;&gt;&gt; t.label</span>
<span class="pl-s">    3</span>
<span class="pl-s">    &gt;&gt;&gt; t.branches[0].label</span>
<span class="pl-s">    2</span>
<span class="pl-s">    &gt;&gt;&gt; t.branches[1].is_leaf()</span>
<span class="pl-s">    True</span>
<span class="pl-s">    """</span>
    <span class="pl-k">def</span> <span class="pl-en">__init__</span>(<span class="pl-s1">self</span>, <span class="pl-s1">label</span>, <span class="pl-s1">branches</span><span class="pl-c1">=</span>[]):
        <span class="pl-k">for</span> <span class="pl-s1">b</span> <span class="pl-c1">in</span> <span class="pl-s1">branches</span>:
            <span class="pl-k">assert</span> <span class="pl-en">isinstance</span>(<span class="pl-s1">b</span>, <span class="pl-v">Tree</span>)
        <span class="pl-s1">self</span>.<span class="pl-s1">label</span> <span class="pl-c1">=</span> <span class="pl-s1">label</span>
        <span class="pl-s1">self</span>.<span class="pl-s1">branches</span> <span class="pl-c1">=</span> <span class="pl-en">list</span>(<span class="pl-s1">branches</span>)

    <span class="pl-k">def</span> <span class="pl-en">is_leaf</span>(<span class="pl-s1">self</span>):
        <span class="pl-k">return</span> <span class="pl-c1">not</span> <span class="pl-s1">self</span>.<span class="pl-s1">branches</span>

    <span class="pl-k">def</span> <span class="pl-en">__repr__</span>(<span class="pl-s1">self</span>):
        <span class="pl-k">if</span> <span class="pl-s1">self</span>.<span class="pl-s1">branches</span>:
            <span class="pl-s1">branch_str</span> <span class="pl-c1">=</span> <span class="pl-s">', '</span> <span class="pl-c1">+</span> <span class="pl-en">repr</span>(<span class="pl-s1">self</span>.<span class="pl-s1">branches</span>)
        <span class="pl-k">else</span>:
            <span class="pl-s1">branch_str</span> <span class="pl-c1">=</span> <span class="pl-s">''</span>
        <span class="pl-k">return</span> <span class="pl-s">'Tree({0}{1})'</span>.<span class="pl-en">format</span>(<span class="pl-s1">self</span>.<span class="pl-s1">label</span>, <span class="pl-s1">branch_str</span>)

    <span class="pl-k">def</span> <span class="pl-en">__str__</span>(<span class="pl-s1">self</span>):
        <span class="pl-k">def</span> <span class="pl-en">print_tree</span>(<span class="pl-s1">t</span>, <span class="pl-s1">indent</span><span class="pl-c1">=</span><span class="pl-c1">0</span>):
            <span class="pl-s1">tree_str</span> <span class="pl-c1">=</span> <span class="pl-s">'  '</span> <span class="pl-c1">*</span> <span class="pl-s1">indent</span> <span class="pl-c1">+</span> <span class="pl-en">str</span>(<span class="pl-s1">t</span>.<span class="pl-s1">label</span>) <span class="pl-c1">+</span> <span class="pl-s">"<span class="pl-cce">\n</span>"</span>
            <span class="pl-k">for</span> <span class="pl-s1">b</span> <span class="pl-c1">in</span> <span class="pl-s1">t</span>.<span class="pl-s1">branches</span>:
                <span class="pl-s1">tree_str</span> <span class="pl-c1">+=</span> <span class="pl-en">print_tree</span>(<span class="pl-s1">b</span>, <span class="pl-s1">indent</span> <span class="pl-c1">+</span> <span class="pl-c1">1</span>)
            <span class="pl-k">return</span> <span class="pl-s1">tree_str</span>
        <span class="pl-k">return</span> <span class="pl-en">print_tree</span>(<span class="pl-s1">self</span>).<span class="pl-en">rstrip</span>()


<span class="pl-k">class</span> <span class="pl-v">Link</span>:
    <span class="pl-s">"""A linked list.</span>
<span class="pl-s"></span>
<span class="pl-s">    &gt;&gt;&gt; s = Link(1)</span>
<span class="pl-s">    &gt;&gt;&gt; s.first</span>
<span class="pl-s">    1</span>
<span class="pl-s">    &gt;&gt;&gt; s.rest is Link.empty</span>
<span class="pl-s">    True</span>
<span class="pl-s">    &gt;&gt;&gt; s = Link(2, Link(3, Link(4)))</span>
<span class="pl-s">    &gt;&gt;&gt; s.first = 5</span>
<span class="pl-s">    &gt;&gt;&gt; s.rest.first = 6</span>
<span class="pl-s">    &gt;&gt;&gt; s.rest.rest = Link.empty</span>
<span class="pl-s">    &gt;&gt;&gt; s                                    # Displays the contents of repr(s)</span>
<span class="pl-s">    Link(5, Link(6))</span>
<span class="pl-s">    &gt;&gt;&gt; s.rest = Link(7, Link(Link(8, Link(9))))</span>
<span class="pl-s">    &gt;&gt;&gt; s</span>
<span class="pl-s">    Link(5, Link(7, Link(Link(8, Link(9)))))</span>
<span class="pl-s">    &gt;&gt;&gt; print(s)                             # Prints str(s)</span>
<span class="pl-s">    &lt;5 7 &lt;8 9&gt;&gt;</span>
<span class="pl-s">    """</span>
    <span class="pl-s1">empty</span> <span class="pl-c1">=</span> ()

    <span class="pl-k">def</span> <span class="pl-en">__init__</span>(<span class="pl-s1">self</span>, <span class="pl-s1">first</span>, <span class="pl-s1">rest</span><span class="pl-c1">=</span><span class="pl-s1">empty</span>):
        <span class="pl-k">assert</span> <span class="pl-s1">rest</span> <span class="pl-c1">is</span> <span class="pl-v">Link</span>.<span class="pl-s1">empty</span> <span class="pl-c1">or</span> <span class="pl-en">isinstance</span>(<span class="pl-s1">rest</span>, <span class="pl-v">Link</span>)
        <span class="pl-s1">self</span>.<span class="pl-s1">first</span> <span class="pl-c1">=</span> <span class="pl-s1">first</span>
        <span class="pl-s1">self</span>.<span class="pl-s1">rest</span> <span class="pl-c1">=</span> <span class="pl-s1">rest</span>

    <span class="pl-k">def</span> <span class="pl-en">__repr__</span>(<span class="pl-s1">self</span>):
        <span class="pl-k">if</span> <span class="pl-s1">self</span>.<span class="pl-s1">rest</span> <span class="pl-c1">is</span> <span class="pl-c1">not</span> <span class="pl-v">Link</span>.<span class="pl-s1">empty</span>:
            <span class="pl-s1">rest_repr</span> <span class="pl-c1">=</span> <span class="pl-s">', '</span> <span class="pl-c1">+</span> <span class="pl-en">repr</span>(<span class="pl-s1">self</span>.<span class="pl-s1">rest</span>)
        <span class="pl-k">else</span>:
            <span class="pl-s1">rest_repr</span> <span class="pl-c1">=</span> <span class="pl-s">''</span>
        <span class="pl-k">return</span> <span class="pl-s">'Link('</span> <span class="pl-c1">+</span> <span class="pl-en">repr</span>(<span class="pl-s1">self</span>.<span class="pl-s1">first</span>) <span class="pl-c1">+</span> <span class="pl-s1">rest_repr</span> <span class="pl-c1">+</span> <span class="pl-s">')'</span>

    <span class="pl-k">def</span> <span class="pl-en">__str__</span>(<span class="pl-s1">self</span>):
        <span class="pl-s1">string</span> <span class="pl-c1">=</span> <span class="pl-s">'&lt;'</span>
        <span class="pl-k">while</span> <span class="pl-s1">self</span>.<span class="pl-s1">rest</span> <span class="pl-c1">is</span> <span class="pl-c1">not</span> <span class="pl-v">Link</span>.<span class="pl-s1">empty</span>:
            <span class="pl-s1">string</span> <span class="pl-c1">+=</span> <span class="pl-en">str</span>(<span class="pl-s1">self</span>.<span class="pl-s1">first</span>) <span class="pl-c1">+</span> <span class="pl-s">' '</span>
            <span class="pl-s1">self</span> <span class="pl-c1">=</span> <span class="pl-s1">self</span>.<span class="pl-s1">rest</span>
        <span class="pl-k">return</span> <span class="pl-s1">string</span> <span class="pl-c1">+</span> <span class="pl-en">str</span>(<span class="pl-s1">self</span>.<span class="pl-s1">first</span>) <span class="pl-c1">+</span> <span class="pl-s">'&gt;'</span>
 </pre></div>
<h2>hw06</h2>
<div class="highlight highlight-source-scheme"><pre class="notranslate">(<span class="pl-k">define</span> (<span class="pl-en">square</span><span class="pl-smi"> n</span>) (<span class="pl-k">*</span> n n))

(<span class="pl-k">define</span> (<span class="pl-en">pow</span><span class="pl-smi"> base exp</span>) 
  (<span class="pl-k">cond</span> 
    ((<span class="pl-k">=</span> <span class="pl-c1">exp</span> <span class="pl-c1">1</span>) base)
    ((<span class="pl-k">=</span> <span class="pl-c1">exp</span> <span class="pl-c1">2</span>) (square base))
    ((<span class="pl-c1">even?</span> (modulo <span class="pl-c1">exp</span> <span class="pl-c1">2</span>)) (square (pow base (<span class="pl-c1">quotient</span> <span class="pl-c1">exp</span> <span class="pl-c1">2</span>))))
    (<span class="pl-k">else</span> (<span class="pl-k">*</span> base (square (pow base (<span class="pl-c1">quotient</span> <span class="pl-c1">exp</span> <span class="pl-c1">2</span>)))))
  )
)

(<span class="pl-k">define</span> (<span class="pl-en">repeatedly-cube</span><span class="pl-smi"> n x</span>)
  (<span class="pl-k">if</span> (<span class="pl-c1">zero?</span> n)
      x
      (<span class="pl-k">let</span> ((y (repeatedly-cube (<span class="pl-k">-</span> n <span class="pl-c1">1</span>) x)))
        (<span class="pl-k">*</span> y y y)
      )
  )
)

(<span class="pl-k">define</span> (<span class="pl-en">cddr</span><span class="pl-smi"> s</span>) (<span class="pl-c1">cdr</span> (<span class="pl-c1">cdr</span> s)))

(<span class="pl-k">define</span> (<span class="pl-en">cadr</span><span class="pl-smi"> s</span>) (<span class="pl-c1">car</span> (<span class="pl-c1">cdr</span> s)))

(<span class="pl-k">define</span> (<span class="pl-en">caddr</span><span class="pl-smi"> s</span>) (<span class="pl-c1">car</span> (<span class="pl-c1">cdr</span> (<span class="pl-c1">cdr</span> s))))

(<span class="pl-k">define</span> (<span class="pl-en">ascending?</span><span class="pl-smi"> s</span>) 
  (<span class="pl-k">cond</span> 
    ((<span class="pl-k">or</span> (<span class="pl-c1">null?</span> s) (<span class="pl-c1">null?</span> (<span class="pl-c1">cdr</span> s))) <span class="pl-c1">#t</span>)
    ((<span class="pl-k">&gt;</span> (<span class="pl-c1">car</span> s) (<span class="pl-c1">cadr</span> s)) <span class="pl-c1">#f</span>)
    (<span class="pl-k">else</span> (ascending? (<span class="pl-c1">cdr</span> s)))
  )
)

(<span class="pl-k">define</span> (<span class="pl-en">my-filter</span><span class="pl-smi"> pred s</span>)
  (<span class="pl-k">cond</span> 
    ((<span class="pl-c1">null?</span> s) s)
    ((pred (<span class="pl-c1">car</span> s)) 
      (<span class="pl-c1">cons</span> (<span class="pl-c1">car</span> s) (my-filter pred (<span class="pl-c1">cdr</span> s)))
    )
    (<span class="pl-k">else</span> (my-filter pred (<span class="pl-c1">cdr</span> s)))
  )
)
(<span class="pl-k">define</span> (<span class="pl-en">no-repeats</span><span class="pl-smi"> s</span>) 
  (<span class="pl-k">cond</span>
    ((<span class="pl-c1">null?</span> s) s)
    ((<span class="pl-c1">null?</span> (<span class="pl-c1">cdr</span> s)) s)
    (<span class="pl-k">else</span> (<span class="pl-c1">cons</span> (<span class="pl-c1">car</span> s) (no-repeats (my-filter (<span class="pl-k">lambda</span> (<span class="pl-v">x</span>) (<span class="pl-c1">not</span> (<span class="pl-k">=</span> x (<span class="pl-c1">car</span> s)))) (<span class="pl-c1">cdr</span> s)))))
  )
)
<span class="pl-c"><span class="pl-c">;</span> helper function</span>
<span class="pl-c"><span class="pl-c">;</span> returns the values of lst that are bigger than x</span>
<span class="pl-c"><span class="pl-c">;</span> e.g., (larger-values 3 '(1 2 3 4 5 1 2 3 4 5)) --&gt; (4 5 4 5)</span>
(<span class="pl-k">define</span> (<span class="pl-en">larger-values</span><span class="pl-smi"> x lst</span>)
  (<span class="pl-k">cond</span> 
    ((<span class="pl-c1">null?</span> lst) lst)
    ((<span class="pl-k">&lt;</span> x (<span class="pl-c1">car</span> lst)) (<span class="pl-c1">cons</span> (<span class="pl-c1">car</span> lst) (larger-values x (<span class="pl-c1">cdr</span> lst))))
    (<span class="pl-k">else</span> (larger-values x (<span class="pl-c1">cdr</span> lst)))
  )
)
(<span class="pl-k">define</span> (<span class="pl-en">longest-increasing-subsequence</span><span class="pl-smi"> lst</span>)
  (<span class="pl-k">if</span> (<span class="pl-c1">null?</span> lst)
      <span class="pl-c1">nil</span>
      (<span class="pl-k">begin</span> (<span class="pl-k">define</span> <span class="pl-smi">first</span> (<span class="pl-c1">car</span> lst))
             (<span class="pl-k">define</span> <span class="pl-smi">rest</span> (<span class="pl-c1">cdr</span> lst))
             (<span class="pl-k">define</span> <span class="pl-smi">large-values-rest</span>
                    (larger-values first rest)
             )
             (<span class="pl-k">define</span> <span class="pl-smi">with-first</span>
                (<span class="pl-c1">cons</span> first (longest-increasing-subsequence large-values-rest)
                )
             )
             (<span class="pl-k">define</span> <span class="pl-smi">without-first</span>
                  (longest-increasing-subsequence rest)
              )
            (<span class="pl-k">if</span> (<span class="pl-k">&gt;</span> (<span class="pl-c1">length</span> with-first) (<span class="pl-c1">length</span> without-first))
                 with-first
                 without-first
            )
      )
  )
)
(<span class="pl-k">define</span> (<span class="pl-en">sqrt</span><span class="pl-smi"> x</span>)
  (<span class="pl-k">define</span> (<span class="pl-en">good-enough?</span><span class="pl-smi"> guess</span>)
    (<span class="pl-k">&lt;</span> (<span class="pl-c1">abs</span> (<span class="pl-k">-</span> (square guess) x)) <span class="pl-c1">0.001</span>))
  (<span class="pl-k">define</span> (<span class="pl-en">improve</span><span class="pl-smi"> guess</span>)
    (average guess (<span class="pl-k">/</span> x guess)))
  (<span class="pl-k">define</span> (<span class="pl-en">sqrt-iter</span><span class="pl-smi"> guess</span>)
    (<span class="pl-k">if</span> (good-enough? guess)
        guess
        (sqrt-iter (improve guess))))
  (sqrt-iter <span class="pl-c1">1.0</span>))
(<span class="pl-c1">sqrt</span> <span class="pl-c1">9</span>)</pre></div>
<h2>hw07</h2>
<div class="highlight highlight-source-scheme"><pre class="notranslate">(<span class="pl-k">define</span> (<span class="pl-en">add-leaf</span><span class="pl-smi"> t x</span>)
  (<span class="pl-k">if</span> (is-leaf t)
      (tree (label t) nil)
      (<span class="pl-k">begin</span> (<span class="pl-k">define</span> <span class="pl-smi">mapped-branches</span>
                (<span class="pl-c1">map</span>  (<span class="pl-k">lambda</span> (<span class="pl-v">b</span>) (add-leaf b x))
                      (branches t)
                )
             )
            (tree (label t)
              (<span class="pl-c1">append</span> mapped-branches (<span class="pl-c1">list</span> (tree x nil)))
            )
      )
  )
)</pre></div>
<pre lang="sqlite" class="notranslate"><code class="notranslate">CREATE TABLE parents AS
  SELECT "abraham" AS parent, "barack" AS child UNION
  SELECT "abraham"          , "clinton"         UNION
  SELECT "delano"           , "herbert"         UNION
  SELECT "fillmore"         , "abraham"         UNION
  SELECT "fillmore"         , "delano"          UNION
  SELECT "fillmore"         , "grover"          UNION
  SELECT "eisenhower"       , "fillmore";

CREATE TABLE dogs AS
  SELECT "abraham" AS name, "long" AS fur, 26 AS height UNION
  SELECT "barack"         , "short"      , 52           UNION
  SELECT "clinton"        , "long"       , 47           UNION
  SELECT "delano"         , "long"       , 46           UNION
  SELECT "eisenhower"     , "short"      , 35           UNION
  SELECT "fillmore"       , "curly"      , 32           UNION
  SELECT "grover"         , "short"      , 28           UNION
  SELECT "herbert"        , "curly"      , 31;

CREATE TABLE sizes AS
  SELECT "toy" AS size, 24 AS min, 28 AS max UNION
  SELECT "mini"       , 28       , 35        UNION
  SELECT "medium"     , 35       , 45        UNION
  SELECT "standard"   , 45       , 60;


-- All dogs with parents ordered by decreasing height of their parent
CREATE TABLE by_parent_height AS
  SELECT child FROM parents, dogs WHERE name = parent ORDER BY height desc;

-- The size of each dog
CREATE TABLE size_of_dogs AS

SELECT name, size FROM dogs, sizes
    WHERE height &gt; min AND height &lt;= max;
-- Filling out this helper table is optional
CREATE TABLE siblings AS
  SELECT a.child AS first, b.child AS second FROM parents AS a, parents AS b
      WHERE a.parent = b.parent AND a.child &lt; b.child;
-- Sentences about siblings that are the same size
CREATE TABLE sentences AS
  SELECT "The two siblings, " || first || " and " || second || ", have the same size: " || a.size
      FROM siblings, size_of_dogs AS a, size_of_dogs AS b
      WHERE a.size = b.size AND a.name = first AND b.name = second;

-- Height range for each fur type where all of the heights differ by no more than 30% from the average height
CREATE TABLE low_variance AS
  SELECT  fur, max(height) - min(height) 
  from dogs 
  group by fur 
  having MIN(height) &gt;= .7 * AVG(height) AND MAX(height) &lt;= 1.3 * AVG(height) ;
</code></pre></div>
<div style="font-size:small;margin-top:8px;float:right;">è½¬è½½è¯·æ³¨æ˜Žå‡ºå¤„</div>

<button class="btn btn-block" type="button" onclick="openComments()" id="cmButton">è¯„è®º</button>
<div class="comments" id="comments"></div>

</div>
    <div id="footer"><div id="footer1">Copyright Â© <span id="copyrightYear"></span> <a href="https://LianSeKong.github.io/lizi">Lizi</a></div>
<div id="footer2">
    <span id="runday"></span><span>Powered by <a href="https://meekdai.com/Gmeek.html" target="_blank">Gmeek</a></span>
</div>

<script>
var now=new Date();
document.getElementById("copyrightYear").innerHTML=now.getFullYear();

if(""!=""){
    var startSite=new Date("");
    var diff=now.getTime()-startSite.getTime();
    var diffDay=Math.floor(diff/(1000*60*60*24));
    document.getElementById("runday").innerHTML="ç½‘ç«™è¿è¡Œ"+diffDay+"å¤©"+" â€¢ ";
}
</script></div>
</body>
<script>
var IconList={'sun': 'M8 10.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5zM8 12a4 4 0 100-8 4 4 0 000 8zM8 0a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0V.75A.75.75 0 018 0zm0 13a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0v-1.5A.75.75 0 018 13zM2.343 2.343a.75.75 0 011.061 0l1.06 1.061a.75.75 0 01-1.06 1.06l-1.06-1.06a.75.75 0 010-1.06zm9.193 9.193a.75.75 0 011.06 0l1.061 1.06a.75.75 0 01-1.06 1.061l-1.061-1.06a.75.75 0 010-1.061zM16 8a.75.75 0 01-.75.75h-1.5a.75.75 0 010-1.5h1.5A.75.75 0 0116 8zM3 8a.75.75 0 01-.75.75H.75a.75.75 0 010-1.5h1.5A.75.75 0 013 8zm10.657-5.657a.75.75 0 010 1.061l-1.061 1.06a.75.75 0 11-1.06-1.06l1.06-1.06a.75.75 0 011.06 0zm-9.193 9.193a.75.75 0 010 1.06l-1.06 1.061a.75.75 0 11-1.061-1.06l1.06-1.061a.75.75 0 011.061 0z', 'moon': 'M9.598 1.591a.75.75 0 01.785-.175 7 7 0 11-8.967 8.967.75.75 0 01.961-.96 5.5 5.5 0 007.046-7.046.75.75 0 01.175-.786zm1.616 1.945a7 7 0 01-7.678 7.678 5.5 5.5 0 107.678-7.678z', 'sync': 'M1.705 8.005a.75.75 0 0 1 .834.656 5.5 5.5 0 0 0 9.592 2.97l-1.204-1.204a.25.25 0 0 1 .177-.427h3.646a.25.25 0 0 1 .25.25v3.646a.25.25 0 0 1-.427.177l-1.38-1.38A7.002 7.002 0 0 1 1.05 8.84a.75.75 0 0 1 .656-.834ZM8 2.5a5.487 5.487 0 0 0-4.131 1.869l1.204 1.204A.25.25 0 0 1 4.896 6H1.25A.25.25 0 0 1 1 5.75V2.104a.25.25 0 0 1 .427-.177l1.38 1.38A7.002 7.002 0 0 1 14.95 7.16a.75.75 0 0 1-1.49.178A5.5 5.5 0 0 0 8 2.5Z', 'home': 'M6.906.664a1.749 1.749 0 0 1 2.187 0l5.25 4.2c.415.332.657.835.657 1.367v7.019A1.75 1.75 0 0 1 13.25 15h-3.5a.75.75 0 0 1-.75-.75V9H7v5.25a.75.75 0 0 1-.75.75h-3.5A1.75 1.75 0 0 1 1 13.25V6.23c0-.531.242-1.034.657-1.366l5.25-4.2Zm1.25 1.171a.25.25 0 0 0-.312 0l-5.25 4.2a.25.25 0 0 0-.094.196v7.019c0 .138.112.25.25.25H5.5V8.25a.75.75 0 0 1 .75-.75h3.5a.75.75 0 0 1 .75.75v5.25h2.75a.25.25 0 0 0 .25-.25V6.23a.25.25 0 0 0-.094-.195Z', 'github': 'M8 0c4.42 0 8 3.58 8 8a8.013 8.013 0 0 1-5.45 7.59c-.4.08-.55-.17-.55-.38 0-.27.01-1.13.01-2.2 0-.75-.25-1.23-.54-1.48 1.78-.2 3.65-.88 3.65-3.95 0-.88-.31-1.59-.82-2.15.08-.2.36-1.02-.08-2.12 0 0-.67-.22-2.2.82-.64-.18-1.32-.27-2-.27-.68 0-1.36.09-2 .27-1.53-1.03-2.2-.82-2.2-.82-.44 1.1-.16 1.92-.08 2.12-.51.56-.82 1.28-.82 2.15 0 3.06 1.86 3.75 3.64 3.95-.23.2-.44.55-.51 1.07-.46.21-1.61.55-2.33-.66-.15-.24-.6-.83-1.23-.82-.67.01-.27.38.01.53.34.19.73.9.82 1.13.16.45.68 1.31 2.69.94 0 .67.01 1.3.01 1.49 0 .21-.15.45-.55.38A7.995 7.995 0 0 1 0 8c0-4.42 3.58-8 8-8Z', 'copy': 'M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z', 'check': 'M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z'};
var utterancesLoad=0;

let themeSettings={
    "dark": ["dark","moon","#00f0ff","dark-blue"],
    "light": ["light","sun","#ff5000","github-light"],
    "auto": ["auto","sync","","preferred-color-scheme"]
};
function changeTheme(mode, icon, color, utheme){
    document.documentElement.setAttribute("data-color-mode",mode);
    document.getElementById("themeSwitch").setAttribute("d",value=IconList[icon]);
    document.getElementById("themeSwitch").parentNode.style.color=color;
    if(utterancesLoad==1){utterancesTheme(utheme);}
}
function modeSwitch(){
    let currentMode=document.documentElement.getAttribute('data-color-mode');
    let newMode = currentMode === "light" ? "dark" : currentMode === "dark" ? "auto" : "light";
    localStorage.setItem("meek_theme", newMode);
    if(themeSettings[newMode]){
        changeTheme(...themeSettings[newMode]);
    }
}
function utterancesTheme(theme){
    const message={type:'set-theme',theme: theme};
    const iframe=document.getElementsByClassName('utterances-frame')[0];
    iframe.contentWindow.postMessage(message,'https://utteranc.es');
}
if(themeSettings[theme]){changeTheme(...themeSettings[theme]);}
console.log("\n %c Gmeek last https://github.com/Meekdai/Gmeek \n","padding:5px 0;background:#02d81d;color:#fff");
</script>

<script>
document.getElementById("pathHome").setAttribute("d",IconList["home"]);
document.getElementById("pathIssue").setAttribute("d",IconList["github"]);



function openComments(){
    cm=document.getElementById("comments");
    cmButton=document.getElementById("cmButton");
    cmButton.innerHTML="loading";
    span=document.createElement("span");
    span.setAttribute("class","AnimatedEllipsis");
    cmButton.appendChild(span);

    script=document.createElement("script");
    script.setAttribute("src","https://utteranc.es/client.js");
    script.setAttribute("repo","LianSeKong/lizi");
    script.setAttribute("issue-term","title");
    
    if(localStorage.getItem("meek_theme")=="dark"){script.setAttribute("theme","dark-blue");}
    else if(localStorage.getItem("meek_theme")=="light") {script.setAttribute("theme","github-light");}
    else{script.setAttribute("theme","preferred-color-scheme");}
    
    script.setAttribute("crossorigin","anonymous");
    script.setAttribute("async","");
    cm.appendChild(script);

    int=self.setInterval("iFrameLoading()",200);
}

function iFrameLoading(){
    var utterances=document.getElementsByClassName('utterances');
    if(utterances.length==1){
        if(utterances[0].style.height!=""){
            utterancesLoad=1;
            int=window.clearInterval(int);
            document.getElementById("cmButton").style.display="none";
            console.log("utterances Load OK");
        }
    }
}

document.addEventListener('DOMContentLoaded', () => {
    const createClipboardHTML = (codeContent, additionalClasses = '') => `
        <pre class="notranslate"><code class="notranslate">${codeContent}</code></pre>
        <div class="clipboard-container position-absolute right-0 top-0 ${additionalClasses}">
            <clipboard-copy class="ClipboardButton btn m-2 p-0" role="button" style="display: inherit;">
                <svg height="16" width="16" class="octicon octicon-copy m-2"><path d="${IconList["copy"]}"></path></svg>
                <svg height="16" width="16" class="octicon octicon-check color-fg-success m-2 d-none"><path d="${IconList["check"]}"></path></svg>
            </clipboard-copy>
            <div class="copy-feedback">Copied!</div>
        </div>
    `;

    const handleCodeElements = (selector = '') => {
        document.querySelectorAll(selector).forEach(codeElement => {
            const codeContent = codeElement.innerHTML;
            const newStructure = document.createElement('div');
            newStructure.className = 'snippet-clipboard-content position-relative overflow-auto';
            newStructure.innerHTML = createClipboardHTML(codeContent);

            const parentElement = codeElement.parentElement;
            if (selector.includes('highlight')) {
                parentElement.insertBefore(newStructure, codeElement.nextSibling);
                parentElement.removeChild(codeElement);
            } else {
                parentElement.parentElement.replaceChild(newStructure, parentElement);
            }
        });
    };

    handleCodeElements('pre.notranslate > code.notranslate');
    handleCodeElements('div.highlight > pre.notranslate');

    let currentFeedback = null;
    document.querySelectorAll('clipboard-copy').forEach(copyButton => {
        copyButton.addEventListener('click', () => {
            const codeContent = copyButton.closest('.snippet-clipboard-content').innerText;
            const tempTextArea = document.createElement('textarea');
            tempTextArea.value = codeContent;
            document.body.appendChild(tempTextArea);
            tempTextArea.select();
            document.execCommand('copy');
            document.body.removeChild(tempTextArea);

            const copyIcon = copyButton.querySelector('.octicon-copy');
            const checkIcon = copyButton.querySelector('.octicon-check');
            const copyFeedback = copyButton.nextElementSibling;

            if (currentFeedback && currentFeedback !== copyFeedback) {currentFeedback.style.display = 'none';}
            currentFeedback = copyFeedback;

            copyIcon.classList.add('d-none');
            checkIcon.classList.remove('d-none');
            copyFeedback.style.display = 'block';
            copyButton.style.borderColor = 'var(--color-success-fg)';

            setTimeout(() => {
                copyIcon.classList.remove('d-none');
                checkIcon.classList.add('d-none');
                copyFeedback.style.display = 'none';
                copyButton.style.borderColor = '';
            }, 2000);
        });
    });
});

</script>


</html>
