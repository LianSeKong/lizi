<!DOCTYPE html>
<html data-color-mode="light" data-dark-theme="dark" data-light-theme="light" lang="zh-CN">
<head>
    <meta content="text/html; charset=utf-8" http-equiv="content-type" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link href='https://mirrors.sustech.edu.cn/cdnjs/ajax/libs/Primer/21.0.7/primer.css' rel='stylesheet' />
    
    <link rel="icon" href="https://img.icons8.com/doodle/480/mugman.png"><script>
        let theme = localStorage.getItem("meek_theme") || "light";
        document.documentElement.setAttribute("data-color-mode", theme);
    </script>
<meta name="description" content="# Cs61a Summer2024 Labs



## 1.  lab01

```python
def falling(n, k):
    '''Compute the falling factorial of n to depth k.

    >>> falling(6, 3)  # 6 * 5 * 4
    120
    >>> falling(4, 3)  # 4 * 3 * 2
    24
    >>> falling(4, 1)  # 4
    4
    >>> falling(4, 0)
    1
    '''
    i, count = 0, 1
    while i < k:
        count *= n - i
        i += 1
    return count

def divisible_by_k(n, k):
    '''
    >>> a = divisible_by_k(10, 2)  # 2, 4, 6, 8, and 10 are divisible by 2
    2
    4
    6
    8
    10
    >>> a
    5
    >>> b = divisible_by_k(3, 1)  # 1, 2, and 3 are divisible by 1
    1
    2
    3
    >>> b
    3
    >>> c = divisible_by_k(6, 7)  # There are no integers up to 6 divisible by 7
    >>> c
    0
    '''
    i, count = 1, 0
    while i <= n:
        if i % k == 0:
            count += 1
            print(i)
        i += 1
    return count

def sum_digits(y):
    '''Sum all the digits of y.

    >>> sum_digits(10) # 1 + 0 = 1
    1
    >>> sum_digits(4224) # 4 + 2 + 2 + 4 = 12
    12
    >>> sum_digits(1234567890)
    45
    >>> a = sum_digits(123) # make sure that you are using return rather than print
    >>> a
    6
    '''
    total = 0
    while y > 0:
        total += y % 10
        y //= 10
    return total

def double_eights(n):
    '''Return true if n has two eights in a row.
    >>> double_eights(8)
    False
    >>> double_eights(88)
    True
    >>> double_eights(2882)
    True
    >>> double_eights(880088)
    True
    >>> double_eights(12345)
    False
    >>> double_eights(80808080)
    False
    '''
    while n > 10:
        curr = n % 10
        prev = n // 10 % 10
        if prev == curr and prev == 8:
            return True
        n //= 10
    return False
```



## lab02

```python

def composite_identity(f, g):
    '''
    Return a function with one parameter x that returns True if f(g(x)) is
    equal to g(f(x)). You can assume the result of g(x) is a valid input for f
    and vice versa.

    >>> add_one = lambda x: x + 1        # adds one to x
    >>> square = lambda x: x**2          # squares x [returns x^2]
    >>> b1 = composite_identity(square, add_one)
    >>> b1(0)                            # (0 + 1) ** 2 == 0 ** 2 + 1
    True
    >>> b1(4)                            # (4 + 1) ** 2 != 4 ** 2 + 1
    False
    '''
    def helper(x):
        return f(g(x)) == g(f(x))
    return helper

def sum_digits(y):
    '''Return the sum of the digits of non-negative integer y.'''
    total = 0
    while y > 0:
        total, y = total + y % 10, y // 10
    return total

def is_prime(n):
    '''Return whether positive integer n is prime.'''
    if n == 1:
        return False
    k = 2
    while k < n:
        if n % k == 0:
            return False
        k += 1
    return True

def count_cond(condition):
    '''Returns a function with one parameter N that counts all the numbers from
    1 to N that satisfy the two-argument predicate function Condition, where
    the first argument for Condition is N and the second argument is the
    number from 1 to N.

    >>> count_fives = count_cond(lambda n, i: sum_digits(n * i) == 5)
    >>> count_fives(10)   # 50 (10 * 5)
    1
    >>> count_fives(50)   # 50 (50 * 1), 500 (50 * 10), 1400 (50 * 28), 2300 (50 * 46)
    4

    >>> is_i_prime = lambda n, i: is_prime(i) # need to pass 2-argument function into count_cond
    >>> count_primes = count_cond(is_i_prime)
    >>> count_primes(2)    # 2
    1
    >>> count_primes(3)    # 2, 3
    2
    >>> count_primes(4)    # 2, 3
    2
    >>> count_primes(5)    # 2, 3, 5
    3
    >>> count_primes(20)   # 2, 3, 5, 7, 11, 13, 17, 19
    8
    '''
    def helper(n):
        i, count = 1, 0
        while i <= n:
            if condition(n, i):
                count += 1
            i += 1
        return count
    return helper

def multiple(a, b):
    '''Return the smallest number n that is a multiple of both a and b.

    >>> multiple(3, 4)
    12
    >>> multiple(14, 21)
    42
    >>> multiple(4, 8)
    8
    >>> multiple(3, 9)
    9
    '''
    i = 1
    max_factory = 1
    while i <= min(a, b) and max_factory:
        if a % i == 0 and b % i == 0:
            max_factory = i
        i += 1

    return a * b // max_factory
    



def cycle(f1, f2, f3):
    '''Returns a function that is itself a higher-order function.

    >>> def add1(x):
    ...     return x + 1
    >>> def times2(x):
    ...     return x * 2
    >>> def add3(x):
    ...     return x + 3
    >>> my_cycle = cycle(add1, times2, add3)
    >>> identity = my_cycle(0)
    >>> identity(5)
    5
    >>> add_one_then_double = my_cycle(2)
    >>> add_one_then_double(1)
    4
    >>> do_all_functions = my_cycle(3)
    >>> do_all_functions(2)
    9
    >>> do_more_than_a_cycle = my_cycle(4)
    >>> do_more_than_a_cycle(2)
    10
    >>> do_two_cycles = my_cycle(6)
    >>> do_two_cycles(1)
    19
    '''

    def helper(n):
        def inner_helper(x):
            if n == 0:
                return x
            i = 1
            result = x
            while i <= n:
                if i % 3 == 1:
                    result = f1(result)
                elif i % 3 == 2:
                    result = f2(result)
                else:
                    result = f3(result)
                i += 1
            return result
        return inner_helper
    return helper
```



## lab03

```python

LAB_SOURCE_FILE=__file__


def double_eights(n):
    ''' Returns whether or not n has two digits in row that
    are the number 8. Assume n has at least two digits in it.

    >>> double_eights(1288)
    True
    >>> double_eights(880)
    True
    >>> double_eights(538835)
    True
    >>> double_eights(284682)
    False
    >>> double_eights(588138)
    True
    >>> double_eights(78)
    False
    >>> from construct_check import check
    >>> # ban iteration
    >>> check(LAB_SOURCE_FILE, 'double_eights', ['While', 'For'])
    True
    '''
    last, second_last = n % 10, n // 10 % 10
    if last == 8 and second_last == 8:
        return True
    elif n < 100:
        return False
    return double_eights(n // 10)


def make_onion(f, g):
    '''Return a function can_reach(x, y, limit) that returns
    whether some call expression containing only f, g, and x with
    up to limit calls will give the result y.

    >>> up = lambda x: x + 1
    >>> double = lambda y: y * 2
    >>> can_reach = make_onion(up, double)
    >>> can_reach(5, 25, 4)      # 25 = up(double(double(up(5))))
    True
    >>> can_reach(5, 25, 3)      # Not possible
    False
    >>> can_reach(1, 1, 0)      # 1 = 1
    True
    >>> add_ing = lambda x: x + 'ing'
    >>> add_end = lambda y: y + 'end'
    >>> can_reach_string = make_onion(add_ing, add_end)
    >>> can_reach_string('cry', 'crying', 1)      # 'crying' = add_ing('cry')
    True
    >>> can_reach_string('un', 'unending', 3)     # 'unending' = add_ing(add_end('un'))
    True
    >>> can_reach_string('peach', 'folding', 4)   # Not possible
    False
    '''
    def can_reach(x, y, limit):
        if limit < 0:
            return False
        elif x == y:
            return True
        else:
            return can_reach(f(x), y, limit - 1) or can_reach(g(x), y, limit - 1)
    return can_reach


def mario_number(level):
    '''Return the number of ways that Mario can perform a sequence of steps
    or jumps to reach the end of the level without ever landing in a Piranha
    plant. Assume that every level begins and ends with a space.

    >>> mario_number(' P P ')   # jump, jump
    1
    >>> mario_number(' P P  ')   # jump, jump, step
    1
    >>> mario_number('  P P ')  # step, jump, jump
    1
    >>> mario_number('   P P ') # step, step, jump, jump or jump, jump, jump
    2
    >>> mario_number(' P PP ')  # Mario cannot jump two plants
    0
    >>> mario_number('    ')    # step, jump ; jump, step ; step, step, step
    3
    >>> mario_number('    P    ')
    9
    >>> mario_number('   P    P P   P  P P    P     P ')
    180
    '''
    length = len(level)
    def helper(i):
        if i == length - 1:
            return 1
        elif i == length:
            return 0
        if level[i] == 'P':
            return 0
        return helper(i + 1) + helper(i + 2)
    return helper(0)

def max_subseq(n, t):
    '''
    Return the maximum subsequence of length at most t that can be found in the given number n.
    For example, for n = 2012 and t = 2, we have that the subsequences are
        2
        0
        1
        2
        20
        21
        22
        01
        02
        12
    and of these, the maxumum number is 22, so our answer is 22.

    >>> max_subseq(2012, 2)
    22
    >>> max_subseq(20125, 3)
    225
    >>> max_subseq(20125, 5)
    20125
    >>> max_subseq(20125, 6) # note that 20125 == 020125
    20125
    >>> max_subseq(12345, 3)
    345
    >>> max_subseq(12345, 0) # 0 is of length 0
    0
    >>> max_subseq(12345, 1)
    5
    '''

    if t == 0:
        return 0
    if n == 0:
        return 0
    return max(n % 10 + 10 * max_subseq(n // 10 ,t - 1), max_subseq(n // 10 ,t))
     
    
def is_prime(n):
    '''
    >>> is_prime(7)
    True
    >>> is_prime(10)
    False
    >>> is_prime(1)
    False
    '''
    assert n > 0, 'n must be larger than 0'
    
    if n == 1:
        return False

    def helper(i):
        if i == n:
            return True
        if n % i == 0:
            return False
        return helper(i + 1)

    return helper(2)
```

## lab04



```python
LAB_SOURCE_FILE=__file__


def flatten(s):
    '''Returns a flattened version of list s.

    >>> flatten([1, 2, 3])
    [1, 2, 3]
    >>> deep = [1, [[2], 3], 4, [5, 6]]
    >>> flatten(deep)
    [1, 2, 3, 4, 5, 6]
    >>> deep                                # input list is unchanged
    [1, [[2], 3], 4, [5, 6]]
    >>> very_deep = [['m', ['i', ['n', ['m', 'e', ['w', 't', ['a'], 't', 'i', 'o'], 'n']], 's']]]
    >>> flatten(very_deep)
    ['m', 'i', 'n', 'm', 'e', 'w', 't', 'a', 't', 'i', 'o', 'n', 's']
    '''
    if type(s) != list:
      return [s]
    lst = []
    for i in s:
      lst += flatten(i)
    return lst


def merge(s, t):
    '''Merges two sorted lists.

    >>> s1 = [1, 3, 5]
    >>> s2 = [2, 4, 6]
    >>> merge(s1, s2)
    [1, 2, 3, 4, 5, 6]
    >>> s1
    [1, 3, 5]
    >>> s2
    [2, 4, 6]
    >>> merge([], [2, 4, 6])
    [2, 4, 6]
    >>> merge([1, 2, 3], [])
    [1, 2, 3]
    >>> merge([5, 7], [2, 4, 6])
    [2, 4, 5, 6, 7]
    >>> merge([2, 3, 4], [2, 4, 6])
    [2, 2, 3, 4, 4, 6]
    >>> from construct_check import check
    >>> check(LAB_SOURCE_FILE, 'merge', ['While', 'For'])    # ban iteration
    True
    '''
    if len(s) == 0:
      return t[:]
    elif len(t) == 0:
      return s[:]
    val = min(s[0], t[0])
    if (s[0] == val):
      return [val] + merge(s[1:], t)
    else:
      return [val] + merge(s, t[1:])

        



def size_of_tree(t):
    '''Return the number of entries in the tree.
    >>> numbers = tree(1, [tree(2), tree(3, [tree(4), tree(5)]), tree(6, [tree(7)])])
    >>> print_tree(numbers)
    1
      2
      3
        4
        5
      6
        7
    >>> size_of_tree(numbers)
    7
    '''
    if is_leaf(t):
      return 1
    return 1 + sum([size_of_tree(b) for b in branches(t)])


def replace_loki_at_leaf(t, lokis_replacement):
    '''Returns a new tree where every leaf value equal to 'loki' has
    been replaced with lokis_replacement.

    >>> yggdrasil = tree('odin',
    ...                  [tree('balder',
    ...                        [tree('loki'),
    ...                         tree('freya')]),
    ...                   tree('frigg',
    ...                        [tree('loki')]),
    ...                   tree('loki',
    ...                        [tree('sif'),
    ...                         tree('loki')]),
    ...                   tree('loki')])
    >>> laerad = copy_tree(yggdrasil)    # copy yggdrasil for testing purposes
    >>> print_tree(replace_loki_at_leaf(yggdrasil, 'freya'))
    odin
      balder
        freya
        freya
      frigg
        freya
      loki
        sif
        freya
      freya
    >>> laerad == yggdrasil    # Make sure original tree is unmodified
    True
    '''
    if is_leaf(t):
        if label(t) == 'loki':
            return tree(lokis_replacement)
        return tree(label(t))
    return tree(label(t), [replace_loki_at_leaf(b, lokis_replacement) for b in branches(t)])



def divide(quotients, divisors):
    '''Return a dictonary in which each quotient q is a key for the list of
    divisors that it divides evenly.

    >>> divide([3, 4, 5], [8, 9, 10, 11, 12])
    {3: [9, 12], 4: [8, 12], 5: [10]}
    >>> divide(range(1, 5), range(20, 25))
    {1: [20, 21, 22, 23, 24], 2: [20, 22, 24], 3: [21, 24], 4: [20, 24]}
    '''
    return {i: [j for j in divisors if j % i == 0] for i in quotients}




# Tree Data Abstraction

def tree(label, branches=[]):
    '''Construct a tree with the given label value and a list of branches.'''
    for branch in branches:
        assert is_tree(branch), 'branches must be trees'
    return [label] + list(branches)

def label(tree):
    '''Return the label value of a tree.'''
    return tree[0]

def branches(tree):
    '''Return the list of branches of the given tree.'''
    return tree[1:]

def is_tree(tree):
    '''Returns True if the given tree is a tree, and False otherwise.'''
    if type(tree) != list or len(tree) < 1:
        return False
    for branch in branches(tree):
        if not is_tree(branch):
            return False
    return True

def is_leaf(tree):
    '''Returns True if the given tree's list of branches is empty, and False
    otherwise.
    '''
    return not branches(tree)

def print_tree(t, indent=0):
    '''Print a representation of this tree in which each node is
    indented by two spaces times its depth from the root.

    >>> print_tree(tree(1))
    1
    >>> print_tree(tree(1, [tree(2)]))
    1
      2
    >>> numbers = tree(1, [tree(2), tree(3, [tree(4), tree(5)]), tree(6, [tree(7)])])
    >>> print_tree(numbers)
    1
      2
      3
        4
        5
      6
        7
    '''
    print('  ' * indent + str(label(t)))
    for b in branches(t):
        print_tree(b, indent + 1)

def copy_tree(t):
    '''Returns a copy of t. Only for testing purposes.

    >>> t = tree(5)
    >>> copy = copy_tree(t)
    >>> t = tree(6)
    >>> print_tree(copy)
    5
    '''
    return tree(label(t), [copy_tree(b) for b in branches(t)])
```





## lab05

```python
def partial_reverse(s, start):
    '''Reverse part of a list in-place, starting with start up to the end of
    the list.

    >>> a = [1, 2, 3, 4, 5, 6, 7]
    >>> partial_reverse(a, 2)
    >>> a
    [1, 2, 7, 6, 5, 4, 3]
    >>> partial_reverse(a, 5)
    >>> a
    [1, 2, 7, 6, 5, 3, 4]
    '''
    def helper(i):
        if i < (len(s) - start) // 2:
            s[start + i], s[len(s) - i - 1] = s[len(s) - i - 1], s[start + i]
            helper(i + 1)

    return helper(0)




def group_by(s, fn):
    '''Return a dictionary of lists that together contain the elements of s.
    The key for each list is the value that fn returns when called on any of the
    values of that list.

    >>> group_by([12, 23, 14, 45], lambda p: p // 10)
    {1: [12, 14], 2: [23], 4: [45]}
    >>> group_by(range(-3, 4), lambda x: x * x)
    {9: [-3, 3], 4: [-2, 2], 1: [-1, 1], 0: [0]}
    '''
    grouped = {}
    for i in s:
        key = fn(i)
        if key in grouped:
            grouped[key] += [i]
        else:
            grouped[key] = [i]
    return grouped


from math import sqrt

def distance(city_a, city_b):
    '''
    >>> city_a = make_city('city_a', 0, 1)
    >>> city_b = make_city('city_b', 0, 2)
    >>> distance(city_a, city_b)
    1.0
    >>> city_c = make_city('city_c', 6.5, 12)
    >>> city_d = make_city('city_d', 2.5, 15)
    >>> distance(city_c, city_d)
    5.0
    '''
    return sqrt((get_lat(city_a) - get_lat(city_b)) ** 2 + (get_lon(city_a) - get_lon(city_b)) ** 2)

def closer_city(lat, lon, city_a, city_b):
    '''
    Returns the name of either city_a or city_b, whichever is closest to
    coordinate (lat, lon). If the two cities are the same distance away
    from the coordinate, consider city_b to be the closer city.

    >>> berkeley = make_city('Berkeley', 37.87, 112.26)
    >>> stanford = make_city('Stanford', 34.05, 118.25)
    >>> closer_city(38.33, 121.44, berkeley, stanford)
    'Stanford'
    >>> bucharest = make_city('Bucharest', 44.43, 26.10)
    >>> vienna = make_city('Vienna', 48.20, 16.37)
    >>> closer_city(41.29, 174.78, bucharest, vienna)
    'Bucharest'
    '''
    city_c =  make_city('city_c', lat, lon)
    distance_1 = distance(city_a, city_c)
    distance_2 = distance(city_b, city_c)

    if distance_1 < distance_2:
        return get_name(city_a)    
    return get_name(city_b)    


def check_city_abstraction():
    '''
    There's nothing for you to do for this function, it's just here for the extra doctest
    >>> change_abstraction(True)
    >>> city_a = make_city('city_a', 0, 1)
    >>> city_b = make_city('city_b', 0, 2)
    >>> distance(city_a, city_b)
    1.0
    >>> city_c = make_city('city_c', 6.5, 12)
    >>> city_d = make_city('city_d', 2.5, 15)
    >>> distance(city_c, city_d)
    5.0
    >>> berkeley = make_city('Berkeley', 37.87, 112.26)
    >>> stanford = make_city('Stanford', 34.05, 118.25)
    >>> closer_city(38.33, 121.44, berkeley, stanford)
    'Stanford'
    >>> bucharest = make_city('Bucharest', 44.43, 26.10)
    >>> vienna = make_city('Vienna', 48.20, 16.37)
    >>> closer_city(41.29, 174.78, bucharest, vienna)
    'Bucharest'
    >>> change_abstraction(False)
    '''

# Treat all the following code as being behind an abstraction layer,
# you shouldn't need to look at it.
def make_city(name, lat, lon):
    '''
    >>> city = make_city('Berkeley', 0, 1)
    >>> get_name(city)
    'Berkeley'
    >>> get_lat(city)
    0
    >>> get_lon(city)
    1
    '''
    if change_abstraction.changed:
        return {'name' : name, 'lat' : lat, 'lon' : lon}
    else:
        return [name, lat, lon]

def get_name(city):
    '''
    >>> city = make_city('Berkeley', 0, 1)
    >>> get_name(city)
    'Berkeley'
    '''
    if change_abstraction.changed:
        return city['name']
    else:
        return city[0]

def get_lat(city):
    '''
    >>> city = make_city('Berkeley', 0, 1)
    >>> get_lat(city)
    0
    '''
    if change_abstraction.changed:
        return city['lat']
    else:
        return city[1]

def get_lon(city):
    '''
    >>> city = make_city('Berkeley', 0, 1)
    >>> get_lon(city)
    1
    '''
    if change_abstraction.changed:
        return city['lon']
    else:
        return city[2]

###############


def change_abstraction(change):
    '''
    For testing purposes.
    >>> change_abstraction(True)
    >>> change_abstraction.changed
    True
    '''
    change_abstraction.changed = change

change_abstraction.changed = False
```



## lab06



```python
def count_occurrences(t, n, x):
    '''Return the number of times that x is equal to one of the
    first n elements of iterator t.

    >>> s = iter([10, 9, 10, 9, 9, 10, 8, 8, 8, 7])
    >>> count_occurrences(s, 10, 9)
    3
    >>> t = iter([10, 9, 10, 9, 9, 10, 8, 8, 8, 7])
    >>> count_occurrences(t, 3, 10)
    2
    >>> u = iter([3, 2, 2, 2, 1, 2, 1, 4, 4, 5, 5, 5])
    >>> count_occurrences(u, 1, 3)  # Only iterate over 3
    1
    >>> count_occurrences(u, 3, 2)  # Only iterate over 2, 2, 2
    3
    >>> list(u)                     # Ensure that the iterator has advanced the right amount
    [1, 2, 1, 4, 4, 5, 5, 5]
    >>> v = iter([4, 1, 6, 6, 7, 7, 6, 6, 2, 2, 2, 5])
    >>> count_occurrences(v, 6, 6)
    2
    '''
    total = 0
    for i in range(n):
        y = next(t)
        if x == y:
            total += 1
    return total



def hailstone(n):
    '''Yields the elements of the hailstone sequence starting at n.

    >>> for num in hailstone(10):
    ...     print(num)
    10
    5
    16
    8
    4
    2
    1
    '''
    yield n
    if n == 1:
        return None
    if n % 2 == 0:
        yield from hailstone(n // 2)
    else:
        yield from hailstone(n * 3 + 1)


def merge(incr_a, incr_b):
    '''Yield the elements of strictly increasing iterables incr_a and incr_b, removing
    repeats. Assume that incr_a and incr_b have no repeats. incr_a or incr_b may or may not
    be infinite sequences.

    >>> m = merge([0, 2, 4, 6, 8, 10, 12, 14], [0, 3, 6, 9, 12, 15])
    >>> type(m)
    <class 'generator'>
    >>> list(m)
    [0, 2, 3, 4, 6, 8, 9, 10, 12, 14, 15]
    >>> def big(n):
    ...    k = 0
    ...    while True: yield k; k += n
    >>> m = merge(big(2), big(3))
    >>> [next(m) for _ in range(11)]
    [0, 2, 3, 4, 6, 8, 9, 10, 12, 14, 15]
    '''
    iter_a, iter_b = iter(incr_a), iter(incr_b)
    next_a, next_b = next(iter_a, None), next(iter_b, None)

    if next_a == None and next_b == None:
        yield None
    elif next_b == None:
        yield next_a
        yield from iter_a
    elif next_a == None:
        yield next_b
        yield from iter_b
    else:
        if next_a == next_b:
            yield next_a
            yield from merge(iter_a, iter_b)
        elif next_a < next_b:
            yield next_a
            yield from merge(iter_a, merge([next_b], iter_b))
        else:
            yield next_b
            yield from merge(merge([next_a], iter_a), iter_b)

def deep_map(f, s):
    '''Replace all non-list elements x with f(x) in the nested list s.

    >>> six = [1, 2, [3, [4], 5], 6]
    >>> deep_map(lambda x: x * x, six)
    >>> six
    [1, 4, [9, [16], 25], 36]
    >>> # Check that you're not making new lists
    >>> s = [3, [1, [4, [1]]]]
    >>> s1 = s[1]
    >>> s2 = s1[1]
    >>> s3 = s2[1]
    >>> deep_map(lambda x: x + 1, s)
    >>> s
    [4, [2, [5, [2]]]]
    >>> s1 is s[1]
    True
    >>> s2 is s1[1]
    True
    >>> s3 is s2[1]
    True
    '''
    for i in range(len(s)):
        if isinstance(s[i], list):
            deep_map(f, s[i])
        else:
            s[i] = f(s[i])



def buy(required_fruits, prices, total_amount):
    '''Print ways to buy some of each fruit so that the sum of prices is amount.

    >>> prices = {'oranges': 4, 'apples': 3, 'bananas': 2, 'kiwis': 9}
    >>> buy(['apples', 'oranges', 'bananas'], prices, 12)
    [2 apples][1 orange][1 banana]
    >>> buy(['apples', 'oranges', 'bananas'], prices, 16)
    [2 apples][1 orange][3 bananas]
    [2 apples][2 oranges][1 banana]
    >>> buy(['apples', 'kiwis'], prices, 36)
    [3 apples][3 kiwis]
    [6 apples][2 kiwis]
    [9 apples][1 kiwi]
    '''
    def add(fruits, amount, cart):
        if fruits == [] and amount == 0:
            print(cart)
        elif fruits and amount > 0:
            fruit = fruits[0]
            price = prices[fruit]
            for k in range(1, amount // price + 1):
                add(fruits[1:], amount - k * price, cart + display(fruit, k))
    add(required_fruits, total_amount, '')


def display(fruit, count):
    '''Display a count of a fruit in square brackets.

    >>> display('apples', 3)
    '[3 apples]'
    >>> display('apples', 1)
    '[1 apple]'
    '''
    assert count >= 1 and fruit[-1] == 's'
    if count == 1:
        fruit = fruit[:-1]  # get rid of the plural s
    return '[' + str(count) + ' ' + fruit + ']'

```



## lab07



```python
passphrase = 'REPLACE_THIS_WITH_PASSPHRASE'

def midsem_survey(p):
    '''
    You do not need to understand this code.
    >>> midsem_survey(passphrase)
    'c20d4e5854c4c9cdfd14626aad39bd5a1e2ed9bb30dca56d5643a3ad'
    '''
    import hashlib
    return hashlib.sha224(p.encode('utf-8')).hexdigest()
    

class Account:
    '''An account has a balance and a holder.
    >>> a = Account('John')
    >>> a.deposit(10)
    10
    >>> a.balance
    10
    >>> a.interest
    0.02
    >>> a.time_to_retire(10.25)  # 10 -> 10.2 -> 10.404
    2
    >>> a.balance                # Calling time_to_retire method should not change the balance
    10
    >>> a.time_to_retire(11)     # 10 -> 10.2 -> ... -> 11.040808032
    5
    >>> a.time_to_retire(100)
    117
    '''
    max_withdrawal = 10
    interest = 0.02

    def __init__(self, account_holder):
        self.balance = 0
        self.holder = account_holder

    def deposit(self, amount):
        self.balance = self.balance + amount
        return self.balance

    def withdraw(self, amount):
        if amount > self.balance:
            return 'Insufficient funds'
        if amount > self.max_withdrawal:
            return 'Can't withdraw that amount'
        self.balance = self.balance - amount
        return self.balance

    def time_to_retire(self, amount):
        '''Return the number of years until balance would grow to amount.'''
        assert self.balance > 0 and amount > 0 and self.interest > 0
        '*** YOUR CODE HERE ***'


class FreeChecking(Account):
    '''A bank account that charges for withdrawals, but the first two are free!
    >>> ch = FreeChecking('Jack')
    >>> ch.balance = 20
    >>> ch.withdraw(100)  # First one's free. Still counts as a free withdrawal even though it was unsuccessful
    'Insufficient funds'
    >>> ch.withdraw(3)    # Second withdrawal is also free
    17
    >>> ch.balance
    17
    >>> ch.withdraw(3)    # Ok, two free withdrawals is enough, as free_withdrawals is only 2
    13
    >>> ch.withdraw(3)
    9
    >>> ch2 = FreeChecking('John')
    >>> ch2.balance = 10
    >>> ch2.withdraw(3) # No fee
    7
    >>> ch.withdraw(3)  # ch still charges a fee
    5
    >>> ch.withdraw(5)  # Not enough to cover fee + withdraw
    'Insufficient funds'
    '''
    withdraw_fee = 1
    free_withdrawals = 2

    '*** YOUR CODE HERE ***'


class Transaction:
    def __init__(self, id, before, after):
        self.id = id
        self.before = before
        self.after = after

    def changed(self):
        '''Return whether the transaction resulted in a changed balance.'''
        '*** YOUR CODE HERE ***'

    def report(self):
        '''Return a string describing the transaction.

        >>> Transaction(3, 20, 10).report()
        '3: decreased 20->10'
        >>> Transaction(4, 20, 50).report()
        '4: increased 20->50'
        >>> Transaction(5, 50, 50).report()
        '5: no change'
        '''
        msg = 'no change'
        if self.changed():
            '*** YOUR CODE HERE ***'
        return str(self.id) + ': ' + msg

class BankAccount:
    '''A bank account that tracks its transaction history.

    >>> a = BankAccount('Eric')
    >>> a.deposit(100)    # Transaction 0 for a
    100
    >>> b = BankAccount('Erica')
    >>> a.withdraw(30)    # Transaction 1 for a
    70
    >>> a.deposit(10)     # Transaction 2 for a
    80
    >>> b.deposit(50)     # Transaction 0 for b
    50
    >>> b.withdraw(10)    # Transaction 1 for b
    40
    >>> a.withdraw(100)   # Transaction 3 for a
    'Insufficient funds'
    >>> len(a.transactions)
    4
    >>> len([t for t in a.transactions if t.changed()])
    3
    >>> for t in a.transactions:
    ...     print(t.report())
    0: increased 0->100
    1: decreased 100->70
    2: increased 70->80
    3: no change
    >>> b.withdraw(100)   # Transaction 2 for b
    'Insufficient funds'
    >>> b.withdraw(30)    # Transaction 3 for b
    10
    >>> for t in b.transactions:
    ...     print(t.report())
    0: increased 0->50
    1: decreased 50->40
    2: no change
    3: decreased 40->10
    '''

    # *** YOU NEED TO MAKE CHANGES IN SEVERAL PLACES IN THIS CLASS ***

    def __init__(self, account_holder):
        self.balance = 0
        self.holder = account_holder

    def deposit(self, amount):
        '''Increase the account balance by amount, add the deposit
        to the transaction history, and return the new balance.
        '''
        self.balance = self.balance + amount
        return self.balance

    def withdraw(self, amount):
        '''Decrease the account balance by amount, add the withdraw
        to the transaction history, and return the new balance.
        '''
        if amount > self.balance:
            return 'Insufficient funds'
        self.balance = self.balance - amount
        return self.balance




class Email:
    '''An email has the following instance attributes:

        msg (str): the contents of the message
        sender (Client): the client that sent the email
        recipient_name (str): the name of the recipient (another client)
    '''
    def __init__(self, msg, sender, recipient_name):
        self.msg = msg
        self.sender = sender
        self.recipient_name = recipient_name

class Server:
    '''Each Server has one instance attribute called clients that is a
    dictionary from client names to client objects.
    '''
    def __init__(self):
        self.clients = {}

    def send(self, email):
        '''Append the email to the inbox of the client it is addressed to.
            email is an instance of the Email class.
        '''
        ____.inbox.append(email)

    def register_client(self, client):
        '''Add a client to the clients mapping (which is a 
        dictionary from client names to client instances).
            client is an instance of the Client class.
        '''
        ____[____] = ____

class Client:
    '''A client has a server, a name (str), and an inbox (list).

    >>> s = Server()
    >>> a = Client(s, 'Alice')
    >>> b = Client(s, 'Bob')
    >>> a.compose('Hello, World!', 'Bob')
    >>> b.inbox[0].msg
    'Hello, World!'
    >>> a.compose('CS 61A Rocks!', 'Bob')
    >>> len(b.inbox)
    2
    >>> b.inbox[1].msg
    'CS 61A Rocks!'
    >>> b.inbox[1].sender.name
    'Alice'
    '''
    def __init__(self, server, name):
        self.inbox = []
        self.server = server
        self.name = name
        server.register_client(____)

    def compose(self, message, recipient_name):
        '''Send an email with the given message to the recipient.'''
        email = Email(message, ____, ____)
        self.server.send(email)


def make_change(amount, coins):
    '''Return a list of coins that sum to amount, preferring the smallest coins
    available and placing the smallest coins first in the returned list.

    The coins argument is a dictionary with keys that are positive integer
    denominations and values that are positive integer coin counts.

    >>> make_change(2, {2: 1})
    [2]
    >>> make_change(2, {1: 2, 2: 1})
    [1, 1]
    >>> make_change(4, {1: 2, 2: 1})
    [1, 1, 2]
    >>> make_change(4, {2: 1}) == None
    True

    >>> coins = {2: 2, 3: 2, 4: 3, 5: 1}
    >>> make_change(4, coins)
    [2, 2]
    >>> make_change(8, coins)
    [2, 2, 4]
    >>> make_change(25, coins)
    [2, 3, 3, 4, 4, 4, 5]
    >>> coins[8] = 1
    >>> make_change(25, coins)
    [2, 2, 4, 4, 5, 8]
    '''
    if not coins:
        return None
    smallest = min(coins)
    rest = remove_one(coins, smallest)
    if amount < smallest:
        return None
    '*** YOUR CODE HERE ***'

def remove_one(coins, coin):
    '''Remove one coin from a dictionary of coins. Return a new dictionary,
    leaving the original dictionary coins unchanged.

    >>> coins = {2: 5, 3: 2, 6: 1}
    >>> remove_one(coins, 2) == {2: 4, 3: 2, 6: 1}
    True
    >>> remove_one(coins, 6) == {2: 5, 3: 2}
    True
    >>> coins == {2: 5, 3: 2, 6: 1} # Unchanged
    True
    '''
    copy = dict(coins)
    count = copy.pop(coin) - 1  # The coin denomination is removed
    if count:
        copy[coin] = count      # The coin denomination is added back
    return copy

class ChangeMachine:
    '''A change machine holds a certain number of coins, initially all pennies.
    The change method adds a single coin of some denomination X and returns a
    list of coins that sums to X. The machine prefers to return the smallest
    coins available. The total value in the machine never changes, and it can
    always make change for any coin (perhaps by returning the coin passed in).

    The coins attribute is a dictionary with keys that are positive integer
    denominations and values that are positive integer coin counts.

    >>> m = ChangeMachine(2)
    >>> m.coins == {1: 2}
    True
    >>> m.change(2)
    [1, 1]
    >>> m.coins == {2: 1}
    True
    >>> m.change(2)
    [2]
    >>> m.coins == {2: 1}
    True
    >>> m.change(3)
    [3]
    >>> m.coins == {2: 1}
    True

    >>> m = ChangeMachine(10) # 10 pennies
    >>> m.coins == {1: 10}
    True
    >>> m.change(5) # takes a nickel & returns 5 pennies
    [1, 1, 1, 1, 1]
    >>> m.coins == {1: 5, 5: 1} # 5 pennies & a nickel remain
    True
    >>> m.change(3)
    [1, 1, 1]
    >>> m.coins == {1: 2, 3: 1, 5: 1}
    True
    >>> m.change(2)
    [1, 1]
    >>> m.change(2) # not enough 1's remaining; return a 2
    [2]
    >>> m.coins == {2: 1, 3: 1, 5: 1}
    True
    >>> m.change(8) # cannot use the 2 to make 8, so use 3 & 5
    [3, 5]
    >>> m.coins == {2: 1, 8: 1}
    True
    >>> m.change(1) # return the penny passed in (it's the smallest)
    [1]
    >>> m.change(9) # return the 9 passed in (no change possible)
    [9]
    >>> m.coins == {2: 1, 8: 1}
    True
    >>> m.change(10)
    [2, 8]
    >>> m.coins == {10: 1}
    True

    >>> m = ChangeMachine(9)
    >>> [m.change(k) for k in [2, 2, 3]]
    [[1, 1], [1, 1], [1, 1, 1]]
    >>> m.coins == {1: 2, 2: 2, 3: 1}
    True
    >>> m.change(5) # Prefers [1, 1, 3] to [1, 2, 2] (more pennies)
    [1, 1, 3]
    >>> m.change(7)
    [2, 5]
    >>> m.coins == {2: 1, 7: 1}
    True
    '''
    def __init__(self, pennies):
        self.coins = {1: pennies}

    def change(self, coin):
        '''Return change for coin, removing the result from self.coins.'''
        '*** YOUR CODE HERE ***'
```



## lab08



```python

def cumulative_mul(t):
    '''Mutates t so that each node's label becomes the product of its own
    label and all labels in the corresponding subtree rooted at t.

    >>> t = Tree(1, [Tree(3, [Tree(5)]), Tree(7)])
    >>> cumulative_mul(t)
    >>> t
    Tree(105, [Tree(15, [Tree(5)]), Tree(7)])
    >>> otherTree = Tree(2, [Tree(1, [Tree(3), Tree(4), Tree(5)]), Tree(6, [Tree(7)])])
    >>> cumulative_mul(otherTree)
    >>> otherTree
    Tree(5040, [Tree(60, [Tree(3), Tree(4), Tree(5)]), Tree(42, [Tree(7)])])
    '''

    for b in t.branches:
        cumulative_mul(b)
        t.label *= b.label

def delete(t, x):
    '''Remove all nodes labeled x below the root within Tree t. When a non-leaf
    node is deleted, the deleted node's children become children of its parent.

    The root node will never be removed.

    >>> t = Tree(3, [Tree(2, [Tree(2), Tree(2)]), Tree(2), Tree(2, [Tree(2, [Tree(2), Tree(2)])])])
    >>> delete(t, 2)
    >>> t
    Tree(3)
    >>> t = Tree(1, [Tree(2, [Tree(4, [Tree(2)]), Tree(5)]), Tree(3, [Tree(6), Tree(2)]), Tree(4)])
    >>> delete(t, 2)
    >>> t
    Tree(1, [Tree(4), Tree(5), Tree(3, [Tree(6)]), Tree(4)])
    >>> t = Tree(1, [Tree(2, [Tree(4), Tree(5)]), Tree(3, [Tree(6), Tree(2)]), Tree(2, [Tree(6),  Tree(2), Tree(7), Tree(8)]), Tree(4)])
    >>> delete(t, 2)
    >>> t
    Tree(1, [Tree(4), Tree(5), Tree(3, [Tree(6)]), Tree(6), Tree(7), Tree(8), Tree(4)])
    '''
    new_branches = []
    for b in t.branches:
        delete(b, x)
        if b.label == x:
            new_branches.extend(b.branches)
        else:
            new_branches.append(b)
    t.branches = new_branches


def convert_link(link):
    '''Takes a linked list and returns a Python list with the same elements.

    >>> link = Link(1, Link(2, Link(3, Link(4))))
    >>> lst = convert_link(link)
    >>> lst
    [1, 2, 3, 4]
    >>> convert_link(Link.empty)
    []
    '''
    if link is Link.empty:
        return []
    return [link.first] + convert_link(link.rest)



def add_links(link1, link2):
    '''Adds two Links, returning a new Link

    >>> l1 = Link(1, Link(2))
    >>> l2 = Link(3, Link(4, Link(5)))
    >>> new = add_links(l1, l2)
    >>> print(new)
    <1 2 3 4 5>
    >>> new2 = add_links(l2,l1)
    >>> print(new2)
    <3 4 5 1 2>
    '''
    if link1 is Link.empty:
        return link2
    return Link(link1.first, add_links(link1.rest, link2))



def multiply_lnks(lst_of_lnks):
    '''
    >>> a = Link(2, Link(3))
    >>> b = Link(5, Link(4))
    >>> p1 = multiply_lnks([a, b])
    >>> p1
    Link(10, Link(12))

    >>> c = Link(2, Link(3, Link(5)))
    >>> d = Link(6, Link(4, Link(2)))
    >>> e = Link(4, Link(1, Link(0, Link(2))))
    >>> p2 = multiply_lnks([c, d, e])
    >>> p2
    Link(48, Link(12, Link(0)))
    '''
    product = 1
    for lst in lst_of_lnks:
        if lst is Link.empty:
            return Link.empty
        product *= lst.first
    lst_of_lnks_rests = [lst.rest for lst in lst_of_lnks]
    return Link(product, multiply_lnks(lst_of_lnks_rests))


class Tree:
    '''
    >>> t = Tree(3, [Tree(2, [Tree(5)]), Tree(4)])
    >>> t.label
    3
    >>> t.branches[0].label
    2
    >>> t.branches[1].is_leaf()
    True
    '''
    def __init__(self, label, branches=[]):
        for b in branches:
            assert isinstance(b, Tree)
        self.label = label
        self.branches = list(branches)

    def is_leaf(self):
        return not self.branches

    def __repr__(self):
        if self.branches:
            branch_str = ', ' + repr(self.branches)
        else:
            branch_str = ''
        return 'Tree({0}{1})'.format(self.label, branch_str)

    def __str__(self):
        def print_tree(t, indent=0):
            tree_str = '  ' * indent + str(t.label) + '\n'
            for b in t.branches:
                tree_str += print_tree(b, indent + 1)
            return tree_str
        return print_tree(self).rstrip()


class Link:
    '''A linked list.

    >>> s = Link(1)
    >>> s.first
    1
    >>> s.rest is Link.empty
    True
    >>> s = Link(2, Link(3, Link(4)))
    >>> s.first = 5
    >>> s.rest.first = 6
    >>> s.rest.rest = Link.empty
    >>> s                                    # Displays the contents of repr(s)
    Link(5, Link(6))
    >>> s.rest = Link(7, Link(Link(8, Link(9))))
    >>> s
    Link(5, Link(7, Link(Link(8, Link(9)))))
    >>> print(s)                             # Prints str(s)
    <5 7 <8 9>>
    '''
    empty = ()

    def __init__(self, first, rest=empty):
        assert rest is Link.empty or isinstance(rest, Link)
        self.first = first
        self.rest = rest

    def __repr__(self):
        if self.rest is not Link.empty:
            rest_repr = ', ' + repr(self.rest)
        else:
            rest_repr = ''
        return 'Link(' + repr(self.first) + rest_repr + ')'

    def __str__(self):
        string = '<'
        while self.rest is not Link.empty:
            string += str(self.first) + ' '
            self = self.rest
        return string + str(self.first) + '>'


```



## lab09



```scheme
(define (over-or-under num1 num2) 
      (cond ((= num1 num2) 0)
            ((< num1 num2) -1)
            ((> num1 num2) 1)
      )
)
(define (make-adder num) (lambda (incr) (+ num incr)))

(define (composed f g) (lambda (x) (f (g x))))

(define (repeat f n) (lambda (x) (if (= n 0) x ((repeat f (- n 1)) (f x)))))

(define (max a b)
  (if (> a b)
      a
      b))

(define (min a b)
  (if (> a b)
      b
      a))

(define (gcd a b) (if (= 0 (modulo (max a b) (min a b))) (min a b) (gcd (min a b) (modulo (max a b) (min a b)))))

(define (duplicate lst) 
  (if (null? lst)
    lst
    (cons (car lst)
          (cons (car lst) 
                (duplicate (cdr lst))
          )
    )
  )
)

(expect (duplicate '(1 2 3)) (1 1 2 2 3 3))

(expect (duplicate '(1 1)) (1 1 1 1))

(define (deep-map fn s) 
    (cond ((null? s) s) 
          ((list? (car s)) (cons (deep-map fn (car s)) (deep-map fn (cdr s)))) 
          (else (cons (fn (car s)) (deep-map fn (cdr s)))) 
))


```



## lab10

```python
############## You do not need to understand any of this code!
import base64
ob = 'CmRlZiBhZGRpdGlvbihleHByKToKICAgIGRpdmlkZW5kID0gZXhwci5maXJzdAogICAgZXhwciA9IGV4cHIucmVzdAogICAgd2hpbGUgZXhwciAhPSBuaWw6CiAgICAgICAgZGl2aXNvciA9IGV4cHIuZmlyc3QKICAgICAgICBkaXZpZGVuZCArPSBkaXZpc29yCiAgICAgICAgZXhwciA9IGV4cHIucmVzdAogICAgcmV0dXJuIGRpdmlkZW5kCgpkZWYgc3VidHJhY3Rpb24oZXhwcik6CiAgICBkaXZpZGVuZCA9IGV4cHIuZmlyc3QKICAgIGV4cHIgPSBleHByLnJlc3QKICAgIHdoaWxlIGV4cHIgIT0gbmlsOgogICAgICAgIGRpdmlzb3IgPSBleHByLmZpcnN0CiAgICAgICAgZGl2aWRlbmQgLT0gZGl2aXNvcgogICAgICAgIGV4cHIgPSBleHByLnJlc3QKICAgIHJldHVybiBkaXZpZGVuZAoKZGVmIG11bHRpcGxpY2F0aW9uKGV4cHIpOgogICAgZGl2aWRlbmQgPSBleHByLmZpcnN0CiAgICBleHByID0gZXhwci5yZXN0CiAgICB3aGlsZSBleHByICE9IG5pbDoKICAgICAgICBkaXZpc29yID0gZXhwci5maXJzdAogICAgICAgIGRpdmlkZW5kICo9IGRpdmlzb3IKICAgICAgICBleHByID0gZXhwci5yZXN0CiAgICByZXR1cm4gZGl2aWRlbmQKCmRlZiBkaXZpc2lvbihleHByKToKICAgIGRpdmlkZW5kID0gZXhwci5maXJzdAogICAgZXhwciA9IGV4cHIucmVzdAogICAgd2hpbGUgZXhwciAhPSBuaWw6CiAgICAgICAgZGl2aXNvciA9IGV4cHIuZmlyc3QKICAgICAgICBkaXZpZGVuZCAvPSBkaXZpc29yCiAgICAgICAgZXhwciA9IGV4cHIucmVzdAogICAgcmV0dXJuIGRpdmlkZW5kCg=='
exec(base64.b64decode(ob.encode('ascii')).decode('ascii'))
##############

def calc_eval(exp):
    '''
    >>> calc_eval(Pair('define', Pair('a', Pair(1, nil))))
    'a'
    >>> calc_eval('a')
    1
    >>> calc_eval(Pair('+', Pair(1, Pair(2, nil))))
    3
    '''
    if isinstance(exp, Pair):
        operator = exp.first # UPDATE THIS FOR Q2, e.g (+ 1 2), + is the operator
        operands = exp.rest # UPDATE THIS FOR Q2, e.g (+ 1 2), 1 and 2 are operands
        if operator == 'and': # and expressions
            return eval_and(operands)
        elif operator == 'define': # define expressions
            return eval_define(operands)
        else: # Call expressions
            return calc_apply(calc_eval(operator), operands.map(calc_eval)) # UPDATE THIS FOR Q2, what is type(operator)?
    elif exp in OPERATORS:   # Looking up procedures
        return OPERATORS[exp]
    elif isinstance(exp, int) or isinstance(exp, bool):   # Numbers and booleans
        return exp
    elif bindings.get(exp, False): # CHANGE THIS CONDITION FOR Q4 where are variables stored?
        return bindings[exp] # UPDATE THIS FOR Q4, how do you access a variable?

def calc_apply(op, args):
    return op(args)

def floor_div(args):
    '''
    >>> floor_div(Pair(100, Pair(10, nil)))
    10
    >>> floor_div(Pair(5, Pair(3, nil)))
    1
    >>> floor_div(Pair(1, Pair(1, nil)))
    1
    >>> floor_div(Pair(5, Pair(2, nil)))
    2
    >>> floor_div(Pair(23, Pair(2, Pair(5, nil))))
    2
    >>> calc_eval(Pair('//', Pair(4, Pair(2, nil))))
    2
    >>> calc_eval(Pair('//', Pair(100, Pair(2, Pair(2, Pair(2, Pair(2, Pair(2, nil))))))))
    3
    >>> calc_eval(Pair('//', Pair(100, Pair(Pair('+', Pair(2, Pair(3, nil))), nil))))
    20
    '''

    result = args.first
    divisors = args.rest
    while divisors != nil:
        divisor = divisors.first
        result //= divisor
        divisors = divisors.rest
    return result


scheme_t = True   # Scheme's #t
scheme_f = False  # Scheme's #f

def eval_and(expressions):
    '''
    >>> calc_eval(Pair('and', Pair(1, nil)))
    1
    >>> calc_eval(Pair('and', Pair(False, Pair('1', nil))))
    False
    >>> calc_eval(Pair('and', Pair(1, Pair(Pair('//', Pair(5, Pair(2, nil))), nil))))
    2
    >>> calc_eval(Pair('and', Pair(Pair('+', Pair(1, Pair(1, nil))), Pair(3, nil))))
    3
    >>> calc_eval(Pair('and', Pair(Pair('-', Pair(1, Pair(0, nil))), Pair(Pair('/', Pair(5, Pair(2, nil))), nil))))
    2.5
    >>> calc_eval(Pair('and', Pair(0, Pair(1, nil))))
    1
    >>> calc_eval(Pair('and', nil))
    True
    '''

    val = True
    while expressions is not nil:
        val = calc_eval(expressions.first)
        if val is scheme_f:
            return scheme_f        
        expressions = expressions.rest
        
    return val

bindings = {}

def eval_define(expressions):
    '''
    >>> eval_define(Pair('a', Pair(1, nil)))
    'a'
    >>> eval_define(Pair('b', Pair(3, nil)))
    'b'
    >>> eval_define(Pair('c', Pair('a', nil)))
    'c'
    >>> calc_eval('c')
    1
    >>> calc_eval(Pair('define', Pair('d', Pair('//', nil))))
    'd'
    >>> calc_eval(Pair('d', Pair(4, Pair(2, nil))))
    2
    '''
    symbol, value = expressions.first, calc_eval(expressions.rest.first)
    bindings[symbol] = value
    return symbol

OPERATORS = { '//': floor_div, '+': addition, '-': subtraction, '*': multiplication, '/': division }

class Pair:
    '''A pair has two instance attributes: first and rest. rest must be a Pair or nil

    >>> s = Pair(1, Pair(2, nil))
    >>> s
    Pair(1, Pair(2, nil))
    >>> print(s)
    (1 2)
    >>> print(s.map(lambda x: x+4))
    (5 6)
    '''
    def __init__(self, first, rest):
        self.first = first
        self.rest = rest

    def __repr__(self):
        return 'Pair({0}, {1})'.format(repr(self.first), repr(self.rest))

    def __str__(self):
        s = '(' + str(self.first)
        rest = self.rest
        while isinstance(rest, Pair):
            s += ' ' + str(rest.first)
            rest = rest.rest
        if rest is not nil:
            s += ' . ' + str(rest)
        return s + ')'

    def __len__(self):
        n, rest = 1, self.rest
        while isinstance(rest, Pair):
            n += 1
            rest = rest.rest
        if rest is not nil:
            raise TypeError('length attempted on improper list')
        return n

    def __eq__(self, p):
        if not isinstance(p, Pair):
            return False
        return self.first == p.first and self.rest == p.rest

    def map(self, fn):
        '''Return a Scheme list after mapping Python function FN to SELF.'''
        mapped = fn(self.first)
        if self.rest is nil or isinstance(self.rest, Pair):
            return Pair(mapped, self.rest.map(fn))
        else:
            raise TypeError('ill-formed list')

class nil:
    '''The empty list'''

    def __repr__(self):
        return 'nil'

    def __str__(self):
        return '()'

    def __len__(self):
        return 0

    def map(self, fn):
        return self

nil = nil() # Assignment hides the nil class; there is only one instance
```



## lab11



```scheme
(define (cadr lst) (car (cdr lst)))

(define (make-kwlist1 keys values)
  (cons keys (cons values nil))
)

(define (get-keys-kwlist1 kwlist) (car kwlist))

(define (get-values-kwlist1 kwlist)
  (cadr kwlist)
)

(define (make-kwlist2 keys values)
  (if (null? keys) 
    nil 
    (cons (cons 
            (car keys) 
            (cons (car values) 
                  nil
            )
          ) 
          (make-kwlist2 
            (cdr keys)
            (cdr values)
          )
    )
  ) 
)

(define (get-keys-kwlist2 kwlist) 
  (if (null? kwlist) nil (cons (car (car kwlist)) (get-keys-kwlist2 (cdr kwlist))))
)

(define (get-values-kwlist2 kwlist)
  (if (null? kwlist) nil (cons (cadr (car kwlist)) (get-values-kwlist2 (cdr kwlist))))
)

(define (add-to-kwlist kwlist key value)
  (make-kwlist (append (get-keys-kwlist kwlist) (list key))  (append (get-values-kwlist kwlist) (list value)))
  
)

(define (get-first-from-kwlist kwlist key)
 (let
      (
        (values (get-values-kwlist kwlist))
        (keys (get-keys-kwlist kwlist))
        (find (lambda (f ks vs) 
                      (cond ((null? ks) nil) 
                            ((equal? (car ks) key) (car vs))
                            (else (f 
                                    f
                                    (cdr ks)
                                    (cdr vs)
                                  )
                            )
                      )
              )
        )
      )
      (find find keys values)
  )      
)
```



```sqlite
CREATE TABLE finals AS
  SELECT 'RSF' AS hall, '61A' as course UNION
  SELECT 'Wheeler'    , '61A'           UNION
  SELECT 'Pimentel'   , '61A'           UNION
  SELECT 'Li Ka Shing', '61A'           UNION
  SELECT 'Stanley'    , '61A'           UNION
  SELECT 'RSF'        , '61B'           UNION
  SELECT 'Wheeler'    , '61B'           UNION
  SELECT 'Morgan'     , '61B'           UNION
  SELECT 'Wheeler'    , '61C'           UNION
  SELECT 'Pimentel'   , '61C'           UNION
  SELECT 'Soda 310'   , '61C'           UNION
  SELECT 'Soda 306'   , '10'            UNION
  SELECT 'RSF'        , '70';

CREATE TABLE sizes AS
  SELECT 'RSF' AS room, 900 as seats    UNION
  SELECT 'Wheeler'    , 700             UNION
  SELECT 'Pimentel'   , 500             UNION
  SELECT 'Li Ka Shing', 300             UNION
  SELECT 'Stanley'    , 300             UNION
  SELECT 'Morgan'     , 100             UNION
  SELECT 'Soda 306'   , 80              UNION
  SELECT 'Soda 310'   , 40              UNION
  SELECT 'Soda 320'   , 30;

CREATE TABLE sharing AS
  SELECT a.course, COUNT(DISTINCT a.hall) AS shared FROM finals as a, finals as b 
    where a.course != b.course and a.hall = b.hall
  GROUP BY a.course;

CREATE TABLE pairs AS
  SELECT a.room || ' and ' || b.room || ' together have ' || (a.seats + b.seats) || ' seats'AS rooms
  FROM sizes AS a, sizes AS b WHERE a.room < b.room AND a.seats + b.seats >= 1000
  ORDER BY a.seats + b.seats DESC;

CREATE TABLE big AS
  SELECT course FROM finals, sizes WHERE hall = room GROUP BY course HAVING sum(seats) >= 1000;

CREATE TABLE remaining AS
  SELECT course, SUM(seats) - MAX(seats) AS remaining
    FROM finals, sizes WHERE hall = room GROUP BY course;


```

。">
<meta property="og:title" content="cs61a-su24-labs">
<meta property="og:description" content="# Cs61a Summer2024 Labs



## 1.  lab01

```python
def falling(n, k):
    '''Compute the falling factorial of n to depth k.

    >>> falling(6, 3)  # 6 * 5 * 4
    120
    >>> falling(4, 3)  # 4 * 3 * 2
    24
    >>> falling(4, 1)  # 4
    4
    >>> falling(4, 0)
    1
    '''
    i, count = 0, 1
    while i < k:
        count *= n - i
        i += 1
    return count

def divisible_by_k(n, k):
    '''
    >>> a = divisible_by_k(10, 2)  # 2, 4, 6, 8, and 10 are divisible by 2
    2
    4
    6
    8
    10
    >>> a
    5
    >>> b = divisible_by_k(3, 1)  # 1, 2, and 3 are divisible by 1
    1
    2
    3
    >>> b
    3
    >>> c = divisible_by_k(6, 7)  # There are no integers up to 6 divisible by 7
    >>> c
    0
    '''
    i, count = 1, 0
    while i <= n:
        if i % k == 0:
            count += 1
            print(i)
        i += 1
    return count

def sum_digits(y):
    '''Sum all the digits of y.

    >>> sum_digits(10) # 1 + 0 = 1
    1
    >>> sum_digits(4224) # 4 + 2 + 2 + 4 = 12
    12
    >>> sum_digits(1234567890)
    45
    >>> a = sum_digits(123) # make sure that you are using return rather than print
    >>> a
    6
    '''
    total = 0
    while y > 0:
        total += y % 10
        y //= 10
    return total

def double_eights(n):
    '''Return true if n has two eights in a row.
    >>> double_eights(8)
    False
    >>> double_eights(88)
    True
    >>> double_eights(2882)
    True
    >>> double_eights(880088)
    True
    >>> double_eights(12345)
    False
    >>> double_eights(80808080)
    False
    '''
    while n > 10:
        curr = n % 10
        prev = n // 10 % 10
        if prev == curr and prev == 8:
            return True
        n //= 10
    return False
```



## lab02

```python

def composite_identity(f, g):
    '''
    Return a function with one parameter x that returns True if f(g(x)) is
    equal to g(f(x)). You can assume the result of g(x) is a valid input for f
    and vice versa.

    >>> add_one = lambda x: x + 1        # adds one to x
    >>> square = lambda x: x**2          # squares x [returns x^2]
    >>> b1 = composite_identity(square, add_one)
    >>> b1(0)                            # (0 + 1) ** 2 == 0 ** 2 + 1
    True
    >>> b1(4)                            # (4 + 1) ** 2 != 4 ** 2 + 1
    False
    '''
    def helper(x):
        return f(g(x)) == g(f(x))
    return helper

def sum_digits(y):
    '''Return the sum of the digits of non-negative integer y.'''
    total = 0
    while y > 0:
        total, y = total + y % 10, y // 10
    return total

def is_prime(n):
    '''Return whether positive integer n is prime.'''
    if n == 1:
        return False
    k = 2
    while k < n:
        if n % k == 0:
            return False
        k += 1
    return True

def count_cond(condition):
    '''Returns a function with one parameter N that counts all the numbers from
    1 to N that satisfy the two-argument predicate function Condition, where
    the first argument for Condition is N and the second argument is the
    number from 1 to N.

    >>> count_fives = count_cond(lambda n, i: sum_digits(n * i) == 5)
    >>> count_fives(10)   # 50 (10 * 5)
    1
    >>> count_fives(50)   # 50 (50 * 1), 500 (50 * 10), 1400 (50 * 28), 2300 (50 * 46)
    4

    >>> is_i_prime = lambda n, i: is_prime(i) # need to pass 2-argument function into count_cond
    >>> count_primes = count_cond(is_i_prime)
    >>> count_primes(2)    # 2
    1
    >>> count_primes(3)    # 2, 3
    2
    >>> count_primes(4)    # 2, 3
    2
    >>> count_primes(5)    # 2, 3, 5
    3
    >>> count_primes(20)   # 2, 3, 5, 7, 11, 13, 17, 19
    8
    '''
    def helper(n):
        i, count = 1, 0
        while i <= n:
            if condition(n, i):
                count += 1
            i += 1
        return count
    return helper

def multiple(a, b):
    '''Return the smallest number n that is a multiple of both a and b.

    >>> multiple(3, 4)
    12
    >>> multiple(14, 21)
    42
    >>> multiple(4, 8)
    8
    >>> multiple(3, 9)
    9
    '''
    i = 1
    max_factory = 1
    while i <= min(a, b) and max_factory:
        if a % i == 0 and b % i == 0:
            max_factory = i
        i += 1

    return a * b // max_factory
    



def cycle(f1, f2, f3):
    '''Returns a function that is itself a higher-order function.

    >>> def add1(x):
    ...     return x + 1
    >>> def times2(x):
    ...     return x * 2
    >>> def add3(x):
    ...     return x + 3
    >>> my_cycle = cycle(add1, times2, add3)
    >>> identity = my_cycle(0)
    >>> identity(5)
    5
    >>> add_one_then_double = my_cycle(2)
    >>> add_one_then_double(1)
    4
    >>> do_all_functions = my_cycle(3)
    >>> do_all_functions(2)
    9
    >>> do_more_than_a_cycle = my_cycle(4)
    >>> do_more_than_a_cycle(2)
    10
    >>> do_two_cycles = my_cycle(6)
    >>> do_two_cycles(1)
    19
    '''

    def helper(n):
        def inner_helper(x):
            if n == 0:
                return x
            i = 1
            result = x
            while i <= n:
                if i % 3 == 1:
                    result = f1(result)
                elif i % 3 == 2:
                    result = f2(result)
                else:
                    result = f3(result)
                i += 1
            return result
        return inner_helper
    return helper
```



## lab03

```python

LAB_SOURCE_FILE=__file__


def double_eights(n):
    ''' Returns whether or not n has two digits in row that
    are the number 8. Assume n has at least two digits in it.

    >>> double_eights(1288)
    True
    >>> double_eights(880)
    True
    >>> double_eights(538835)
    True
    >>> double_eights(284682)
    False
    >>> double_eights(588138)
    True
    >>> double_eights(78)
    False
    >>> from construct_check import check
    >>> # ban iteration
    >>> check(LAB_SOURCE_FILE, 'double_eights', ['While', 'For'])
    True
    '''
    last, second_last = n % 10, n // 10 % 10
    if last == 8 and second_last == 8:
        return True
    elif n < 100:
        return False
    return double_eights(n // 10)


def make_onion(f, g):
    '''Return a function can_reach(x, y, limit) that returns
    whether some call expression containing only f, g, and x with
    up to limit calls will give the result y.

    >>> up = lambda x: x + 1
    >>> double = lambda y: y * 2
    >>> can_reach = make_onion(up, double)
    >>> can_reach(5, 25, 4)      # 25 = up(double(double(up(5))))
    True
    >>> can_reach(5, 25, 3)      # Not possible
    False
    >>> can_reach(1, 1, 0)      # 1 = 1
    True
    >>> add_ing = lambda x: x + 'ing'
    >>> add_end = lambda y: y + 'end'
    >>> can_reach_string = make_onion(add_ing, add_end)
    >>> can_reach_string('cry', 'crying', 1)      # 'crying' = add_ing('cry')
    True
    >>> can_reach_string('un', 'unending', 3)     # 'unending' = add_ing(add_end('un'))
    True
    >>> can_reach_string('peach', 'folding', 4)   # Not possible
    False
    '''
    def can_reach(x, y, limit):
        if limit < 0:
            return False
        elif x == y:
            return True
        else:
            return can_reach(f(x), y, limit - 1) or can_reach(g(x), y, limit - 1)
    return can_reach


def mario_number(level):
    '''Return the number of ways that Mario can perform a sequence of steps
    or jumps to reach the end of the level without ever landing in a Piranha
    plant. Assume that every level begins and ends with a space.

    >>> mario_number(' P P ')   # jump, jump
    1
    >>> mario_number(' P P  ')   # jump, jump, step
    1
    >>> mario_number('  P P ')  # step, jump, jump
    1
    >>> mario_number('   P P ') # step, step, jump, jump or jump, jump, jump
    2
    >>> mario_number(' P PP ')  # Mario cannot jump two plants
    0
    >>> mario_number('    ')    # step, jump ; jump, step ; step, step, step
    3
    >>> mario_number('    P    ')
    9
    >>> mario_number('   P    P P   P  P P    P     P ')
    180
    '''
    length = len(level)
    def helper(i):
        if i == length - 1:
            return 1
        elif i == length:
            return 0
        if level[i] == 'P':
            return 0
        return helper(i + 1) + helper(i + 2)
    return helper(0)

def max_subseq(n, t):
    '''
    Return the maximum subsequence of length at most t that can be found in the given number n.
    For example, for n = 2012 and t = 2, we have that the subsequences are
        2
        0
        1
        2
        20
        21
        22
        01
        02
        12
    and of these, the maxumum number is 22, so our answer is 22.

    >>> max_subseq(2012, 2)
    22
    >>> max_subseq(20125, 3)
    225
    >>> max_subseq(20125, 5)
    20125
    >>> max_subseq(20125, 6) # note that 20125 == 020125
    20125
    >>> max_subseq(12345, 3)
    345
    >>> max_subseq(12345, 0) # 0 is of length 0
    0
    >>> max_subseq(12345, 1)
    5
    '''

    if t == 0:
        return 0
    if n == 0:
        return 0
    return max(n % 10 + 10 * max_subseq(n // 10 ,t - 1), max_subseq(n // 10 ,t))
     
    
def is_prime(n):
    '''
    >>> is_prime(7)
    True
    >>> is_prime(10)
    False
    >>> is_prime(1)
    False
    '''
    assert n > 0, 'n must be larger than 0'
    
    if n == 1:
        return False

    def helper(i):
        if i == n:
            return True
        if n % i == 0:
            return False
        return helper(i + 1)

    return helper(2)
```

## lab04



```python
LAB_SOURCE_FILE=__file__


def flatten(s):
    '''Returns a flattened version of list s.

    >>> flatten([1, 2, 3])
    [1, 2, 3]
    >>> deep = [1, [[2], 3], 4, [5, 6]]
    >>> flatten(deep)
    [1, 2, 3, 4, 5, 6]
    >>> deep                                # input list is unchanged
    [1, [[2], 3], 4, [5, 6]]
    >>> very_deep = [['m', ['i', ['n', ['m', 'e', ['w', 't', ['a'], 't', 'i', 'o'], 'n']], 's']]]
    >>> flatten(very_deep)
    ['m', 'i', 'n', 'm', 'e', 'w', 't', 'a', 't', 'i', 'o', 'n', 's']
    '''
    if type(s) != list:
      return [s]
    lst = []
    for i in s:
      lst += flatten(i)
    return lst


def merge(s, t):
    '''Merges two sorted lists.

    >>> s1 = [1, 3, 5]
    >>> s2 = [2, 4, 6]
    >>> merge(s1, s2)
    [1, 2, 3, 4, 5, 6]
    >>> s1
    [1, 3, 5]
    >>> s2
    [2, 4, 6]
    >>> merge([], [2, 4, 6])
    [2, 4, 6]
    >>> merge([1, 2, 3], [])
    [1, 2, 3]
    >>> merge([5, 7], [2, 4, 6])
    [2, 4, 5, 6, 7]
    >>> merge([2, 3, 4], [2, 4, 6])
    [2, 2, 3, 4, 4, 6]
    >>> from construct_check import check
    >>> check(LAB_SOURCE_FILE, 'merge', ['While', 'For'])    # ban iteration
    True
    '''
    if len(s) == 0:
      return t[:]
    elif len(t) == 0:
      return s[:]
    val = min(s[0], t[0])
    if (s[0] == val):
      return [val] + merge(s[1:], t)
    else:
      return [val] + merge(s, t[1:])

        



def size_of_tree(t):
    '''Return the number of entries in the tree.
    >>> numbers = tree(1, [tree(2), tree(3, [tree(4), tree(5)]), tree(6, [tree(7)])])
    >>> print_tree(numbers)
    1
      2
      3
        4
        5
      6
        7
    >>> size_of_tree(numbers)
    7
    '''
    if is_leaf(t):
      return 1
    return 1 + sum([size_of_tree(b) for b in branches(t)])


def replace_loki_at_leaf(t, lokis_replacement):
    '''Returns a new tree where every leaf value equal to 'loki' has
    been replaced with lokis_replacement.

    >>> yggdrasil = tree('odin',
    ...                  [tree('balder',
    ...                        [tree('loki'),
    ...                         tree('freya')]),
    ...                   tree('frigg',
    ...                        [tree('loki')]),
    ...                   tree('loki',
    ...                        [tree('sif'),
    ...                         tree('loki')]),
    ...                   tree('loki')])
    >>> laerad = copy_tree(yggdrasil)    # copy yggdrasil for testing purposes
    >>> print_tree(replace_loki_at_leaf(yggdrasil, 'freya'))
    odin
      balder
        freya
        freya
      frigg
        freya
      loki
        sif
        freya
      freya
    >>> laerad == yggdrasil    # Make sure original tree is unmodified
    True
    '''
    if is_leaf(t):
        if label(t) == 'loki':
            return tree(lokis_replacement)
        return tree(label(t))
    return tree(label(t), [replace_loki_at_leaf(b, lokis_replacement) for b in branches(t)])



def divide(quotients, divisors):
    '''Return a dictonary in which each quotient q is a key for the list of
    divisors that it divides evenly.

    >>> divide([3, 4, 5], [8, 9, 10, 11, 12])
    {3: [9, 12], 4: [8, 12], 5: [10]}
    >>> divide(range(1, 5), range(20, 25))
    {1: [20, 21, 22, 23, 24], 2: [20, 22, 24], 3: [21, 24], 4: [20, 24]}
    '''
    return {i: [j for j in divisors if j % i == 0] for i in quotients}




# Tree Data Abstraction

def tree(label, branches=[]):
    '''Construct a tree with the given label value and a list of branches.'''
    for branch in branches:
        assert is_tree(branch), 'branches must be trees'
    return [label] + list(branches)

def label(tree):
    '''Return the label value of a tree.'''
    return tree[0]

def branches(tree):
    '''Return the list of branches of the given tree.'''
    return tree[1:]

def is_tree(tree):
    '''Returns True if the given tree is a tree, and False otherwise.'''
    if type(tree) != list or len(tree) < 1:
        return False
    for branch in branches(tree):
        if not is_tree(branch):
            return False
    return True

def is_leaf(tree):
    '''Returns True if the given tree's list of branches is empty, and False
    otherwise.
    '''
    return not branches(tree)

def print_tree(t, indent=0):
    '''Print a representation of this tree in which each node is
    indented by two spaces times its depth from the root.

    >>> print_tree(tree(1))
    1
    >>> print_tree(tree(1, [tree(2)]))
    1
      2
    >>> numbers = tree(1, [tree(2), tree(3, [tree(4), tree(5)]), tree(6, [tree(7)])])
    >>> print_tree(numbers)
    1
      2
      3
        4
        5
      6
        7
    '''
    print('  ' * indent + str(label(t)))
    for b in branches(t):
        print_tree(b, indent + 1)

def copy_tree(t):
    '''Returns a copy of t. Only for testing purposes.

    >>> t = tree(5)
    >>> copy = copy_tree(t)
    >>> t = tree(6)
    >>> print_tree(copy)
    5
    '''
    return tree(label(t), [copy_tree(b) for b in branches(t)])
```





## lab05

```python
def partial_reverse(s, start):
    '''Reverse part of a list in-place, starting with start up to the end of
    the list.

    >>> a = [1, 2, 3, 4, 5, 6, 7]
    >>> partial_reverse(a, 2)
    >>> a
    [1, 2, 7, 6, 5, 4, 3]
    >>> partial_reverse(a, 5)
    >>> a
    [1, 2, 7, 6, 5, 3, 4]
    '''
    def helper(i):
        if i < (len(s) - start) // 2:
            s[start + i], s[len(s) - i - 1] = s[len(s) - i - 1], s[start + i]
            helper(i + 1)

    return helper(0)




def group_by(s, fn):
    '''Return a dictionary of lists that together contain the elements of s.
    The key for each list is the value that fn returns when called on any of the
    values of that list.

    >>> group_by([12, 23, 14, 45], lambda p: p // 10)
    {1: [12, 14], 2: [23], 4: [45]}
    >>> group_by(range(-3, 4), lambda x: x * x)
    {9: [-3, 3], 4: [-2, 2], 1: [-1, 1], 0: [0]}
    '''
    grouped = {}
    for i in s:
        key = fn(i)
        if key in grouped:
            grouped[key] += [i]
        else:
            grouped[key] = [i]
    return grouped


from math import sqrt

def distance(city_a, city_b):
    '''
    >>> city_a = make_city('city_a', 0, 1)
    >>> city_b = make_city('city_b', 0, 2)
    >>> distance(city_a, city_b)
    1.0
    >>> city_c = make_city('city_c', 6.5, 12)
    >>> city_d = make_city('city_d', 2.5, 15)
    >>> distance(city_c, city_d)
    5.0
    '''
    return sqrt((get_lat(city_a) - get_lat(city_b)) ** 2 + (get_lon(city_a) - get_lon(city_b)) ** 2)

def closer_city(lat, lon, city_a, city_b):
    '''
    Returns the name of either city_a or city_b, whichever is closest to
    coordinate (lat, lon). If the two cities are the same distance away
    from the coordinate, consider city_b to be the closer city.

    >>> berkeley = make_city('Berkeley', 37.87, 112.26)
    >>> stanford = make_city('Stanford', 34.05, 118.25)
    >>> closer_city(38.33, 121.44, berkeley, stanford)
    'Stanford'
    >>> bucharest = make_city('Bucharest', 44.43, 26.10)
    >>> vienna = make_city('Vienna', 48.20, 16.37)
    >>> closer_city(41.29, 174.78, bucharest, vienna)
    'Bucharest'
    '''
    city_c =  make_city('city_c', lat, lon)
    distance_1 = distance(city_a, city_c)
    distance_2 = distance(city_b, city_c)

    if distance_1 < distance_2:
        return get_name(city_a)    
    return get_name(city_b)    


def check_city_abstraction():
    '''
    There's nothing for you to do for this function, it's just here for the extra doctest
    >>> change_abstraction(True)
    >>> city_a = make_city('city_a', 0, 1)
    >>> city_b = make_city('city_b', 0, 2)
    >>> distance(city_a, city_b)
    1.0
    >>> city_c = make_city('city_c', 6.5, 12)
    >>> city_d = make_city('city_d', 2.5, 15)
    >>> distance(city_c, city_d)
    5.0
    >>> berkeley = make_city('Berkeley', 37.87, 112.26)
    >>> stanford = make_city('Stanford', 34.05, 118.25)
    >>> closer_city(38.33, 121.44, berkeley, stanford)
    'Stanford'
    >>> bucharest = make_city('Bucharest', 44.43, 26.10)
    >>> vienna = make_city('Vienna', 48.20, 16.37)
    >>> closer_city(41.29, 174.78, bucharest, vienna)
    'Bucharest'
    >>> change_abstraction(False)
    '''

# Treat all the following code as being behind an abstraction layer,
# you shouldn't need to look at it.
def make_city(name, lat, lon):
    '''
    >>> city = make_city('Berkeley', 0, 1)
    >>> get_name(city)
    'Berkeley'
    >>> get_lat(city)
    0
    >>> get_lon(city)
    1
    '''
    if change_abstraction.changed:
        return {'name' : name, 'lat' : lat, 'lon' : lon}
    else:
        return [name, lat, lon]

def get_name(city):
    '''
    >>> city = make_city('Berkeley', 0, 1)
    >>> get_name(city)
    'Berkeley'
    '''
    if change_abstraction.changed:
        return city['name']
    else:
        return city[0]

def get_lat(city):
    '''
    >>> city = make_city('Berkeley', 0, 1)
    >>> get_lat(city)
    0
    '''
    if change_abstraction.changed:
        return city['lat']
    else:
        return city[1]

def get_lon(city):
    '''
    >>> city = make_city('Berkeley', 0, 1)
    >>> get_lon(city)
    1
    '''
    if change_abstraction.changed:
        return city['lon']
    else:
        return city[2]

###############


def change_abstraction(change):
    '''
    For testing purposes.
    >>> change_abstraction(True)
    >>> change_abstraction.changed
    True
    '''
    change_abstraction.changed = change

change_abstraction.changed = False
```



## lab06



```python
def count_occurrences(t, n, x):
    '''Return the number of times that x is equal to one of the
    first n elements of iterator t.

    >>> s = iter([10, 9, 10, 9, 9, 10, 8, 8, 8, 7])
    >>> count_occurrences(s, 10, 9)
    3
    >>> t = iter([10, 9, 10, 9, 9, 10, 8, 8, 8, 7])
    >>> count_occurrences(t, 3, 10)
    2
    >>> u = iter([3, 2, 2, 2, 1, 2, 1, 4, 4, 5, 5, 5])
    >>> count_occurrences(u, 1, 3)  # Only iterate over 3
    1
    >>> count_occurrences(u, 3, 2)  # Only iterate over 2, 2, 2
    3
    >>> list(u)                     # Ensure that the iterator has advanced the right amount
    [1, 2, 1, 4, 4, 5, 5, 5]
    >>> v = iter([4, 1, 6, 6, 7, 7, 6, 6, 2, 2, 2, 5])
    >>> count_occurrences(v, 6, 6)
    2
    '''
    total = 0
    for i in range(n):
        y = next(t)
        if x == y:
            total += 1
    return total



def hailstone(n):
    '''Yields the elements of the hailstone sequence starting at n.

    >>> for num in hailstone(10):
    ...     print(num)
    10
    5
    16
    8
    4
    2
    1
    '''
    yield n
    if n == 1:
        return None
    if n % 2 == 0:
        yield from hailstone(n // 2)
    else:
        yield from hailstone(n * 3 + 1)


def merge(incr_a, incr_b):
    '''Yield the elements of strictly increasing iterables incr_a and incr_b, removing
    repeats. Assume that incr_a and incr_b have no repeats. incr_a or incr_b may or may not
    be infinite sequences.

    >>> m = merge([0, 2, 4, 6, 8, 10, 12, 14], [0, 3, 6, 9, 12, 15])
    >>> type(m)
    <class 'generator'>
    >>> list(m)
    [0, 2, 3, 4, 6, 8, 9, 10, 12, 14, 15]
    >>> def big(n):
    ...    k = 0
    ...    while True: yield k; k += n
    >>> m = merge(big(2), big(3))
    >>> [next(m) for _ in range(11)]
    [0, 2, 3, 4, 6, 8, 9, 10, 12, 14, 15]
    '''
    iter_a, iter_b = iter(incr_a), iter(incr_b)
    next_a, next_b = next(iter_a, None), next(iter_b, None)

    if next_a == None and next_b == None:
        yield None
    elif next_b == None:
        yield next_a
        yield from iter_a
    elif next_a == None:
        yield next_b
        yield from iter_b
    else:
        if next_a == next_b:
            yield next_a
            yield from merge(iter_a, iter_b)
        elif next_a < next_b:
            yield next_a
            yield from merge(iter_a, merge([next_b], iter_b))
        else:
            yield next_b
            yield from merge(merge([next_a], iter_a), iter_b)

def deep_map(f, s):
    '''Replace all non-list elements x with f(x) in the nested list s.

    >>> six = [1, 2, [3, [4], 5], 6]
    >>> deep_map(lambda x: x * x, six)
    >>> six
    [1, 4, [9, [16], 25], 36]
    >>> # Check that you're not making new lists
    >>> s = [3, [1, [4, [1]]]]
    >>> s1 = s[1]
    >>> s2 = s1[1]
    >>> s3 = s2[1]
    >>> deep_map(lambda x: x + 1, s)
    >>> s
    [4, [2, [5, [2]]]]
    >>> s1 is s[1]
    True
    >>> s2 is s1[1]
    True
    >>> s3 is s2[1]
    True
    '''
    for i in range(len(s)):
        if isinstance(s[i], list):
            deep_map(f, s[i])
        else:
            s[i] = f(s[i])



def buy(required_fruits, prices, total_amount):
    '''Print ways to buy some of each fruit so that the sum of prices is amount.

    >>> prices = {'oranges': 4, 'apples': 3, 'bananas': 2, 'kiwis': 9}
    >>> buy(['apples', 'oranges', 'bananas'], prices, 12)
    [2 apples][1 orange][1 banana]
    >>> buy(['apples', 'oranges', 'bananas'], prices, 16)
    [2 apples][1 orange][3 bananas]
    [2 apples][2 oranges][1 banana]
    >>> buy(['apples', 'kiwis'], prices, 36)
    [3 apples][3 kiwis]
    [6 apples][2 kiwis]
    [9 apples][1 kiwi]
    '''
    def add(fruits, amount, cart):
        if fruits == [] and amount == 0:
            print(cart)
        elif fruits and amount > 0:
            fruit = fruits[0]
            price = prices[fruit]
            for k in range(1, amount // price + 1):
                add(fruits[1:], amount - k * price, cart + display(fruit, k))
    add(required_fruits, total_amount, '')


def display(fruit, count):
    '''Display a count of a fruit in square brackets.

    >>> display('apples', 3)
    '[3 apples]'
    >>> display('apples', 1)
    '[1 apple]'
    '''
    assert count >= 1 and fruit[-1] == 's'
    if count == 1:
        fruit = fruit[:-1]  # get rid of the plural s
    return '[' + str(count) + ' ' + fruit + ']'

```



## lab07



```python
passphrase = 'REPLACE_THIS_WITH_PASSPHRASE'

def midsem_survey(p):
    '''
    You do not need to understand this code.
    >>> midsem_survey(passphrase)
    'c20d4e5854c4c9cdfd14626aad39bd5a1e2ed9bb30dca56d5643a3ad'
    '''
    import hashlib
    return hashlib.sha224(p.encode('utf-8')).hexdigest()
    

class Account:
    '''An account has a balance and a holder.
    >>> a = Account('John')
    >>> a.deposit(10)
    10
    >>> a.balance
    10
    >>> a.interest
    0.02
    >>> a.time_to_retire(10.25)  # 10 -> 10.2 -> 10.404
    2
    >>> a.balance                # Calling time_to_retire method should not change the balance
    10
    >>> a.time_to_retire(11)     # 10 -> 10.2 -> ... -> 11.040808032
    5
    >>> a.time_to_retire(100)
    117
    '''
    max_withdrawal = 10
    interest = 0.02

    def __init__(self, account_holder):
        self.balance = 0
        self.holder = account_holder

    def deposit(self, amount):
        self.balance = self.balance + amount
        return self.balance

    def withdraw(self, amount):
        if amount > self.balance:
            return 'Insufficient funds'
        if amount > self.max_withdrawal:
            return 'Can't withdraw that amount'
        self.balance = self.balance - amount
        return self.balance

    def time_to_retire(self, amount):
        '''Return the number of years until balance would grow to amount.'''
        assert self.balance > 0 and amount > 0 and self.interest > 0
        '*** YOUR CODE HERE ***'


class FreeChecking(Account):
    '''A bank account that charges for withdrawals, but the first two are free!
    >>> ch = FreeChecking('Jack')
    >>> ch.balance = 20
    >>> ch.withdraw(100)  # First one's free. Still counts as a free withdrawal even though it was unsuccessful
    'Insufficient funds'
    >>> ch.withdraw(3)    # Second withdrawal is also free
    17
    >>> ch.balance
    17
    >>> ch.withdraw(3)    # Ok, two free withdrawals is enough, as free_withdrawals is only 2
    13
    >>> ch.withdraw(3)
    9
    >>> ch2 = FreeChecking('John')
    >>> ch2.balance = 10
    >>> ch2.withdraw(3) # No fee
    7
    >>> ch.withdraw(3)  # ch still charges a fee
    5
    >>> ch.withdraw(5)  # Not enough to cover fee + withdraw
    'Insufficient funds'
    '''
    withdraw_fee = 1
    free_withdrawals = 2

    '*** YOUR CODE HERE ***'


class Transaction:
    def __init__(self, id, before, after):
        self.id = id
        self.before = before
        self.after = after

    def changed(self):
        '''Return whether the transaction resulted in a changed balance.'''
        '*** YOUR CODE HERE ***'

    def report(self):
        '''Return a string describing the transaction.

        >>> Transaction(3, 20, 10).report()
        '3: decreased 20->10'
        >>> Transaction(4, 20, 50).report()
        '4: increased 20->50'
        >>> Transaction(5, 50, 50).report()
        '5: no change'
        '''
        msg = 'no change'
        if self.changed():
            '*** YOUR CODE HERE ***'
        return str(self.id) + ': ' + msg

class BankAccount:
    '''A bank account that tracks its transaction history.

    >>> a = BankAccount('Eric')
    >>> a.deposit(100)    # Transaction 0 for a
    100
    >>> b = BankAccount('Erica')
    >>> a.withdraw(30)    # Transaction 1 for a
    70
    >>> a.deposit(10)     # Transaction 2 for a
    80
    >>> b.deposit(50)     # Transaction 0 for b
    50
    >>> b.withdraw(10)    # Transaction 1 for b
    40
    >>> a.withdraw(100)   # Transaction 3 for a
    'Insufficient funds'
    >>> len(a.transactions)
    4
    >>> len([t for t in a.transactions if t.changed()])
    3
    >>> for t in a.transactions:
    ...     print(t.report())
    0: increased 0->100
    1: decreased 100->70
    2: increased 70->80
    3: no change
    >>> b.withdraw(100)   # Transaction 2 for b
    'Insufficient funds'
    >>> b.withdraw(30)    # Transaction 3 for b
    10
    >>> for t in b.transactions:
    ...     print(t.report())
    0: increased 0->50
    1: decreased 50->40
    2: no change
    3: decreased 40->10
    '''

    # *** YOU NEED TO MAKE CHANGES IN SEVERAL PLACES IN THIS CLASS ***

    def __init__(self, account_holder):
        self.balance = 0
        self.holder = account_holder

    def deposit(self, amount):
        '''Increase the account balance by amount, add the deposit
        to the transaction history, and return the new balance.
        '''
        self.balance = self.balance + amount
        return self.balance

    def withdraw(self, amount):
        '''Decrease the account balance by amount, add the withdraw
        to the transaction history, and return the new balance.
        '''
        if amount > self.balance:
            return 'Insufficient funds'
        self.balance = self.balance - amount
        return self.balance




class Email:
    '''An email has the following instance attributes:

        msg (str): the contents of the message
        sender (Client): the client that sent the email
        recipient_name (str): the name of the recipient (another client)
    '''
    def __init__(self, msg, sender, recipient_name):
        self.msg = msg
        self.sender = sender
        self.recipient_name = recipient_name

class Server:
    '''Each Server has one instance attribute called clients that is a
    dictionary from client names to client objects.
    '''
    def __init__(self):
        self.clients = {}

    def send(self, email):
        '''Append the email to the inbox of the client it is addressed to.
            email is an instance of the Email class.
        '''
        ____.inbox.append(email)

    def register_client(self, client):
        '''Add a client to the clients mapping (which is a 
        dictionary from client names to client instances).
            client is an instance of the Client class.
        '''
        ____[____] = ____

class Client:
    '''A client has a server, a name (str), and an inbox (list).

    >>> s = Server()
    >>> a = Client(s, 'Alice')
    >>> b = Client(s, 'Bob')
    >>> a.compose('Hello, World!', 'Bob')
    >>> b.inbox[0].msg
    'Hello, World!'
    >>> a.compose('CS 61A Rocks!', 'Bob')
    >>> len(b.inbox)
    2
    >>> b.inbox[1].msg
    'CS 61A Rocks!'
    >>> b.inbox[1].sender.name
    'Alice'
    '''
    def __init__(self, server, name):
        self.inbox = []
        self.server = server
        self.name = name
        server.register_client(____)

    def compose(self, message, recipient_name):
        '''Send an email with the given message to the recipient.'''
        email = Email(message, ____, ____)
        self.server.send(email)


def make_change(amount, coins):
    '''Return a list of coins that sum to amount, preferring the smallest coins
    available and placing the smallest coins first in the returned list.

    The coins argument is a dictionary with keys that are positive integer
    denominations and values that are positive integer coin counts.

    >>> make_change(2, {2: 1})
    [2]
    >>> make_change(2, {1: 2, 2: 1})
    [1, 1]
    >>> make_change(4, {1: 2, 2: 1})
    [1, 1, 2]
    >>> make_change(4, {2: 1}) == None
    True

    >>> coins = {2: 2, 3: 2, 4: 3, 5: 1}
    >>> make_change(4, coins)
    [2, 2]
    >>> make_change(8, coins)
    [2, 2, 4]
    >>> make_change(25, coins)
    [2, 3, 3, 4, 4, 4, 5]
    >>> coins[8] = 1
    >>> make_change(25, coins)
    [2, 2, 4, 4, 5, 8]
    '''
    if not coins:
        return None
    smallest = min(coins)
    rest = remove_one(coins, smallest)
    if amount < smallest:
        return None
    '*** YOUR CODE HERE ***'

def remove_one(coins, coin):
    '''Remove one coin from a dictionary of coins. Return a new dictionary,
    leaving the original dictionary coins unchanged.

    >>> coins = {2: 5, 3: 2, 6: 1}
    >>> remove_one(coins, 2) == {2: 4, 3: 2, 6: 1}
    True
    >>> remove_one(coins, 6) == {2: 5, 3: 2}
    True
    >>> coins == {2: 5, 3: 2, 6: 1} # Unchanged
    True
    '''
    copy = dict(coins)
    count = copy.pop(coin) - 1  # The coin denomination is removed
    if count:
        copy[coin] = count      # The coin denomination is added back
    return copy

class ChangeMachine:
    '''A change machine holds a certain number of coins, initially all pennies.
    The change method adds a single coin of some denomination X and returns a
    list of coins that sums to X. The machine prefers to return the smallest
    coins available. The total value in the machine never changes, and it can
    always make change for any coin (perhaps by returning the coin passed in).

    The coins attribute is a dictionary with keys that are positive integer
    denominations and values that are positive integer coin counts.

    >>> m = ChangeMachine(2)
    >>> m.coins == {1: 2}
    True
    >>> m.change(2)
    [1, 1]
    >>> m.coins == {2: 1}
    True
    >>> m.change(2)
    [2]
    >>> m.coins == {2: 1}
    True
    >>> m.change(3)
    [3]
    >>> m.coins == {2: 1}
    True

    >>> m = ChangeMachine(10) # 10 pennies
    >>> m.coins == {1: 10}
    True
    >>> m.change(5) # takes a nickel & returns 5 pennies
    [1, 1, 1, 1, 1]
    >>> m.coins == {1: 5, 5: 1} # 5 pennies & a nickel remain
    True
    >>> m.change(3)
    [1, 1, 1]
    >>> m.coins == {1: 2, 3: 1, 5: 1}
    True
    >>> m.change(2)
    [1, 1]
    >>> m.change(2) # not enough 1's remaining; return a 2
    [2]
    >>> m.coins == {2: 1, 3: 1, 5: 1}
    True
    >>> m.change(8) # cannot use the 2 to make 8, so use 3 & 5
    [3, 5]
    >>> m.coins == {2: 1, 8: 1}
    True
    >>> m.change(1) # return the penny passed in (it's the smallest)
    [1]
    >>> m.change(9) # return the 9 passed in (no change possible)
    [9]
    >>> m.coins == {2: 1, 8: 1}
    True
    >>> m.change(10)
    [2, 8]
    >>> m.coins == {10: 1}
    True

    >>> m = ChangeMachine(9)
    >>> [m.change(k) for k in [2, 2, 3]]
    [[1, 1], [1, 1], [1, 1, 1]]
    >>> m.coins == {1: 2, 2: 2, 3: 1}
    True
    >>> m.change(5) # Prefers [1, 1, 3] to [1, 2, 2] (more pennies)
    [1, 1, 3]
    >>> m.change(7)
    [2, 5]
    >>> m.coins == {2: 1, 7: 1}
    True
    '''
    def __init__(self, pennies):
        self.coins = {1: pennies}

    def change(self, coin):
        '''Return change for coin, removing the result from self.coins.'''
        '*** YOUR CODE HERE ***'
```



## lab08



```python

def cumulative_mul(t):
    '''Mutates t so that each node's label becomes the product of its own
    label and all labels in the corresponding subtree rooted at t.

    >>> t = Tree(1, [Tree(3, [Tree(5)]), Tree(7)])
    >>> cumulative_mul(t)
    >>> t
    Tree(105, [Tree(15, [Tree(5)]), Tree(7)])
    >>> otherTree = Tree(2, [Tree(1, [Tree(3), Tree(4), Tree(5)]), Tree(6, [Tree(7)])])
    >>> cumulative_mul(otherTree)
    >>> otherTree
    Tree(5040, [Tree(60, [Tree(3), Tree(4), Tree(5)]), Tree(42, [Tree(7)])])
    '''

    for b in t.branches:
        cumulative_mul(b)
        t.label *= b.label

def delete(t, x):
    '''Remove all nodes labeled x below the root within Tree t. When a non-leaf
    node is deleted, the deleted node's children become children of its parent.

    The root node will never be removed.

    >>> t = Tree(3, [Tree(2, [Tree(2), Tree(2)]), Tree(2), Tree(2, [Tree(2, [Tree(2), Tree(2)])])])
    >>> delete(t, 2)
    >>> t
    Tree(3)
    >>> t = Tree(1, [Tree(2, [Tree(4, [Tree(2)]), Tree(5)]), Tree(3, [Tree(6), Tree(2)]), Tree(4)])
    >>> delete(t, 2)
    >>> t
    Tree(1, [Tree(4), Tree(5), Tree(3, [Tree(6)]), Tree(4)])
    >>> t = Tree(1, [Tree(2, [Tree(4), Tree(5)]), Tree(3, [Tree(6), Tree(2)]), Tree(2, [Tree(6),  Tree(2), Tree(7), Tree(8)]), Tree(4)])
    >>> delete(t, 2)
    >>> t
    Tree(1, [Tree(4), Tree(5), Tree(3, [Tree(6)]), Tree(6), Tree(7), Tree(8), Tree(4)])
    '''
    new_branches = []
    for b in t.branches:
        delete(b, x)
        if b.label == x:
            new_branches.extend(b.branches)
        else:
            new_branches.append(b)
    t.branches = new_branches


def convert_link(link):
    '''Takes a linked list and returns a Python list with the same elements.

    >>> link = Link(1, Link(2, Link(3, Link(4))))
    >>> lst = convert_link(link)
    >>> lst
    [1, 2, 3, 4]
    >>> convert_link(Link.empty)
    []
    '''
    if link is Link.empty:
        return []
    return [link.first] + convert_link(link.rest)



def add_links(link1, link2):
    '''Adds two Links, returning a new Link

    >>> l1 = Link(1, Link(2))
    >>> l2 = Link(3, Link(4, Link(5)))
    >>> new = add_links(l1, l2)
    >>> print(new)
    <1 2 3 4 5>
    >>> new2 = add_links(l2,l1)
    >>> print(new2)
    <3 4 5 1 2>
    '''
    if link1 is Link.empty:
        return link2
    return Link(link1.first, add_links(link1.rest, link2))



def multiply_lnks(lst_of_lnks):
    '''
    >>> a = Link(2, Link(3))
    >>> b = Link(5, Link(4))
    >>> p1 = multiply_lnks([a, b])
    >>> p1
    Link(10, Link(12))

    >>> c = Link(2, Link(3, Link(5)))
    >>> d = Link(6, Link(4, Link(2)))
    >>> e = Link(4, Link(1, Link(0, Link(2))))
    >>> p2 = multiply_lnks([c, d, e])
    >>> p2
    Link(48, Link(12, Link(0)))
    '''
    product = 1
    for lst in lst_of_lnks:
        if lst is Link.empty:
            return Link.empty
        product *= lst.first
    lst_of_lnks_rests = [lst.rest for lst in lst_of_lnks]
    return Link(product, multiply_lnks(lst_of_lnks_rests))


class Tree:
    '''
    >>> t = Tree(3, [Tree(2, [Tree(5)]), Tree(4)])
    >>> t.label
    3
    >>> t.branches[0].label
    2
    >>> t.branches[1].is_leaf()
    True
    '''
    def __init__(self, label, branches=[]):
        for b in branches:
            assert isinstance(b, Tree)
        self.label = label
        self.branches = list(branches)

    def is_leaf(self):
        return not self.branches

    def __repr__(self):
        if self.branches:
            branch_str = ', ' + repr(self.branches)
        else:
            branch_str = ''
        return 'Tree({0}{1})'.format(self.label, branch_str)

    def __str__(self):
        def print_tree(t, indent=0):
            tree_str = '  ' * indent + str(t.label) + '\n'
            for b in t.branches:
                tree_str += print_tree(b, indent + 1)
            return tree_str
        return print_tree(self).rstrip()


class Link:
    '''A linked list.

    >>> s = Link(1)
    >>> s.first
    1
    >>> s.rest is Link.empty
    True
    >>> s = Link(2, Link(3, Link(4)))
    >>> s.first = 5
    >>> s.rest.first = 6
    >>> s.rest.rest = Link.empty
    >>> s                                    # Displays the contents of repr(s)
    Link(5, Link(6))
    >>> s.rest = Link(7, Link(Link(8, Link(9))))
    >>> s
    Link(5, Link(7, Link(Link(8, Link(9)))))
    >>> print(s)                             # Prints str(s)
    <5 7 <8 9>>
    '''
    empty = ()

    def __init__(self, first, rest=empty):
        assert rest is Link.empty or isinstance(rest, Link)
        self.first = first
        self.rest = rest

    def __repr__(self):
        if self.rest is not Link.empty:
            rest_repr = ', ' + repr(self.rest)
        else:
            rest_repr = ''
        return 'Link(' + repr(self.first) + rest_repr + ')'

    def __str__(self):
        string = '<'
        while self.rest is not Link.empty:
            string += str(self.first) + ' '
            self = self.rest
        return string + str(self.first) + '>'


```



## lab09



```scheme
(define (over-or-under num1 num2) 
      (cond ((= num1 num2) 0)
            ((< num1 num2) -1)
            ((> num1 num2) 1)
      )
)
(define (make-adder num) (lambda (incr) (+ num incr)))

(define (composed f g) (lambda (x) (f (g x))))

(define (repeat f n) (lambda (x) (if (= n 0) x ((repeat f (- n 1)) (f x)))))

(define (max a b)
  (if (> a b)
      a
      b))

(define (min a b)
  (if (> a b)
      b
      a))

(define (gcd a b) (if (= 0 (modulo (max a b) (min a b))) (min a b) (gcd (min a b) (modulo (max a b) (min a b)))))

(define (duplicate lst) 
  (if (null? lst)
    lst
    (cons (car lst)
          (cons (car lst) 
                (duplicate (cdr lst))
          )
    )
  )
)

(expect (duplicate '(1 2 3)) (1 1 2 2 3 3))

(expect (duplicate '(1 1)) (1 1 1 1))

(define (deep-map fn s) 
    (cond ((null? s) s) 
          ((list? (car s)) (cons (deep-map fn (car s)) (deep-map fn (cdr s)))) 
          (else (cons (fn (car s)) (deep-map fn (cdr s)))) 
))


```



## lab10

```python
############## You do not need to understand any of this code!
import base64
ob = 'CmRlZiBhZGRpdGlvbihleHByKToKICAgIGRpdmlkZW5kID0gZXhwci5maXJzdAogICAgZXhwciA9IGV4cHIucmVzdAogICAgd2hpbGUgZXhwciAhPSBuaWw6CiAgICAgICAgZGl2aXNvciA9IGV4cHIuZmlyc3QKICAgICAgICBkaXZpZGVuZCArPSBkaXZpc29yCiAgICAgICAgZXhwciA9IGV4cHIucmVzdAogICAgcmV0dXJuIGRpdmlkZW5kCgpkZWYgc3VidHJhY3Rpb24oZXhwcik6CiAgICBkaXZpZGVuZCA9IGV4cHIuZmlyc3QKICAgIGV4cHIgPSBleHByLnJlc3QKICAgIHdoaWxlIGV4cHIgIT0gbmlsOgogICAgICAgIGRpdmlzb3IgPSBleHByLmZpcnN0CiAgICAgICAgZGl2aWRlbmQgLT0gZGl2aXNvcgogICAgICAgIGV4cHIgPSBleHByLnJlc3QKICAgIHJldHVybiBkaXZpZGVuZAoKZGVmIG11bHRpcGxpY2F0aW9uKGV4cHIpOgogICAgZGl2aWRlbmQgPSBleHByLmZpcnN0CiAgICBleHByID0gZXhwci5yZXN0CiAgICB3aGlsZSBleHByICE9IG5pbDoKICAgICAgICBkaXZpc29yID0gZXhwci5maXJzdAogICAgICAgIGRpdmlkZW5kICo9IGRpdmlzb3IKICAgICAgICBleHByID0gZXhwci5yZXN0CiAgICByZXR1cm4gZGl2aWRlbmQKCmRlZiBkaXZpc2lvbihleHByKToKICAgIGRpdmlkZW5kID0gZXhwci5maXJzdAogICAgZXhwciA9IGV4cHIucmVzdAogICAgd2hpbGUgZXhwciAhPSBuaWw6CiAgICAgICAgZGl2aXNvciA9IGV4cHIuZmlyc3QKICAgICAgICBkaXZpZGVuZCAvPSBkaXZpc29yCiAgICAgICAgZXhwciA9IGV4cHIucmVzdAogICAgcmV0dXJuIGRpdmlkZW5kCg=='
exec(base64.b64decode(ob.encode('ascii')).decode('ascii'))
##############

def calc_eval(exp):
    '''
    >>> calc_eval(Pair('define', Pair('a', Pair(1, nil))))
    'a'
    >>> calc_eval('a')
    1
    >>> calc_eval(Pair('+', Pair(1, Pair(2, nil))))
    3
    '''
    if isinstance(exp, Pair):
        operator = exp.first # UPDATE THIS FOR Q2, e.g (+ 1 2), + is the operator
        operands = exp.rest # UPDATE THIS FOR Q2, e.g (+ 1 2), 1 and 2 are operands
        if operator == 'and': # and expressions
            return eval_and(operands)
        elif operator == 'define': # define expressions
            return eval_define(operands)
        else: # Call expressions
            return calc_apply(calc_eval(operator), operands.map(calc_eval)) # UPDATE THIS FOR Q2, what is type(operator)?
    elif exp in OPERATORS:   # Looking up procedures
        return OPERATORS[exp]
    elif isinstance(exp, int) or isinstance(exp, bool):   # Numbers and booleans
        return exp
    elif bindings.get(exp, False): # CHANGE THIS CONDITION FOR Q4 where are variables stored?
        return bindings[exp] # UPDATE THIS FOR Q4, how do you access a variable?

def calc_apply(op, args):
    return op(args)

def floor_div(args):
    '''
    >>> floor_div(Pair(100, Pair(10, nil)))
    10
    >>> floor_div(Pair(5, Pair(3, nil)))
    1
    >>> floor_div(Pair(1, Pair(1, nil)))
    1
    >>> floor_div(Pair(5, Pair(2, nil)))
    2
    >>> floor_div(Pair(23, Pair(2, Pair(5, nil))))
    2
    >>> calc_eval(Pair('//', Pair(4, Pair(2, nil))))
    2
    >>> calc_eval(Pair('//', Pair(100, Pair(2, Pair(2, Pair(2, Pair(2, Pair(2, nil))))))))
    3
    >>> calc_eval(Pair('//', Pair(100, Pair(Pair('+', Pair(2, Pair(3, nil))), nil))))
    20
    '''

    result = args.first
    divisors = args.rest
    while divisors != nil:
        divisor = divisors.first
        result //= divisor
        divisors = divisors.rest
    return result


scheme_t = True   # Scheme's #t
scheme_f = False  # Scheme's #f

def eval_and(expressions):
    '''
    >>> calc_eval(Pair('and', Pair(1, nil)))
    1
    >>> calc_eval(Pair('and', Pair(False, Pair('1', nil))))
    False
    >>> calc_eval(Pair('and', Pair(1, Pair(Pair('//', Pair(5, Pair(2, nil))), nil))))
    2
    >>> calc_eval(Pair('and', Pair(Pair('+', Pair(1, Pair(1, nil))), Pair(3, nil))))
    3
    >>> calc_eval(Pair('and', Pair(Pair('-', Pair(1, Pair(0, nil))), Pair(Pair('/', Pair(5, Pair(2, nil))), nil))))
    2.5
    >>> calc_eval(Pair('and', Pair(0, Pair(1, nil))))
    1
    >>> calc_eval(Pair('and', nil))
    True
    '''

    val = True
    while expressions is not nil:
        val = calc_eval(expressions.first)
        if val is scheme_f:
            return scheme_f        
        expressions = expressions.rest
        
    return val

bindings = {}

def eval_define(expressions):
    '''
    >>> eval_define(Pair('a', Pair(1, nil)))
    'a'
    >>> eval_define(Pair('b', Pair(3, nil)))
    'b'
    >>> eval_define(Pair('c', Pair('a', nil)))
    'c'
    >>> calc_eval('c')
    1
    >>> calc_eval(Pair('define', Pair('d', Pair('//', nil))))
    'd'
    >>> calc_eval(Pair('d', Pair(4, Pair(2, nil))))
    2
    '''
    symbol, value = expressions.first, calc_eval(expressions.rest.first)
    bindings[symbol] = value
    return symbol

OPERATORS = { '//': floor_div, '+': addition, '-': subtraction, '*': multiplication, '/': division }

class Pair:
    '''A pair has two instance attributes: first and rest. rest must be a Pair or nil

    >>> s = Pair(1, Pair(2, nil))
    >>> s
    Pair(1, Pair(2, nil))
    >>> print(s)
    (1 2)
    >>> print(s.map(lambda x: x+4))
    (5 6)
    '''
    def __init__(self, first, rest):
        self.first = first
        self.rest = rest

    def __repr__(self):
        return 'Pair({0}, {1})'.format(repr(self.first), repr(self.rest))

    def __str__(self):
        s = '(' + str(self.first)
        rest = self.rest
        while isinstance(rest, Pair):
            s += ' ' + str(rest.first)
            rest = rest.rest
        if rest is not nil:
            s += ' . ' + str(rest)
        return s + ')'

    def __len__(self):
        n, rest = 1, self.rest
        while isinstance(rest, Pair):
            n += 1
            rest = rest.rest
        if rest is not nil:
            raise TypeError('length attempted on improper list')
        return n

    def __eq__(self, p):
        if not isinstance(p, Pair):
            return False
        return self.first == p.first and self.rest == p.rest

    def map(self, fn):
        '''Return a Scheme list after mapping Python function FN to SELF.'''
        mapped = fn(self.first)
        if self.rest is nil or isinstance(self.rest, Pair):
            return Pair(mapped, self.rest.map(fn))
        else:
            raise TypeError('ill-formed list')

class nil:
    '''The empty list'''

    def __repr__(self):
        return 'nil'

    def __str__(self):
        return '()'

    def __len__(self):
        return 0

    def map(self, fn):
        return self

nil = nil() # Assignment hides the nil class; there is only one instance
```



## lab11



```scheme
(define (cadr lst) (car (cdr lst)))

(define (make-kwlist1 keys values)
  (cons keys (cons values nil))
)

(define (get-keys-kwlist1 kwlist) (car kwlist))

(define (get-values-kwlist1 kwlist)
  (cadr kwlist)
)

(define (make-kwlist2 keys values)
  (if (null? keys) 
    nil 
    (cons (cons 
            (car keys) 
            (cons (car values) 
                  nil
            )
          ) 
          (make-kwlist2 
            (cdr keys)
            (cdr values)
          )
    )
  ) 
)

(define (get-keys-kwlist2 kwlist) 
  (if (null? kwlist) nil (cons (car (car kwlist)) (get-keys-kwlist2 (cdr kwlist))))
)

(define (get-values-kwlist2 kwlist)
  (if (null? kwlist) nil (cons (cadr (car kwlist)) (get-values-kwlist2 (cdr kwlist))))
)

(define (add-to-kwlist kwlist key value)
  (make-kwlist (append (get-keys-kwlist kwlist) (list key))  (append (get-values-kwlist kwlist) (list value)))
  
)

(define (get-first-from-kwlist kwlist key)
 (let
      (
        (values (get-values-kwlist kwlist))
        (keys (get-keys-kwlist kwlist))
        (find (lambda (f ks vs) 
                      (cond ((null? ks) nil) 
                            ((equal? (car ks) key) (car vs))
                            (else (f 
                                    f
                                    (cdr ks)
                                    (cdr vs)
                                  )
                            )
                      )
              )
        )
      )
      (find find keys values)
  )      
)
```



```sqlite
CREATE TABLE finals AS
  SELECT 'RSF' AS hall, '61A' as course UNION
  SELECT 'Wheeler'    , '61A'           UNION
  SELECT 'Pimentel'   , '61A'           UNION
  SELECT 'Li Ka Shing', '61A'           UNION
  SELECT 'Stanley'    , '61A'           UNION
  SELECT 'RSF'        , '61B'           UNION
  SELECT 'Wheeler'    , '61B'           UNION
  SELECT 'Morgan'     , '61B'           UNION
  SELECT 'Wheeler'    , '61C'           UNION
  SELECT 'Pimentel'   , '61C'           UNION
  SELECT 'Soda 310'   , '61C'           UNION
  SELECT 'Soda 306'   , '10'            UNION
  SELECT 'RSF'        , '70';

CREATE TABLE sizes AS
  SELECT 'RSF' AS room, 900 as seats    UNION
  SELECT 'Wheeler'    , 700             UNION
  SELECT 'Pimentel'   , 500             UNION
  SELECT 'Li Ka Shing', 300             UNION
  SELECT 'Stanley'    , 300             UNION
  SELECT 'Morgan'     , 100             UNION
  SELECT 'Soda 306'   , 80              UNION
  SELECT 'Soda 310'   , 40              UNION
  SELECT 'Soda 320'   , 30;

CREATE TABLE sharing AS
  SELECT a.course, COUNT(DISTINCT a.hall) AS shared FROM finals as a, finals as b 
    where a.course != b.course and a.hall = b.hall
  GROUP BY a.course;

CREATE TABLE pairs AS
  SELECT a.room || ' and ' || b.room || ' together have ' || (a.seats + b.seats) || ' seats'AS rooms
  FROM sizes AS a, sizes AS b WHERE a.room < b.room AND a.seats + b.seats >= 1000
  ORDER BY a.seats + b.seats DESC;

CREATE TABLE big AS
  SELECT course FROM finals, sizes WHERE hall = room GROUP BY course HAVING sum(seats) >= 1000;

CREATE TABLE remaining AS
  SELECT course, SUM(seats) - MAX(seats) AS remaining
    FROM finals, sizes WHERE hall = room GROUP BY course;


```

。">
<meta property="og:type" content="article">
<meta property="og:url" content="https://LianSeKong.github.io/lizi/post/cs61a-su24-labs.html">
<meta property="og:image" content="https://img.icons8.com/doodle/480/mugman.png">
<title>cs61a-su24-labs</title>
<link href="//unpkg.com/@wooorm/starry-night@2.1.1/style/both.css" rel="stylesheet" />


</head>
<style>
body{box-sizing: border-box;min-width: 200px;max-width: 900px;margin: 20px auto;padding: 45px;font-size: 16px;font-family: sans-serif;line-height: 1.25;}
#header{display:flex;padding-bottom:8px;border-bottom: 1px solid var(--borderColor-muted, var(--color-border-muted));margin-bottom: 16px;}
#footer {margin-top:64px; text-align: center;font-size: small;}

</style>

<style>
.postTitle{margin: auto 0;font-size:40px;font-weight:bold;}
.title-right{display:flex;margin:auto 0 0 auto;}
.title-right .circle{padding: 14px 16px;margin-right:8px;}
#postBody{border-bottom: 1px solid var(--color-border-default);padding-bottom:36px;}
#postBody hr{height:2px;}
#cmButton{height:48px;margin-top:48px;}
#comments{margin-top:64px;}
.g-emoji{font-size:24px;}
@media (max-width: 600px) {
    body {padding: 8px;}
    .postTitle{font-size:24px;}
}
.copy-feedback {
    display: none;
    position: absolute;
    top: 10px;
    right: 50px;
    color: var(--color-fg-on-emphasis);
    background-color: var(--color-fg-muted);
    border-radius: 3px;
    padding: 5px 8px;
    font-size: 12px;
}
</style>




<body>
    <div id="header">
<h1 class="postTitle">cs61a-su24-labs</h1>
<div class="title-right">
    <a href="https://LianSeKong.github.io/lizi" id="buttonHome" class="btn btn-invisible circle" title="首页">
        <svg class="octicon" width="16" height="16">
            <path id="pathHome" fill-rule="evenodd"></path>
        </svg>
    </a>
    
    <a href="https://github.com/LianSeKong/lizi/issues/14" target="_blank" class="btn btn-invisible circle" title="Issue">
        <svg class="octicon" width="16" height="16">
            <path id="pathIssue" fill-rule="evenodd"></path>
        </svg>
    </a>
    

    <a class="btn btn-invisible circle" onclick="modeSwitch();" title="切换主题">
        <svg class="octicon" width="16" height="16" >
            <path id="themeSwitch" fill-rule="evenodd"></path>
        </svg>
    </a>

</div>
</div>
    <div id="content">
<div class="markdown-body" id="postBody"><h1>Cs61a Summer2024 Labs</h1>
<h2>1.  lab01</h2>
<div class="highlight highlight-source-python"><pre class="notranslate"><span class="pl-k">def</span> <span class="pl-en">falling</span>(<span class="pl-s1">n</span>, <span class="pl-s1">k</span>):
    <span class="pl-s">"""Compute the falling factorial of n to depth k.</span>
<span class="pl-s"></span>
<span class="pl-s">    &gt;&gt;&gt; falling(6, 3)  # 6 * 5 * 4</span>
<span class="pl-s">    120</span>
<span class="pl-s">    &gt;&gt;&gt; falling(4, 3)  # 4 * 3 * 2</span>
<span class="pl-s">    24</span>
<span class="pl-s">    &gt;&gt;&gt; falling(4, 1)  # 4</span>
<span class="pl-s">    4</span>
<span class="pl-s">    &gt;&gt;&gt; falling(4, 0)</span>
<span class="pl-s">    1</span>
<span class="pl-s">    """</span>
    <span class="pl-s1">i</span>, <span class="pl-s1">count</span> <span class="pl-c1">=</span> <span class="pl-c1">0</span>, <span class="pl-c1">1</span>
    <span class="pl-k">while</span> <span class="pl-s1">i</span> <span class="pl-c1">&lt;</span> <span class="pl-s1">k</span>:
        <span class="pl-s1">count</span> <span class="pl-c1">*=</span> <span class="pl-s1">n</span> <span class="pl-c1">-</span> <span class="pl-s1">i</span>
        <span class="pl-s1">i</span> <span class="pl-c1">+=</span> <span class="pl-c1">1</span>
    <span class="pl-k">return</span> <span class="pl-s1">count</span>

<span class="pl-k">def</span> <span class="pl-en">divisible_by_k</span>(<span class="pl-s1">n</span>, <span class="pl-s1">k</span>):
    <span class="pl-s">"""</span>
<span class="pl-s">    &gt;&gt;&gt; a = divisible_by_k(10, 2)  # 2, 4, 6, 8, and 10 are divisible by 2</span>
<span class="pl-s">    2</span>
<span class="pl-s">    4</span>
<span class="pl-s">    6</span>
<span class="pl-s">    8</span>
<span class="pl-s">    10</span>
<span class="pl-s">    &gt;&gt;&gt; a</span>
<span class="pl-s">    5</span>
<span class="pl-s">    &gt;&gt;&gt; b = divisible_by_k(3, 1)  # 1, 2, and 3 are divisible by 1</span>
<span class="pl-s">    1</span>
<span class="pl-s">    2</span>
<span class="pl-s">    3</span>
<span class="pl-s">    &gt;&gt;&gt; b</span>
<span class="pl-s">    3</span>
<span class="pl-s">    &gt;&gt;&gt; c = divisible_by_k(6, 7)  # There are no integers up to 6 divisible by 7</span>
<span class="pl-s">    &gt;&gt;&gt; c</span>
<span class="pl-s">    0</span>
<span class="pl-s">    """</span>
    <span class="pl-s1">i</span>, <span class="pl-s1">count</span> <span class="pl-c1">=</span> <span class="pl-c1">1</span>, <span class="pl-c1">0</span>
    <span class="pl-k">while</span> <span class="pl-s1">i</span> <span class="pl-c1">&lt;=</span> <span class="pl-s1">n</span>:
        <span class="pl-k">if</span> <span class="pl-s1">i</span> <span class="pl-c1">%</span> <span class="pl-s1">k</span> <span class="pl-c1">==</span> <span class="pl-c1">0</span>:
            <span class="pl-s1">count</span> <span class="pl-c1">+=</span> <span class="pl-c1">1</span>
            <span class="pl-en">print</span>(<span class="pl-s1">i</span>)
        <span class="pl-s1">i</span> <span class="pl-c1">+=</span> <span class="pl-c1">1</span>
    <span class="pl-k">return</span> <span class="pl-s1">count</span>

<span class="pl-k">def</span> <span class="pl-en">sum_digits</span>(<span class="pl-s1">y</span>):
    <span class="pl-s">"""Sum all the digits of y.</span>
<span class="pl-s"></span>
<span class="pl-s">    &gt;&gt;&gt; sum_digits(10) # 1 + 0 = 1</span>
<span class="pl-s">    1</span>
<span class="pl-s">    &gt;&gt;&gt; sum_digits(4224) # 4 + 2 + 2 + 4 = 12</span>
<span class="pl-s">    12</span>
<span class="pl-s">    &gt;&gt;&gt; sum_digits(1234567890)</span>
<span class="pl-s">    45</span>
<span class="pl-s">    &gt;&gt;&gt; a = sum_digits(123) # make sure that you are using return rather than print</span>
<span class="pl-s">    &gt;&gt;&gt; a</span>
<span class="pl-s">    6</span>
<span class="pl-s">    """</span>
    <span class="pl-s1">total</span> <span class="pl-c1">=</span> <span class="pl-c1">0</span>
    <span class="pl-k">while</span> <span class="pl-s1">y</span> <span class="pl-c1">&gt;</span> <span class="pl-c1">0</span>:
        <span class="pl-s1">total</span> <span class="pl-c1">+=</span> <span class="pl-s1">y</span> <span class="pl-c1">%</span> <span class="pl-c1">10</span>
        <span class="pl-s1">y</span> <span class="pl-c1">//=</span> <span class="pl-c1">10</span>
    <span class="pl-k">return</span> <span class="pl-s1">total</span>

<span class="pl-k">def</span> <span class="pl-en">double_eights</span>(<span class="pl-s1">n</span>):
    <span class="pl-s">"""Return true if n has two eights in a row.</span>
<span class="pl-s">    &gt;&gt;&gt; double_eights(8)</span>
<span class="pl-s">    False</span>
<span class="pl-s">    &gt;&gt;&gt; double_eights(88)</span>
<span class="pl-s">    True</span>
<span class="pl-s">    &gt;&gt;&gt; double_eights(2882)</span>
<span class="pl-s">    True</span>
<span class="pl-s">    &gt;&gt;&gt; double_eights(880088)</span>
<span class="pl-s">    True</span>
<span class="pl-s">    &gt;&gt;&gt; double_eights(12345)</span>
<span class="pl-s">    False</span>
<span class="pl-s">    &gt;&gt;&gt; double_eights(80808080)</span>
<span class="pl-s">    False</span>
<span class="pl-s">    """</span>
    <span class="pl-k">while</span> <span class="pl-s1">n</span> <span class="pl-c1">&gt;</span> <span class="pl-c1">10</span>:
        <span class="pl-s1">curr</span> <span class="pl-c1">=</span> <span class="pl-s1">n</span> <span class="pl-c1">%</span> <span class="pl-c1">10</span>
        <span class="pl-s1">prev</span> <span class="pl-c1">=</span> <span class="pl-s1">n</span> <span class="pl-c1">//</span> <span class="pl-c1">10</span> <span class="pl-c1">%</span> <span class="pl-c1">10</span>
        <span class="pl-k">if</span> <span class="pl-s1">prev</span> <span class="pl-c1">==</span> <span class="pl-s1">curr</span> <span class="pl-c1">and</span> <span class="pl-s1">prev</span> <span class="pl-c1">==</span> <span class="pl-c1">8</span>:
            <span class="pl-k">return</span> <span class="pl-c1">True</span>
        <span class="pl-s1">n</span> <span class="pl-c1">//=</span> <span class="pl-c1">10</span>
    <span class="pl-k">return</span> <span class="pl-c1">False</span></pre></div>
<h2>lab02</h2>
<div class="highlight highlight-source-python"><pre class="notranslate"><span class="pl-k">def</span> <span class="pl-en">composite_identity</span>(<span class="pl-s1">f</span>, <span class="pl-s1">g</span>):
    <span class="pl-s">"""</span>
<span class="pl-s">    Return a function with one parameter x that returns True if f(g(x)) is</span>
<span class="pl-s">    equal to g(f(x)). You can assume the result of g(x) is a valid input for f</span>
<span class="pl-s">    and vice versa.</span>
<span class="pl-s"></span>
<span class="pl-s">    &gt;&gt;&gt; add_one = lambda x: x + 1        # adds one to x</span>
<span class="pl-s">    &gt;&gt;&gt; square = lambda x: x**2          # squares x [returns x^2]</span>
<span class="pl-s">    &gt;&gt;&gt; b1 = composite_identity(square, add_one)</span>
<span class="pl-s">    &gt;&gt;&gt; b1(0)                            # (0 + 1) ** 2 == 0 ** 2 + 1</span>
<span class="pl-s">    True</span>
<span class="pl-s">    &gt;&gt;&gt; b1(4)                            # (4 + 1) ** 2 != 4 ** 2 + 1</span>
<span class="pl-s">    False</span>
<span class="pl-s">    """</span>
    <span class="pl-k">def</span> <span class="pl-en">helper</span>(<span class="pl-s1">x</span>):
        <span class="pl-k">return</span> <span class="pl-en">f</span>(<span class="pl-en">g</span>(<span class="pl-s1">x</span>)) <span class="pl-c1">==</span> <span class="pl-en">g</span>(<span class="pl-en">f</span>(<span class="pl-s1">x</span>))
    <span class="pl-k">return</span> <span class="pl-s1">helper</span>

<span class="pl-k">def</span> <span class="pl-en">sum_digits</span>(<span class="pl-s1">y</span>):
    <span class="pl-s">"""Return the sum of the digits of non-negative integer y."""</span>
    <span class="pl-s1">total</span> <span class="pl-c1">=</span> <span class="pl-c1">0</span>
    <span class="pl-k">while</span> <span class="pl-s1">y</span> <span class="pl-c1">&gt;</span> <span class="pl-c1">0</span>:
        <span class="pl-s1">total</span>, <span class="pl-s1">y</span> <span class="pl-c1">=</span> <span class="pl-s1">total</span> <span class="pl-c1">+</span> <span class="pl-s1">y</span> <span class="pl-c1">%</span> <span class="pl-c1">10</span>, <span class="pl-s1">y</span> <span class="pl-c1">//</span> <span class="pl-c1">10</span>
    <span class="pl-k">return</span> <span class="pl-s1">total</span>

<span class="pl-k">def</span> <span class="pl-en">is_prime</span>(<span class="pl-s1">n</span>):
    <span class="pl-s">"""Return whether positive integer n is prime."""</span>
    <span class="pl-k">if</span> <span class="pl-s1">n</span> <span class="pl-c1">==</span> <span class="pl-c1">1</span>:
        <span class="pl-k">return</span> <span class="pl-c1">False</span>
    <span class="pl-s1">k</span> <span class="pl-c1">=</span> <span class="pl-c1">2</span>
    <span class="pl-k">while</span> <span class="pl-s1">k</span> <span class="pl-c1">&lt;</span> <span class="pl-s1">n</span>:
        <span class="pl-k">if</span> <span class="pl-s1">n</span> <span class="pl-c1">%</span> <span class="pl-s1">k</span> <span class="pl-c1">==</span> <span class="pl-c1">0</span>:
            <span class="pl-k">return</span> <span class="pl-c1">False</span>
        <span class="pl-s1">k</span> <span class="pl-c1">+=</span> <span class="pl-c1">1</span>
    <span class="pl-k">return</span> <span class="pl-c1">True</span>

<span class="pl-k">def</span> <span class="pl-en">count_cond</span>(<span class="pl-s1">condition</span>):
    <span class="pl-s">"""Returns a function with one parameter N that counts all the numbers from</span>
<span class="pl-s">    1 to N that satisfy the two-argument predicate function Condition, where</span>
<span class="pl-s">    the first argument for Condition is N and the second argument is the</span>
<span class="pl-s">    number from 1 to N.</span>
<span class="pl-s"></span>
<span class="pl-s">    &gt;&gt;&gt; count_fives = count_cond(lambda n, i: sum_digits(n * i) == 5)</span>
<span class="pl-s">    &gt;&gt;&gt; count_fives(10)   # 50 (10 * 5)</span>
<span class="pl-s">    1</span>
<span class="pl-s">    &gt;&gt;&gt; count_fives(50)   # 50 (50 * 1), 500 (50 * 10), 1400 (50 * 28), 2300 (50 * 46)</span>
<span class="pl-s">    4</span>
<span class="pl-s"></span>
<span class="pl-s">    &gt;&gt;&gt; is_i_prime = lambda n, i: is_prime(i) # need to pass 2-argument function into count_cond</span>
<span class="pl-s">    &gt;&gt;&gt; count_primes = count_cond(is_i_prime)</span>
<span class="pl-s">    &gt;&gt;&gt; count_primes(2)    # 2</span>
<span class="pl-s">    1</span>
<span class="pl-s">    &gt;&gt;&gt; count_primes(3)    # 2, 3</span>
<span class="pl-s">    2</span>
<span class="pl-s">    &gt;&gt;&gt; count_primes(4)    # 2, 3</span>
<span class="pl-s">    2</span>
<span class="pl-s">    &gt;&gt;&gt; count_primes(5)    # 2, 3, 5</span>
<span class="pl-s">    3</span>
<span class="pl-s">    &gt;&gt;&gt; count_primes(20)   # 2, 3, 5, 7, 11, 13, 17, 19</span>
<span class="pl-s">    8</span>
<span class="pl-s">    """</span>
    <span class="pl-k">def</span> <span class="pl-en">helper</span>(<span class="pl-s1">n</span>):
        <span class="pl-s1">i</span>, <span class="pl-s1">count</span> <span class="pl-c1">=</span> <span class="pl-c1">1</span>, <span class="pl-c1">0</span>
        <span class="pl-k">while</span> <span class="pl-s1">i</span> <span class="pl-c1">&lt;=</span> <span class="pl-s1">n</span>:
            <span class="pl-k">if</span> <span class="pl-en">condition</span>(<span class="pl-s1">n</span>, <span class="pl-s1">i</span>):
                <span class="pl-s1">count</span> <span class="pl-c1">+=</span> <span class="pl-c1">1</span>
            <span class="pl-s1">i</span> <span class="pl-c1">+=</span> <span class="pl-c1">1</span>
        <span class="pl-k">return</span> <span class="pl-s1">count</span>
    <span class="pl-k">return</span> <span class="pl-s1">helper</span>

<span class="pl-k">def</span> <span class="pl-en">multiple</span>(<span class="pl-s1">a</span>, <span class="pl-s1">b</span>):
    <span class="pl-s">"""Return the smallest number n that is a multiple of both a and b.</span>
<span class="pl-s"></span>
<span class="pl-s">    &gt;&gt;&gt; multiple(3, 4)</span>
<span class="pl-s">    12</span>
<span class="pl-s">    &gt;&gt;&gt; multiple(14, 21)</span>
<span class="pl-s">    42</span>
<span class="pl-s">    &gt;&gt;&gt; multiple(4, 8)</span>
<span class="pl-s">    8</span>
<span class="pl-s">    &gt;&gt;&gt; multiple(3, 9)</span>
<span class="pl-s">    9</span>
<span class="pl-s">    """</span>
    <span class="pl-s1">i</span> <span class="pl-c1">=</span> <span class="pl-c1">1</span>
    <span class="pl-s1">max_factory</span> <span class="pl-c1">=</span> <span class="pl-c1">1</span>
    <span class="pl-k">while</span> <span class="pl-s1">i</span> <span class="pl-c1">&lt;=</span> <span class="pl-en">min</span>(<span class="pl-s1">a</span>, <span class="pl-s1">b</span>) <span class="pl-c1">and</span> <span class="pl-s1">max_factory</span>:
        <span class="pl-k">if</span> <span class="pl-s1">a</span> <span class="pl-c1">%</span> <span class="pl-s1">i</span> <span class="pl-c1">==</span> <span class="pl-c1">0</span> <span class="pl-c1">and</span> <span class="pl-s1">b</span> <span class="pl-c1">%</span> <span class="pl-s1">i</span> <span class="pl-c1">==</span> <span class="pl-c1">0</span>:
            <span class="pl-s1">max_factory</span> <span class="pl-c1">=</span> <span class="pl-s1">i</span>
        <span class="pl-s1">i</span> <span class="pl-c1">+=</span> <span class="pl-c1">1</span>

    <span class="pl-k">return</span> <span class="pl-s1">a</span> <span class="pl-c1">*</span> <span class="pl-s1">b</span> <span class="pl-c1">//</span> <span class="pl-s1">max_factory</span>
    



<span class="pl-k">def</span> <span class="pl-en">cycle</span>(<span class="pl-s1">f1</span>, <span class="pl-s1">f2</span>, <span class="pl-s1">f3</span>):
    <span class="pl-s">"""Returns a function that is itself a higher-order function.</span>
<span class="pl-s"></span>
<span class="pl-s">    &gt;&gt;&gt; def add1(x):</span>
<span class="pl-s">    ...     return x + 1</span>
<span class="pl-s">    &gt;&gt;&gt; def times2(x):</span>
<span class="pl-s">    ...     return x * 2</span>
<span class="pl-s">    &gt;&gt;&gt; def add3(x):</span>
<span class="pl-s">    ...     return x + 3</span>
<span class="pl-s">    &gt;&gt;&gt; my_cycle = cycle(add1, times2, add3)</span>
<span class="pl-s">    &gt;&gt;&gt; identity = my_cycle(0)</span>
<span class="pl-s">    &gt;&gt;&gt; identity(5)</span>
<span class="pl-s">    5</span>
<span class="pl-s">    &gt;&gt;&gt; add_one_then_double = my_cycle(2)</span>
<span class="pl-s">    &gt;&gt;&gt; add_one_then_double(1)</span>
<span class="pl-s">    4</span>
<span class="pl-s">    &gt;&gt;&gt; do_all_functions = my_cycle(3)</span>
<span class="pl-s">    &gt;&gt;&gt; do_all_functions(2)</span>
<span class="pl-s">    9</span>
<span class="pl-s">    &gt;&gt;&gt; do_more_than_a_cycle = my_cycle(4)</span>
<span class="pl-s">    &gt;&gt;&gt; do_more_than_a_cycle(2)</span>
<span class="pl-s">    10</span>
<span class="pl-s">    &gt;&gt;&gt; do_two_cycles = my_cycle(6)</span>
<span class="pl-s">    &gt;&gt;&gt; do_two_cycles(1)</span>
<span class="pl-s">    19</span>
<span class="pl-s">    """</span>

    <span class="pl-k">def</span> <span class="pl-en">helper</span>(<span class="pl-s1">n</span>):
        <span class="pl-k">def</span> <span class="pl-en">inner_helper</span>(<span class="pl-s1">x</span>):
            <span class="pl-k">if</span> <span class="pl-s1">n</span> <span class="pl-c1">==</span> <span class="pl-c1">0</span>:
                <span class="pl-k">return</span> <span class="pl-s1">x</span>
            <span class="pl-s1">i</span> <span class="pl-c1">=</span> <span class="pl-c1">1</span>
            <span class="pl-s1">result</span> <span class="pl-c1">=</span> <span class="pl-s1">x</span>
            <span class="pl-k">while</span> <span class="pl-s1">i</span> <span class="pl-c1">&lt;=</span> <span class="pl-s1">n</span>:
                <span class="pl-k">if</span> <span class="pl-s1">i</span> <span class="pl-c1">%</span> <span class="pl-c1">3</span> <span class="pl-c1">==</span> <span class="pl-c1">1</span>:
                    <span class="pl-s1">result</span> <span class="pl-c1">=</span> <span class="pl-en">f1</span>(<span class="pl-s1">result</span>)
                <span class="pl-k">elif</span> <span class="pl-s1">i</span> <span class="pl-c1">%</span> <span class="pl-c1">3</span> <span class="pl-c1">==</span> <span class="pl-c1">2</span>:
                    <span class="pl-s1">result</span> <span class="pl-c1">=</span> <span class="pl-en">f2</span>(<span class="pl-s1">result</span>)
                <span class="pl-k">else</span>:
                    <span class="pl-s1">result</span> <span class="pl-c1">=</span> <span class="pl-en">f3</span>(<span class="pl-s1">result</span>)
                <span class="pl-s1">i</span> <span class="pl-c1">+=</span> <span class="pl-c1">1</span>
            <span class="pl-k">return</span> <span class="pl-s1">result</span>
        <span class="pl-k">return</span> <span class="pl-s1">inner_helper</span>
    <span class="pl-k">return</span> <span class="pl-s1">helper</span></pre></div>
<h2>lab03</h2>
<div class="highlight highlight-source-python"><pre class="notranslate"><span class="pl-v">LAB_SOURCE_FILE</span><span class="pl-c1">=</span><span class="pl-s1">__file__</span>


<span class="pl-k">def</span> <span class="pl-en">double_eights</span>(<span class="pl-s1">n</span>):
    <span class="pl-s">""" Returns whether or not n has two digits in row that</span>
<span class="pl-s">    are the number 8. Assume n has at least two digits in it.</span>
<span class="pl-s"></span>
<span class="pl-s">    &gt;&gt;&gt; double_eights(1288)</span>
<span class="pl-s">    True</span>
<span class="pl-s">    &gt;&gt;&gt; double_eights(880)</span>
<span class="pl-s">    True</span>
<span class="pl-s">    &gt;&gt;&gt; double_eights(538835)</span>
<span class="pl-s">    True</span>
<span class="pl-s">    &gt;&gt;&gt; double_eights(284682)</span>
<span class="pl-s">    False</span>
<span class="pl-s">    &gt;&gt;&gt; double_eights(588138)</span>
<span class="pl-s">    True</span>
<span class="pl-s">    &gt;&gt;&gt; double_eights(78)</span>
<span class="pl-s">    False</span>
<span class="pl-s">    &gt;&gt;&gt; from construct_check import check</span>
<span class="pl-s">    &gt;&gt;&gt; # ban iteration</span>
<span class="pl-s">    &gt;&gt;&gt; check(LAB_SOURCE_FILE, 'double_eights', ['While', 'For'])</span>
<span class="pl-s">    True</span>
<span class="pl-s">    """</span>
    <span class="pl-s1">last</span>, <span class="pl-s1">second_last</span> <span class="pl-c1">=</span> <span class="pl-s1">n</span> <span class="pl-c1">%</span> <span class="pl-c1">10</span>, <span class="pl-s1">n</span> <span class="pl-c1">//</span> <span class="pl-c1">10</span> <span class="pl-c1">%</span> <span class="pl-c1">10</span>
    <span class="pl-k">if</span> <span class="pl-s1">last</span> <span class="pl-c1">==</span> <span class="pl-c1">8</span> <span class="pl-c1">and</span> <span class="pl-s1">second_last</span> <span class="pl-c1">==</span> <span class="pl-c1">8</span>:
        <span class="pl-k">return</span> <span class="pl-c1">True</span>
    <span class="pl-k">elif</span> <span class="pl-s1">n</span> <span class="pl-c1">&lt;</span> <span class="pl-c1">100</span>:
        <span class="pl-k">return</span> <span class="pl-c1">False</span>
    <span class="pl-k">return</span> <span class="pl-en">double_eights</span>(<span class="pl-s1">n</span> <span class="pl-c1">//</span> <span class="pl-c1">10</span>)


<span class="pl-k">def</span> <span class="pl-en">make_onion</span>(<span class="pl-s1">f</span>, <span class="pl-s1">g</span>):
    <span class="pl-s">"""Return a function can_reach(x, y, limit) that returns</span>
<span class="pl-s">    whether some call expression containing only f, g, and x with</span>
<span class="pl-s">    up to limit calls will give the result y.</span>
<span class="pl-s"></span>
<span class="pl-s">    &gt;&gt;&gt; up = lambda x: x + 1</span>
<span class="pl-s">    &gt;&gt;&gt; double = lambda y: y * 2</span>
<span class="pl-s">    &gt;&gt;&gt; can_reach = make_onion(up, double)</span>
<span class="pl-s">    &gt;&gt;&gt; can_reach(5, 25, 4)      # 25 = up(double(double(up(5))))</span>
<span class="pl-s">    True</span>
<span class="pl-s">    &gt;&gt;&gt; can_reach(5, 25, 3)      # Not possible</span>
<span class="pl-s">    False</span>
<span class="pl-s">    &gt;&gt;&gt; can_reach(1, 1, 0)      # 1 = 1</span>
<span class="pl-s">    True</span>
<span class="pl-s">    &gt;&gt;&gt; add_ing = lambda x: x + "ing"</span>
<span class="pl-s">    &gt;&gt;&gt; add_end = lambda y: y + "end"</span>
<span class="pl-s">    &gt;&gt;&gt; can_reach_string = make_onion(add_ing, add_end)</span>
<span class="pl-s">    &gt;&gt;&gt; can_reach_string("cry", "crying", 1)      # "crying" = add_ing("cry")</span>
<span class="pl-s">    True</span>
<span class="pl-s">    &gt;&gt;&gt; can_reach_string("un", "unending", 3)     # "unending" = add_ing(add_end("un"))</span>
<span class="pl-s">    True</span>
<span class="pl-s">    &gt;&gt;&gt; can_reach_string("peach", "folding", 4)   # Not possible</span>
<span class="pl-s">    False</span>
<span class="pl-s">    """</span>
    <span class="pl-k">def</span> <span class="pl-en">can_reach</span>(<span class="pl-s1">x</span>, <span class="pl-s1">y</span>, <span class="pl-s1">limit</span>):
        <span class="pl-k">if</span> <span class="pl-s1">limit</span> <span class="pl-c1">&lt;</span> <span class="pl-c1">0</span>:
            <span class="pl-k">return</span> <span class="pl-c1">False</span>
        <span class="pl-k">elif</span> <span class="pl-s1">x</span> <span class="pl-c1">==</span> <span class="pl-s1">y</span>:
            <span class="pl-k">return</span> <span class="pl-c1">True</span>
        <span class="pl-k">else</span>:
            <span class="pl-k">return</span> <span class="pl-en">can_reach</span>(<span class="pl-en">f</span>(<span class="pl-s1">x</span>), <span class="pl-s1">y</span>, <span class="pl-s1">limit</span> <span class="pl-c1">-</span> <span class="pl-c1">1</span>) <span class="pl-c1">or</span> <span class="pl-en">can_reach</span>(<span class="pl-en">g</span>(<span class="pl-s1">x</span>), <span class="pl-s1">y</span>, <span class="pl-s1">limit</span> <span class="pl-c1">-</span> <span class="pl-c1">1</span>)
    <span class="pl-k">return</span> <span class="pl-s1">can_reach</span>


<span class="pl-k">def</span> <span class="pl-en">mario_number</span>(<span class="pl-s1">level</span>):
    <span class="pl-s">"""Return the number of ways that Mario can perform a sequence of steps</span>
<span class="pl-s">    or jumps to reach the end of the level without ever landing in a Piranha</span>
<span class="pl-s">    plant. Assume that every level begins and ends with a space.</span>
<span class="pl-s"></span>
<span class="pl-s">    &gt;&gt;&gt; mario_number(' P P ')   # jump, jump</span>
<span class="pl-s">    1</span>
<span class="pl-s">    &gt;&gt;&gt; mario_number(' P P  ')   # jump, jump, step</span>
<span class="pl-s">    1</span>
<span class="pl-s">    &gt;&gt;&gt; mario_number('  P P ')  # step, jump, jump</span>
<span class="pl-s">    1</span>
<span class="pl-s">    &gt;&gt;&gt; mario_number('   P P ') # step, step, jump, jump or jump, jump, jump</span>
<span class="pl-s">    2</span>
<span class="pl-s">    &gt;&gt;&gt; mario_number(' P PP ')  # Mario cannot jump two plants</span>
<span class="pl-s">    0</span>
<span class="pl-s">    &gt;&gt;&gt; mario_number('    ')    # step, jump ; jump, step ; step, step, step</span>
<span class="pl-s">    3</span>
<span class="pl-s">    &gt;&gt;&gt; mario_number('    P    ')</span>
<span class="pl-s">    9</span>
<span class="pl-s">    &gt;&gt;&gt; mario_number('   P    P P   P  P P    P     P ')</span>
<span class="pl-s">    180</span>
<span class="pl-s">    """</span>
    <span class="pl-s1">length</span> <span class="pl-c1">=</span> <span class="pl-en">len</span>(<span class="pl-s1">level</span>)
    <span class="pl-k">def</span> <span class="pl-en">helper</span>(<span class="pl-s1">i</span>):
        <span class="pl-k">if</span> <span class="pl-s1">i</span> <span class="pl-c1">==</span> <span class="pl-s1">length</span> <span class="pl-c1">-</span> <span class="pl-c1">1</span>:
            <span class="pl-k">return</span> <span class="pl-c1">1</span>
        <span class="pl-k">elif</span> <span class="pl-s1">i</span> <span class="pl-c1">==</span> <span class="pl-s1">length</span>:
            <span class="pl-k">return</span> <span class="pl-c1">0</span>
        <span class="pl-k">if</span> <span class="pl-s1">level</span>[<span class="pl-s1">i</span>] <span class="pl-c1">==</span> <span class="pl-s">'P'</span>:
            <span class="pl-k">return</span> <span class="pl-c1">0</span>
        <span class="pl-k">return</span> <span class="pl-en">helper</span>(<span class="pl-s1">i</span> <span class="pl-c1">+</span> <span class="pl-c1">1</span>) <span class="pl-c1">+</span> <span class="pl-en">helper</span>(<span class="pl-s1">i</span> <span class="pl-c1">+</span> <span class="pl-c1">2</span>)
    <span class="pl-k">return</span> <span class="pl-en">helper</span>(<span class="pl-c1">0</span>)

<span class="pl-k">def</span> <span class="pl-en">max_subseq</span>(<span class="pl-s1">n</span>, <span class="pl-s1">t</span>):
    <span class="pl-s">"""</span>
<span class="pl-s">    Return the maximum subsequence of length at most t that can be found in the given number n.</span>
<span class="pl-s">    For example, for n = 2012 and t = 2, we have that the subsequences are</span>
<span class="pl-s">        2</span>
<span class="pl-s">        0</span>
<span class="pl-s">        1</span>
<span class="pl-s">        2</span>
<span class="pl-s">        20</span>
<span class="pl-s">        21</span>
<span class="pl-s">        22</span>
<span class="pl-s">        01</span>
<span class="pl-s">        02</span>
<span class="pl-s">        12</span>
<span class="pl-s">    and of these, the maxumum number is 22, so our answer is 22.</span>
<span class="pl-s"></span>
<span class="pl-s">    &gt;&gt;&gt; max_subseq(2012, 2)</span>
<span class="pl-s">    22</span>
<span class="pl-s">    &gt;&gt;&gt; max_subseq(20125, 3)</span>
<span class="pl-s">    225</span>
<span class="pl-s">    &gt;&gt;&gt; max_subseq(20125, 5)</span>
<span class="pl-s">    20125</span>
<span class="pl-s">    &gt;&gt;&gt; max_subseq(20125, 6) # note that 20125 == 020125</span>
<span class="pl-s">    20125</span>
<span class="pl-s">    &gt;&gt;&gt; max_subseq(12345, 3)</span>
<span class="pl-s">    345</span>
<span class="pl-s">    &gt;&gt;&gt; max_subseq(12345, 0) # 0 is of length 0</span>
<span class="pl-s">    0</span>
<span class="pl-s">    &gt;&gt;&gt; max_subseq(12345, 1)</span>
<span class="pl-s">    5</span>
<span class="pl-s">    """</span>

    <span class="pl-k">if</span> <span class="pl-s1">t</span> <span class="pl-c1">==</span> <span class="pl-c1">0</span>:
        <span class="pl-k">return</span> <span class="pl-c1">0</span>
    <span class="pl-k">if</span> <span class="pl-s1">n</span> <span class="pl-c1">==</span> <span class="pl-c1">0</span>:
        <span class="pl-k">return</span> <span class="pl-c1">0</span>
    <span class="pl-k">return</span> <span class="pl-en">max</span>(<span class="pl-s1">n</span> <span class="pl-c1">%</span> <span class="pl-c1">10</span> <span class="pl-c1">+</span> <span class="pl-c1">10</span> <span class="pl-c1">*</span> <span class="pl-en">max_subseq</span>(<span class="pl-s1">n</span> <span class="pl-c1">//</span> <span class="pl-c1">10</span> ,<span class="pl-s1">t</span> <span class="pl-c1">-</span> <span class="pl-c1">1</span>), <span class="pl-en">max_subseq</span>(<span class="pl-s1">n</span> <span class="pl-c1">//</span> <span class="pl-c1">10</span> ,<span class="pl-s1">t</span>))
     
    
<span class="pl-k">def</span> <span class="pl-en">is_prime</span>(<span class="pl-s1">n</span>):
    <span class="pl-s">"""</span>
<span class="pl-s">    &gt;&gt;&gt; is_prime(7)</span>
<span class="pl-s">    True</span>
<span class="pl-s">    &gt;&gt;&gt; is_prime(10)</span>
<span class="pl-s">    False</span>
<span class="pl-s">    &gt;&gt;&gt; is_prime(1)</span>
<span class="pl-s">    False</span>
<span class="pl-s">    """</span>
    <span class="pl-k">assert</span> <span class="pl-s1">n</span> <span class="pl-c1">&gt;</span> <span class="pl-c1">0</span>, <span class="pl-s">"n must be larger than 0"</span>
    
    <span class="pl-k">if</span> <span class="pl-s1">n</span> <span class="pl-c1">==</span> <span class="pl-c1">1</span>:
        <span class="pl-k">return</span> <span class="pl-c1">False</span>

    <span class="pl-k">def</span> <span class="pl-en">helper</span>(<span class="pl-s1">i</span>):
        <span class="pl-k">if</span> <span class="pl-s1">i</span> <span class="pl-c1">==</span> <span class="pl-s1">n</span>:
            <span class="pl-k">return</span> <span class="pl-c1">True</span>
        <span class="pl-k">if</span> <span class="pl-s1">n</span> <span class="pl-c1">%</span> <span class="pl-s1">i</span> <span class="pl-c1">==</span> <span class="pl-c1">0</span>:
            <span class="pl-k">return</span> <span class="pl-c1">False</span>
        <span class="pl-k">return</span> <span class="pl-en">helper</span>(<span class="pl-s1">i</span> <span class="pl-c1">+</span> <span class="pl-c1">1</span>)

    <span class="pl-k">return</span> <span class="pl-en">helper</span>(<span class="pl-c1">2</span>)</pre></div>
<h2>lab04</h2>
<div class="highlight highlight-source-python"><pre class="notranslate"><span class="pl-v">LAB_SOURCE_FILE</span><span class="pl-c1">=</span><span class="pl-s1">__file__</span>


<span class="pl-k">def</span> <span class="pl-en">flatten</span>(<span class="pl-s1">s</span>):
    <span class="pl-s">"""Returns a flattened version of list s.</span>
<span class="pl-s"></span>
<span class="pl-s">    &gt;&gt;&gt; flatten([1, 2, 3])</span>
<span class="pl-s">    [1, 2, 3]</span>
<span class="pl-s">    &gt;&gt;&gt; deep = [1, [[2], 3], 4, [5, 6]]</span>
<span class="pl-s">    &gt;&gt;&gt; flatten(deep)</span>
<span class="pl-s">    [1, 2, 3, 4, 5, 6]</span>
<span class="pl-s">    &gt;&gt;&gt; deep                                # input list is unchanged</span>
<span class="pl-s">    [1, [[2], 3], 4, [5, 6]]</span>
<span class="pl-s">    &gt;&gt;&gt; very_deep = [['m', ['i', ['n', ['m', 'e', ['w', 't', ['a'], 't', 'i', 'o'], 'n']], 's']]]</span>
<span class="pl-s">    &gt;&gt;&gt; flatten(very_deep)</span>
<span class="pl-s">    ['m', 'i', 'n', 'm', 'e', 'w', 't', 'a', 't', 'i', 'o', 'n', 's']</span>
<span class="pl-s">    """</span>
    <span class="pl-k">if</span> <span class="pl-en">type</span>(<span class="pl-s1">s</span>) <span class="pl-c1">!=</span> <span class="pl-s1">list</span>:
      <span class="pl-k">return</span> [<span class="pl-s1">s</span>]
    <span class="pl-s1">lst</span> <span class="pl-c1">=</span> []
    <span class="pl-k">for</span> <span class="pl-s1">i</span> <span class="pl-c1">in</span> <span class="pl-s1">s</span>:
      <span class="pl-s1">lst</span> <span class="pl-c1">+=</span> <span class="pl-en">flatten</span>(<span class="pl-s1">i</span>)
    <span class="pl-k">return</span> <span class="pl-s1">lst</span>


<span class="pl-k">def</span> <span class="pl-en">merge</span>(<span class="pl-s1">s</span>, <span class="pl-s1">t</span>):
    <span class="pl-s">"""Merges two sorted lists.</span>
<span class="pl-s"></span>
<span class="pl-s">    &gt;&gt;&gt; s1 = [1, 3, 5]</span>
<span class="pl-s">    &gt;&gt;&gt; s2 = [2, 4, 6]</span>
<span class="pl-s">    &gt;&gt;&gt; merge(s1, s2)</span>
<span class="pl-s">    [1, 2, 3, 4, 5, 6]</span>
<span class="pl-s">    &gt;&gt;&gt; s1</span>
<span class="pl-s">    [1, 3, 5]</span>
<span class="pl-s">    &gt;&gt;&gt; s2</span>
<span class="pl-s">    [2, 4, 6]</span>
<span class="pl-s">    &gt;&gt;&gt; merge([], [2, 4, 6])</span>
<span class="pl-s">    [2, 4, 6]</span>
<span class="pl-s">    &gt;&gt;&gt; merge([1, 2, 3], [])</span>
<span class="pl-s">    [1, 2, 3]</span>
<span class="pl-s">    &gt;&gt;&gt; merge([5, 7], [2, 4, 6])</span>
<span class="pl-s">    [2, 4, 5, 6, 7]</span>
<span class="pl-s">    &gt;&gt;&gt; merge([2, 3, 4], [2, 4, 6])</span>
<span class="pl-s">    [2, 2, 3, 4, 4, 6]</span>
<span class="pl-s">    &gt;&gt;&gt; from construct_check import check</span>
<span class="pl-s">    &gt;&gt;&gt; check(LAB_SOURCE_FILE, 'merge', ['While', 'For'])    # ban iteration</span>
<span class="pl-s">    True</span>
<span class="pl-s">    """</span>
    <span class="pl-k">if</span> <span class="pl-en">len</span>(<span class="pl-s1">s</span>) <span class="pl-c1">==</span> <span class="pl-c1">0</span>:
      <span class="pl-k">return</span> <span class="pl-s1">t</span>[:]
    <span class="pl-k">elif</span> <span class="pl-en">len</span>(<span class="pl-s1">t</span>) <span class="pl-c1">==</span> <span class="pl-c1">0</span>:
      <span class="pl-k">return</span> <span class="pl-s1">s</span>[:]
    <span class="pl-s1">val</span> <span class="pl-c1">=</span> <span class="pl-en">min</span>(<span class="pl-s1">s</span>[<span class="pl-c1">0</span>], <span class="pl-s1">t</span>[<span class="pl-c1">0</span>])
    <span class="pl-k">if</span> (<span class="pl-s1">s</span>[<span class="pl-c1">0</span>] <span class="pl-c1">==</span> <span class="pl-s1">val</span>):
      <span class="pl-k">return</span> [<span class="pl-s1">val</span>] <span class="pl-c1">+</span> <span class="pl-en">merge</span>(<span class="pl-s1">s</span>[<span class="pl-c1">1</span>:], <span class="pl-s1">t</span>)
    <span class="pl-k">else</span>:
      <span class="pl-k">return</span> [<span class="pl-s1">val</span>] <span class="pl-c1">+</span> <span class="pl-en">merge</span>(<span class="pl-s1">s</span>, <span class="pl-s1">t</span>[<span class="pl-c1">1</span>:])

        



<span class="pl-k">def</span> <span class="pl-en">size_of_tree</span>(<span class="pl-s1">t</span>):
    <span class="pl-s">"""Return the number of entries in the tree.</span>
<span class="pl-s">    &gt;&gt;&gt; numbers = tree(1, [tree(2), tree(3, [tree(4), tree(5)]), tree(6, [tree(7)])])</span>
<span class="pl-s">    &gt;&gt;&gt; print_tree(numbers)</span>
<span class="pl-s">    1</span>
<span class="pl-s">      2</span>
<span class="pl-s">      3</span>
<span class="pl-s">        4</span>
<span class="pl-s">        5</span>
<span class="pl-s">      6</span>
<span class="pl-s">        7</span>
<span class="pl-s">    &gt;&gt;&gt; size_of_tree(numbers)</span>
<span class="pl-s">    7</span>
<span class="pl-s">    """</span>
    <span class="pl-k">if</span> <span class="pl-en">is_leaf</span>(<span class="pl-s1">t</span>):
      <span class="pl-k">return</span> <span class="pl-c1">1</span>
    <span class="pl-k">return</span> <span class="pl-c1">1</span> <span class="pl-c1">+</span> <span class="pl-en">sum</span>([<span class="pl-en">size_of_tree</span>(<span class="pl-s1">b</span>) <span class="pl-k">for</span> <span class="pl-s1">b</span> <span class="pl-c1">in</span> <span class="pl-en">branches</span>(<span class="pl-s1">t</span>)])


<span class="pl-k">def</span> <span class="pl-en">replace_loki_at_leaf</span>(<span class="pl-s1">t</span>, <span class="pl-s1">lokis_replacement</span>):
    <span class="pl-s">"""Returns a new tree where every leaf value equal to "loki" has</span>
<span class="pl-s">    been replaced with lokis_replacement.</span>
<span class="pl-s"></span>
<span class="pl-s">    &gt;&gt;&gt; yggdrasil = tree('odin',</span>
<span class="pl-s">    ...                  [tree('balder',</span>
<span class="pl-s">    ...                        [tree('loki'),</span>
<span class="pl-s">    ...                         tree('freya')]),</span>
<span class="pl-s">    ...                   tree('frigg',</span>
<span class="pl-s">    ...                        [tree('loki')]),</span>
<span class="pl-s">    ...                   tree('loki',</span>
<span class="pl-s">    ...                        [tree('sif'),</span>
<span class="pl-s">    ...                         tree('loki')]),</span>
<span class="pl-s">    ...                   tree('loki')])</span>
<span class="pl-s">    &gt;&gt;&gt; laerad = copy_tree(yggdrasil)    # copy yggdrasil for testing purposes</span>
<span class="pl-s">    &gt;&gt;&gt; print_tree(replace_loki_at_leaf(yggdrasil, 'freya'))</span>
<span class="pl-s">    odin</span>
<span class="pl-s">      balder</span>
<span class="pl-s">        freya</span>
<span class="pl-s">        freya</span>
<span class="pl-s">      frigg</span>
<span class="pl-s">        freya</span>
<span class="pl-s">      loki</span>
<span class="pl-s">        sif</span>
<span class="pl-s">        freya</span>
<span class="pl-s">      freya</span>
<span class="pl-s">    &gt;&gt;&gt; laerad == yggdrasil    # Make sure original tree is unmodified</span>
<span class="pl-s">    True</span>
<span class="pl-s">    """</span>
    <span class="pl-k">if</span> <span class="pl-en">is_leaf</span>(<span class="pl-s1">t</span>):
        <span class="pl-k">if</span> <span class="pl-en">label</span>(<span class="pl-s1">t</span>) <span class="pl-c1">==</span> <span class="pl-s">'loki'</span>:
            <span class="pl-k">return</span> <span class="pl-en">tree</span>(<span class="pl-s1">lokis_replacement</span>)
        <span class="pl-k">return</span> <span class="pl-en">tree</span>(<span class="pl-en">label</span>(<span class="pl-s1">t</span>))
    <span class="pl-k">return</span> <span class="pl-en">tree</span>(<span class="pl-en">label</span>(<span class="pl-s1">t</span>), [<span class="pl-en">replace_loki_at_leaf</span>(<span class="pl-s1">b</span>, <span class="pl-s1">lokis_replacement</span>) <span class="pl-k">for</span> <span class="pl-s1">b</span> <span class="pl-c1">in</span> <span class="pl-en">branches</span>(<span class="pl-s1">t</span>)])



<span class="pl-k">def</span> <span class="pl-en">divide</span>(<span class="pl-s1">quotients</span>, <span class="pl-s1">divisors</span>):
    <span class="pl-s">"""Return a dictonary in which each quotient q is a key for the list of</span>
<span class="pl-s">    divisors that it divides evenly.</span>
<span class="pl-s"></span>
<span class="pl-s">    &gt;&gt;&gt; divide([3, 4, 5], [8, 9, 10, 11, 12])</span>
<span class="pl-s">    {3: [9, 12], 4: [8, 12], 5: [10]}</span>
<span class="pl-s">    &gt;&gt;&gt; divide(range(1, 5), range(20, 25))</span>
<span class="pl-s">    {1: [20, 21, 22, 23, 24], 2: [20, 22, 24], 3: [21, 24], 4: [20, 24]}</span>
<span class="pl-s">    """</span>
    <span class="pl-k">return</span> {<span class="pl-s1">i</span>: [<span class="pl-s1">j</span> <span class="pl-k">for</span> <span class="pl-s1">j</span> <span class="pl-c1">in</span> <span class="pl-s1">divisors</span> <span class="pl-k">if</span> <span class="pl-s1">j</span> <span class="pl-c1">%</span> <span class="pl-s1">i</span> <span class="pl-c1">==</span> <span class="pl-c1">0</span>] <span class="pl-k">for</span> <span class="pl-s1">i</span> <span class="pl-c1">in</span> <span class="pl-s1">quotients</span>}




<span class="pl-c"># Tree Data Abstraction</span>

<span class="pl-k">def</span> <span class="pl-en">tree</span>(<span class="pl-s1">label</span>, <span class="pl-s1">branches</span><span class="pl-c1">=</span>[]):
    <span class="pl-s">"""Construct a tree with the given label value and a list of branches."""</span>
    <span class="pl-k">for</span> <span class="pl-s1">branch</span> <span class="pl-c1">in</span> <span class="pl-s1">branches</span>:
        <span class="pl-k">assert</span> <span class="pl-en">is_tree</span>(<span class="pl-s1">branch</span>), <span class="pl-s">'branches must be trees'</span>
    <span class="pl-k">return</span> [<span class="pl-s1">label</span>] <span class="pl-c1">+</span> <span class="pl-en">list</span>(<span class="pl-s1">branches</span>)

<span class="pl-k">def</span> <span class="pl-en">label</span>(<span class="pl-s1">tree</span>):
    <span class="pl-s">"""Return the label value of a tree."""</span>
    <span class="pl-k">return</span> <span class="pl-s1">tree</span>[<span class="pl-c1">0</span>]

<span class="pl-k">def</span> <span class="pl-en">branches</span>(<span class="pl-s1">tree</span>):
    <span class="pl-s">"""Return the list of branches of the given tree."""</span>
    <span class="pl-k">return</span> <span class="pl-s1">tree</span>[<span class="pl-c1">1</span>:]

<span class="pl-k">def</span> <span class="pl-en">is_tree</span>(<span class="pl-s1">tree</span>):
    <span class="pl-s">"""Returns True if the given tree is a tree, and False otherwise."""</span>
    <span class="pl-k">if</span> <span class="pl-en">type</span>(<span class="pl-s1">tree</span>) <span class="pl-c1">!=</span> <span class="pl-s1">list</span> <span class="pl-c1">or</span> <span class="pl-en">len</span>(<span class="pl-s1">tree</span>) <span class="pl-c1">&lt;</span> <span class="pl-c1">1</span>:
        <span class="pl-k">return</span> <span class="pl-c1">False</span>
    <span class="pl-k">for</span> <span class="pl-s1">branch</span> <span class="pl-c1">in</span> <span class="pl-en">branches</span>(<span class="pl-s1">tree</span>):
        <span class="pl-k">if</span> <span class="pl-c1">not</span> <span class="pl-en">is_tree</span>(<span class="pl-s1">branch</span>):
            <span class="pl-k">return</span> <span class="pl-c1">False</span>
    <span class="pl-k">return</span> <span class="pl-c1">True</span>

<span class="pl-k">def</span> <span class="pl-en">is_leaf</span>(<span class="pl-s1">tree</span>):
    <span class="pl-s">"""Returns True if the given tree's list of branches is empty, and False</span>
<span class="pl-s">    otherwise.</span>
<span class="pl-s">    """</span>
    <span class="pl-k">return</span> <span class="pl-c1">not</span> <span class="pl-en">branches</span>(<span class="pl-s1">tree</span>)

<span class="pl-k">def</span> <span class="pl-en">print_tree</span>(<span class="pl-s1">t</span>, <span class="pl-s1">indent</span><span class="pl-c1">=</span><span class="pl-c1">0</span>):
    <span class="pl-s">"""Print a representation of this tree in which each node is</span>
<span class="pl-s">    indented by two spaces times its depth from the root.</span>
<span class="pl-s"></span>
<span class="pl-s">    &gt;&gt;&gt; print_tree(tree(1))</span>
<span class="pl-s">    1</span>
<span class="pl-s">    &gt;&gt;&gt; print_tree(tree(1, [tree(2)]))</span>
<span class="pl-s">    1</span>
<span class="pl-s">      2</span>
<span class="pl-s">    &gt;&gt;&gt; numbers = tree(1, [tree(2), tree(3, [tree(4), tree(5)]), tree(6, [tree(7)])])</span>
<span class="pl-s">    &gt;&gt;&gt; print_tree(numbers)</span>
<span class="pl-s">    1</span>
<span class="pl-s">      2</span>
<span class="pl-s">      3</span>
<span class="pl-s">        4</span>
<span class="pl-s">        5</span>
<span class="pl-s">      6</span>
<span class="pl-s">        7</span>
<span class="pl-s">    """</span>
    <span class="pl-en">print</span>(<span class="pl-s">'  '</span> <span class="pl-c1">*</span> <span class="pl-s1">indent</span> <span class="pl-c1">+</span> <span class="pl-en">str</span>(<span class="pl-en">label</span>(<span class="pl-s1">t</span>)))
    <span class="pl-k">for</span> <span class="pl-s1">b</span> <span class="pl-c1">in</span> <span class="pl-en">branches</span>(<span class="pl-s1">t</span>):
        <span class="pl-en">print_tree</span>(<span class="pl-s1">b</span>, <span class="pl-s1">indent</span> <span class="pl-c1">+</span> <span class="pl-c1">1</span>)

<span class="pl-k">def</span> <span class="pl-en">copy_tree</span>(<span class="pl-s1">t</span>):
    <span class="pl-s">"""Returns a copy of t. Only for testing purposes.</span>
<span class="pl-s"></span>
<span class="pl-s">    &gt;&gt;&gt; t = tree(5)</span>
<span class="pl-s">    &gt;&gt;&gt; copy = copy_tree(t)</span>
<span class="pl-s">    &gt;&gt;&gt; t = tree(6)</span>
<span class="pl-s">    &gt;&gt;&gt; print_tree(copy)</span>
<span class="pl-s">    5</span>
<span class="pl-s">    """</span>
    <span class="pl-k">return</span> <span class="pl-en">tree</span>(<span class="pl-en">label</span>(<span class="pl-s1">t</span>), [<span class="pl-en">copy_tree</span>(<span class="pl-s1">b</span>) <span class="pl-k">for</span> <span class="pl-s1">b</span> <span class="pl-c1">in</span> <span class="pl-en">branches</span>(<span class="pl-s1">t</span>)])</pre></div>
<h2>lab05</h2>
<div class="highlight highlight-source-python"><pre class="notranslate"><span class="pl-k">def</span> <span class="pl-en">partial_reverse</span>(<span class="pl-s1">s</span>, <span class="pl-s1">start</span>):
    <span class="pl-s">"""Reverse part of a list in-place, starting with start up to the end of</span>
<span class="pl-s">    the list.</span>
<span class="pl-s"></span>
<span class="pl-s">    &gt;&gt;&gt; a = [1, 2, 3, 4, 5, 6, 7]</span>
<span class="pl-s">    &gt;&gt;&gt; partial_reverse(a, 2)</span>
<span class="pl-s">    &gt;&gt;&gt; a</span>
<span class="pl-s">    [1, 2, 7, 6, 5, 4, 3]</span>
<span class="pl-s">    &gt;&gt;&gt; partial_reverse(a, 5)</span>
<span class="pl-s">    &gt;&gt;&gt; a</span>
<span class="pl-s">    [1, 2, 7, 6, 5, 3, 4]</span>
<span class="pl-s">    """</span>
    <span class="pl-k">def</span> <span class="pl-en">helper</span>(<span class="pl-s1">i</span>):
        <span class="pl-k">if</span> <span class="pl-s1">i</span> <span class="pl-c1">&lt;</span> (<span class="pl-en">len</span>(<span class="pl-s1">s</span>) <span class="pl-c1">-</span> <span class="pl-s1">start</span>) <span class="pl-c1">//</span> <span class="pl-c1">2</span>:
            <span class="pl-s1">s</span>[<span class="pl-s1">start</span> <span class="pl-c1">+</span> <span class="pl-s1">i</span>], <span class="pl-s1">s</span>[<span class="pl-en">len</span>(<span class="pl-s1">s</span>) <span class="pl-c1">-</span> <span class="pl-s1">i</span> <span class="pl-c1">-</span> <span class="pl-c1">1</span>] <span class="pl-c1">=</span> <span class="pl-s1">s</span>[<span class="pl-en">len</span>(<span class="pl-s1">s</span>) <span class="pl-c1">-</span> <span class="pl-s1">i</span> <span class="pl-c1">-</span> <span class="pl-c1">1</span>], <span class="pl-s1">s</span>[<span class="pl-s1">start</span> <span class="pl-c1">+</span> <span class="pl-s1">i</span>]
            <span class="pl-en">helper</span>(<span class="pl-s1">i</span> <span class="pl-c1">+</span> <span class="pl-c1">1</span>)

    <span class="pl-k">return</span> <span class="pl-en">helper</span>(<span class="pl-c1">0</span>)




<span class="pl-k">def</span> <span class="pl-en">group_by</span>(<span class="pl-s1">s</span>, <span class="pl-s1">fn</span>):
    <span class="pl-s">"""Return a dictionary of lists that together contain the elements of s.</span>
<span class="pl-s">    The key for each list is the value that fn returns when called on any of the</span>
<span class="pl-s">    values of that list.</span>
<span class="pl-s"></span>
<span class="pl-s">    &gt;&gt;&gt; group_by([12, 23, 14, 45], lambda p: p // 10)</span>
<span class="pl-s">    {1: [12, 14], 2: [23], 4: [45]}</span>
<span class="pl-s">    &gt;&gt;&gt; group_by(range(-3, 4), lambda x: x * x)</span>
<span class="pl-s">    {9: [-3, 3], 4: [-2, 2], 1: [-1, 1], 0: [0]}</span>
<span class="pl-s">    """</span>
    <span class="pl-s1">grouped</span> <span class="pl-c1">=</span> {}
    <span class="pl-k">for</span> <span class="pl-s1">i</span> <span class="pl-c1">in</span> <span class="pl-s1">s</span>:
        <span class="pl-s1">key</span> <span class="pl-c1">=</span> <span class="pl-en">fn</span>(<span class="pl-s1">i</span>)
        <span class="pl-k">if</span> <span class="pl-s1">key</span> <span class="pl-c1">in</span> <span class="pl-s1">grouped</span>:
            <span class="pl-s1">grouped</span>[<span class="pl-s1">key</span>] <span class="pl-c1">+=</span> [<span class="pl-s1">i</span>]
        <span class="pl-k">else</span>:
            <span class="pl-s1">grouped</span>[<span class="pl-s1">key</span>] <span class="pl-c1">=</span> [<span class="pl-s1">i</span>]
    <span class="pl-k">return</span> <span class="pl-s1">grouped</span>


<span class="pl-k">from</span> <span class="pl-s1">math</span> <span class="pl-k">import</span> <span class="pl-s1">sqrt</span>

<span class="pl-k">def</span> <span class="pl-en">distance</span>(<span class="pl-s1">city_a</span>, <span class="pl-s1">city_b</span>):
    <span class="pl-s">"""</span>
<span class="pl-s">    &gt;&gt;&gt; city_a = make_city('city_a', 0, 1)</span>
<span class="pl-s">    &gt;&gt;&gt; city_b = make_city('city_b', 0, 2)</span>
<span class="pl-s">    &gt;&gt;&gt; distance(city_a, city_b)</span>
<span class="pl-s">    1.0</span>
<span class="pl-s">    &gt;&gt;&gt; city_c = make_city('city_c', 6.5, 12)</span>
<span class="pl-s">    &gt;&gt;&gt; city_d = make_city('city_d', 2.5, 15)</span>
<span class="pl-s">    &gt;&gt;&gt; distance(city_c, city_d)</span>
<span class="pl-s">    5.0</span>
<span class="pl-s">    """</span>
    <span class="pl-k">return</span> <span class="pl-en">sqrt</span>((<span class="pl-en">get_lat</span>(<span class="pl-s1">city_a</span>) <span class="pl-c1">-</span> <span class="pl-en">get_lat</span>(<span class="pl-s1">city_b</span>)) <span class="pl-c1">**</span> <span class="pl-c1">2</span> <span class="pl-c1">+</span> (<span class="pl-en">get_lon</span>(<span class="pl-s1">city_a</span>) <span class="pl-c1">-</span> <span class="pl-en">get_lon</span>(<span class="pl-s1">city_b</span>)) <span class="pl-c1">**</span> <span class="pl-c1">2</span>)

<span class="pl-k">def</span> <span class="pl-en">closer_city</span>(<span class="pl-s1">lat</span>, <span class="pl-s1">lon</span>, <span class="pl-s1">city_a</span>, <span class="pl-s1">city_b</span>):
    <span class="pl-s">"""</span>
<span class="pl-s">    Returns the name of either city_a or city_b, whichever is closest to</span>
<span class="pl-s">    coordinate (lat, lon). If the two cities are the same distance away</span>
<span class="pl-s">    from the coordinate, consider city_b to be the closer city.</span>
<span class="pl-s"></span>
<span class="pl-s">    &gt;&gt;&gt; berkeley = make_city('Berkeley', 37.87, 112.26)</span>
<span class="pl-s">    &gt;&gt;&gt; stanford = make_city('Stanford', 34.05, 118.25)</span>
<span class="pl-s">    &gt;&gt;&gt; closer_city(38.33, 121.44, berkeley, stanford)</span>
<span class="pl-s">    'Stanford'</span>
<span class="pl-s">    &gt;&gt;&gt; bucharest = make_city('Bucharest', 44.43, 26.10)</span>
<span class="pl-s">    &gt;&gt;&gt; vienna = make_city('Vienna', 48.20, 16.37)</span>
<span class="pl-s">    &gt;&gt;&gt; closer_city(41.29, 174.78, bucharest, vienna)</span>
<span class="pl-s">    'Bucharest'</span>
<span class="pl-s">    """</span>
    <span class="pl-s1">city_c</span> <span class="pl-c1">=</span>  <span class="pl-en">make_city</span>(<span class="pl-s">'city_c'</span>, <span class="pl-s1">lat</span>, <span class="pl-s1">lon</span>)
    <span class="pl-s1">distance_1</span> <span class="pl-c1">=</span> <span class="pl-en">distance</span>(<span class="pl-s1">city_a</span>, <span class="pl-s1">city_c</span>)
    <span class="pl-s1">distance_2</span> <span class="pl-c1">=</span> <span class="pl-en">distance</span>(<span class="pl-s1">city_b</span>, <span class="pl-s1">city_c</span>)

    <span class="pl-k">if</span> <span class="pl-s1">distance_1</span> <span class="pl-c1">&lt;</span> <span class="pl-s1">distance_2</span>:
        <span class="pl-k">return</span> <span class="pl-en">get_name</span>(<span class="pl-s1">city_a</span>)    
    <span class="pl-k">return</span> <span class="pl-en">get_name</span>(<span class="pl-s1">city_b</span>)    


<span class="pl-k">def</span> <span class="pl-en">check_city_abstraction</span>():
    <span class="pl-s">"""</span>
<span class="pl-s">    There's nothing for you to do for this function, it's just here for the extra doctest</span>
<span class="pl-s">    &gt;&gt;&gt; change_abstraction(True)</span>
<span class="pl-s">    &gt;&gt;&gt; city_a = make_city('city_a', 0, 1)</span>
<span class="pl-s">    &gt;&gt;&gt; city_b = make_city('city_b', 0, 2)</span>
<span class="pl-s">    &gt;&gt;&gt; distance(city_a, city_b)</span>
<span class="pl-s">    1.0</span>
<span class="pl-s">    &gt;&gt;&gt; city_c = make_city('city_c', 6.5, 12)</span>
<span class="pl-s">    &gt;&gt;&gt; city_d = make_city('city_d', 2.5, 15)</span>
<span class="pl-s">    &gt;&gt;&gt; distance(city_c, city_d)</span>
<span class="pl-s">    5.0</span>
<span class="pl-s">    &gt;&gt;&gt; berkeley = make_city('Berkeley', 37.87, 112.26)</span>
<span class="pl-s">    &gt;&gt;&gt; stanford = make_city('Stanford', 34.05, 118.25)</span>
<span class="pl-s">    &gt;&gt;&gt; closer_city(38.33, 121.44, berkeley, stanford)</span>
<span class="pl-s">    'Stanford'</span>
<span class="pl-s">    &gt;&gt;&gt; bucharest = make_city('Bucharest', 44.43, 26.10)</span>
<span class="pl-s">    &gt;&gt;&gt; vienna = make_city('Vienna', 48.20, 16.37)</span>
<span class="pl-s">    &gt;&gt;&gt; closer_city(41.29, 174.78, bucharest, vienna)</span>
<span class="pl-s">    'Bucharest'</span>
<span class="pl-s">    &gt;&gt;&gt; change_abstraction(False)</span>
<span class="pl-s">    """</span>

<span class="pl-c"># Treat all the following code as being behind an abstraction layer,</span>
<span class="pl-c"># you shouldn't need to look at it.</span>
<span class="pl-k">def</span> <span class="pl-en">make_city</span>(<span class="pl-s1">name</span>, <span class="pl-s1">lat</span>, <span class="pl-s1">lon</span>):
    <span class="pl-s">"""</span>
<span class="pl-s">    &gt;&gt;&gt; city = make_city('Berkeley', 0, 1)</span>
<span class="pl-s">    &gt;&gt;&gt; get_name(city)</span>
<span class="pl-s">    'Berkeley'</span>
<span class="pl-s">    &gt;&gt;&gt; get_lat(city)</span>
<span class="pl-s">    0</span>
<span class="pl-s">    &gt;&gt;&gt; get_lon(city)</span>
<span class="pl-s">    1</span>
<span class="pl-s">    """</span>
    <span class="pl-k">if</span> <span class="pl-s1">change_abstraction</span>.<span class="pl-s1">changed</span>:
        <span class="pl-k">return</span> {<span class="pl-s">"name"</span> : <span class="pl-s1">name</span>, <span class="pl-s">"lat"</span> : <span class="pl-s1">lat</span>, <span class="pl-s">"lon"</span> : <span class="pl-s1">lon</span>}
    <span class="pl-k">else</span>:
        <span class="pl-k">return</span> [<span class="pl-s1">name</span>, <span class="pl-s1">lat</span>, <span class="pl-s1">lon</span>]

<span class="pl-k">def</span> <span class="pl-en">get_name</span>(<span class="pl-s1">city</span>):
    <span class="pl-s">"""</span>
<span class="pl-s">    &gt;&gt;&gt; city = make_city('Berkeley', 0, 1)</span>
<span class="pl-s">    &gt;&gt;&gt; get_name(city)</span>
<span class="pl-s">    'Berkeley'</span>
<span class="pl-s">    """</span>
    <span class="pl-k">if</span> <span class="pl-s1">change_abstraction</span>.<span class="pl-s1">changed</span>:
        <span class="pl-k">return</span> <span class="pl-s1">city</span>[<span class="pl-s">"name"</span>]
    <span class="pl-k">else</span>:
        <span class="pl-k">return</span> <span class="pl-s1">city</span>[<span class="pl-c1">0</span>]

<span class="pl-k">def</span> <span class="pl-en">get_lat</span>(<span class="pl-s1">city</span>):
    <span class="pl-s">"""</span>
<span class="pl-s">    &gt;&gt;&gt; city = make_city('Berkeley', 0, 1)</span>
<span class="pl-s">    &gt;&gt;&gt; get_lat(city)</span>
<span class="pl-s">    0</span>
<span class="pl-s">    """</span>
    <span class="pl-k">if</span> <span class="pl-s1">change_abstraction</span>.<span class="pl-s1">changed</span>:
        <span class="pl-k">return</span> <span class="pl-s1">city</span>[<span class="pl-s">"lat"</span>]
    <span class="pl-k">else</span>:
        <span class="pl-k">return</span> <span class="pl-s1">city</span>[<span class="pl-c1">1</span>]

<span class="pl-k">def</span> <span class="pl-en">get_lon</span>(<span class="pl-s1">city</span>):
    <span class="pl-s">"""</span>
<span class="pl-s">    &gt;&gt;&gt; city = make_city('Berkeley', 0, 1)</span>
<span class="pl-s">    &gt;&gt;&gt; get_lon(city)</span>
<span class="pl-s">    1</span>
<span class="pl-s">    """</span>
    <span class="pl-k">if</span> <span class="pl-s1">change_abstraction</span>.<span class="pl-s1">changed</span>:
        <span class="pl-k">return</span> <span class="pl-s1">city</span>[<span class="pl-s">"lon"</span>]
    <span class="pl-k">else</span>:
        <span class="pl-k">return</span> <span class="pl-s1">city</span>[<span class="pl-c1">2</span>]

<span class="pl-c">###############</span>


<span class="pl-k">def</span> <span class="pl-en">change_abstraction</span>(<span class="pl-s1">change</span>):
    <span class="pl-s">"""</span>
<span class="pl-s">    For testing purposes.</span>
<span class="pl-s">    &gt;&gt;&gt; change_abstraction(True)</span>
<span class="pl-s">    &gt;&gt;&gt; change_abstraction.changed</span>
<span class="pl-s">    True</span>
<span class="pl-s">    """</span>
    <span class="pl-s1">change_abstraction</span>.<span class="pl-s1">changed</span> <span class="pl-c1">=</span> <span class="pl-s1">change</span>

<span class="pl-s1">change_abstraction</span>.<span class="pl-s1">changed</span> <span class="pl-c1">=</span> <span class="pl-c1">False</span></pre></div>
<h2>lab06</h2>
<div class="highlight highlight-source-python"><pre class="notranslate"><span class="pl-k">def</span> <span class="pl-en">count_occurrences</span>(<span class="pl-s1">t</span>, <span class="pl-s1">n</span>, <span class="pl-s1">x</span>):
    <span class="pl-s">"""Return the number of times that x is equal to one of the</span>
<span class="pl-s">    first n elements of iterator t.</span>
<span class="pl-s"></span>
<span class="pl-s">    &gt;&gt;&gt; s = iter([10, 9, 10, 9, 9, 10, 8, 8, 8, 7])</span>
<span class="pl-s">    &gt;&gt;&gt; count_occurrences(s, 10, 9)</span>
<span class="pl-s">    3</span>
<span class="pl-s">    &gt;&gt;&gt; t = iter([10, 9, 10, 9, 9, 10, 8, 8, 8, 7])</span>
<span class="pl-s">    &gt;&gt;&gt; count_occurrences(t, 3, 10)</span>
<span class="pl-s">    2</span>
<span class="pl-s">    &gt;&gt;&gt; u = iter([3, 2, 2, 2, 1, 2, 1, 4, 4, 5, 5, 5])</span>
<span class="pl-s">    &gt;&gt;&gt; count_occurrences(u, 1, 3)  # Only iterate over 3</span>
<span class="pl-s">    1</span>
<span class="pl-s">    &gt;&gt;&gt; count_occurrences(u, 3, 2)  # Only iterate over 2, 2, 2</span>
<span class="pl-s">    3</span>
<span class="pl-s">    &gt;&gt;&gt; list(u)                     # Ensure that the iterator has advanced the right amount</span>
<span class="pl-s">    [1, 2, 1, 4, 4, 5, 5, 5]</span>
<span class="pl-s">    &gt;&gt;&gt; v = iter([4, 1, 6, 6, 7, 7, 6, 6, 2, 2, 2, 5])</span>
<span class="pl-s">    &gt;&gt;&gt; count_occurrences(v, 6, 6)</span>
<span class="pl-s">    2</span>
<span class="pl-s">    """</span>
    <span class="pl-s1">total</span> <span class="pl-c1">=</span> <span class="pl-c1">0</span>
    <span class="pl-k">for</span> <span class="pl-s1">i</span> <span class="pl-c1">in</span> <span class="pl-en">range</span>(<span class="pl-s1">n</span>):
        <span class="pl-s1">y</span> <span class="pl-c1">=</span> <span class="pl-en">next</span>(<span class="pl-s1">t</span>)
        <span class="pl-k">if</span> <span class="pl-s1">x</span> <span class="pl-c1">==</span> <span class="pl-s1">y</span>:
            <span class="pl-s1">total</span> <span class="pl-c1">+=</span> <span class="pl-c1">1</span>
    <span class="pl-k">return</span> <span class="pl-s1">total</span>



<span class="pl-k">def</span> <span class="pl-en">hailstone</span>(<span class="pl-s1">n</span>):
    <span class="pl-s">"""Yields the elements of the hailstone sequence starting at n.</span>
<span class="pl-s"></span>
<span class="pl-s">    &gt;&gt;&gt; for num in hailstone(10):</span>
<span class="pl-s">    ...     print(num)</span>
<span class="pl-s">    10</span>
<span class="pl-s">    5</span>
<span class="pl-s">    16</span>
<span class="pl-s">    8</span>
<span class="pl-s">    4</span>
<span class="pl-s">    2</span>
<span class="pl-s">    1</span>
<span class="pl-s">    """</span>
    <span class="pl-k">yield</span> <span class="pl-s1">n</span>
    <span class="pl-k">if</span> <span class="pl-s1">n</span> <span class="pl-c1">==</span> <span class="pl-c1">1</span>:
        <span class="pl-k">return</span> <span class="pl-c1">None</span>
    <span class="pl-k">if</span> <span class="pl-s1">n</span> <span class="pl-c1">%</span> <span class="pl-c1">2</span> <span class="pl-c1">==</span> <span class="pl-c1">0</span>:
        <span class="pl-k">yield</span> <span class="pl-k">from</span> <span class="pl-en">hailstone</span>(<span class="pl-s1">n</span> <span class="pl-c1">//</span> <span class="pl-c1">2</span>)
    <span class="pl-k">else</span>:
        <span class="pl-k">yield</span> <span class="pl-k">from</span> <span class="pl-en">hailstone</span>(<span class="pl-s1">n</span> <span class="pl-c1">*</span> <span class="pl-c1">3</span> <span class="pl-c1">+</span> <span class="pl-c1">1</span>)


<span class="pl-k">def</span> <span class="pl-en">merge</span>(<span class="pl-s1">incr_a</span>, <span class="pl-s1">incr_b</span>):
    <span class="pl-s">"""Yield the elements of strictly increasing iterables incr_a and incr_b, removing</span>
<span class="pl-s">    repeats. Assume that incr_a and incr_b have no repeats. incr_a or incr_b may or may not</span>
<span class="pl-s">    be infinite sequences.</span>
<span class="pl-s"></span>
<span class="pl-s">    &gt;&gt;&gt; m = merge([0, 2, 4, 6, 8, 10, 12, 14], [0, 3, 6, 9, 12, 15])</span>
<span class="pl-s">    &gt;&gt;&gt; type(m)</span>
<span class="pl-s">    &lt;class 'generator'&gt;</span>
<span class="pl-s">    &gt;&gt;&gt; list(m)</span>
<span class="pl-s">    [0, 2, 3, 4, 6, 8, 9, 10, 12, 14, 15]</span>
<span class="pl-s">    &gt;&gt;&gt; def big(n):</span>
<span class="pl-s">    ...    k = 0</span>
<span class="pl-s">    ...    while True: yield k; k += n</span>
<span class="pl-s">    &gt;&gt;&gt; m = merge(big(2), big(3))</span>
<span class="pl-s">    &gt;&gt;&gt; [next(m) for _ in range(11)]</span>
<span class="pl-s">    [0, 2, 3, 4, 6, 8, 9, 10, 12, 14, 15]</span>
<span class="pl-s">    """</span>
    <span class="pl-s1">iter_a</span>, <span class="pl-s1">iter_b</span> <span class="pl-c1">=</span> <span class="pl-en">iter</span>(<span class="pl-s1">incr_a</span>), <span class="pl-en">iter</span>(<span class="pl-s1">incr_b</span>)
    <span class="pl-s1">next_a</span>, <span class="pl-s1">next_b</span> <span class="pl-c1">=</span> <span class="pl-en">next</span>(<span class="pl-s1">iter_a</span>, <span class="pl-c1">None</span>), <span class="pl-en">next</span>(<span class="pl-s1">iter_b</span>, <span class="pl-c1">None</span>)

    <span class="pl-k">if</span> <span class="pl-s1">next_a</span> <span class="pl-c1">==</span> <span class="pl-c1">None</span> <span class="pl-c1">and</span> <span class="pl-s1">next_b</span> <span class="pl-c1">==</span> <span class="pl-c1">None</span>:
        <span class="pl-k">yield</span> <span class="pl-c1">None</span>
    <span class="pl-k">elif</span> <span class="pl-s1">next_b</span> <span class="pl-c1">==</span> <span class="pl-c1">None</span>:
        <span class="pl-k">yield</span> <span class="pl-s1">next_a</span>
        <span class="pl-k">yield</span> <span class="pl-k">from</span> <span class="pl-s1">iter_a</span>
    <span class="pl-k">elif</span> <span class="pl-s1">next_a</span> <span class="pl-c1">==</span> <span class="pl-c1">None</span>:
        <span class="pl-k">yield</span> <span class="pl-s1">next_b</span>
        <span class="pl-k">yield</span> <span class="pl-k">from</span> <span class="pl-s1">iter_b</span>
    <span class="pl-k">else</span>:
        <span class="pl-k">if</span> <span class="pl-s1">next_a</span> <span class="pl-c1">==</span> <span class="pl-s1">next_b</span>:
            <span class="pl-k">yield</span> <span class="pl-s1">next_a</span>
            <span class="pl-k">yield</span> <span class="pl-k">from</span> <span class="pl-en">merge</span>(<span class="pl-s1">iter_a</span>, <span class="pl-s1">iter_b</span>)
        <span class="pl-k">elif</span> <span class="pl-s1">next_a</span> <span class="pl-c1">&lt;</span> <span class="pl-s1">next_b</span>:
            <span class="pl-k">yield</span> <span class="pl-s1">next_a</span>
            <span class="pl-k">yield</span> <span class="pl-k">from</span> <span class="pl-en">merge</span>(<span class="pl-s1">iter_a</span>, <span class="pl-en">merge</span>([<span class="pl-s1">next_b</span>], <span class="pl-s1">iter_b</span>))
        <span class="pl-k">else</span>:
            <span class="pl-k">yield</span> <span class="pl-s1">next_b</span>
            <span class="pl-k">yield</span> <span class="pl-k">from</span> <span class="pl-en">merge</span>(<span class="pl-en">merge</span>([<span class="pl-s1">next_a</span>], <span class="pl-s1">iter_a</span>), <span class="pl-s1">iter_b</span>)

<span class="pl-k">def</span> <span class="pl-en">deep_map</span>(<span class="pl-s1">f</span>, <span class="pl-s1">s</span>):
    <span class="pl-s">"""Replace all non-list elements x with f(x) in the nested list s.</span>
<span class="pl-s"></span>
<span class="pl-s">    &gt;&gt;&gt; six = [1, 2, [3, [4], 5], 6]</span>
<span class="pl-s">    &gt;&gt;&gt; deep_map(lambda x: x * x, six)</span>
<span class="pl-s">    &gt;&gt;&gt; six</span>
<span class="pl-s">    [1, 4, [9, [16], 25], 36]</span>
<span class="pl-s">    &gt;&gt;&gt; # Check that you're not making new lists</span>
<span class="pl-s">    &gt;&gt;&gt; s = [3, [1, [4, [1]]]]</span>
<span class="pl-s">    &gt;&gt;&gt; s1 = s[1]</span>
<span class="pl-s">    &gt;&gt;&gt; s2 = s1[1]</span>
<span class="pl-s">    &gt;&gt;&gt; s3 = s2[1]</span>
<span class="pl-s">    &gt;&gt;&gt; deep_map(lambda x: x + 1, s)</span>
<span class="pl-s">    &gt;&gt;&gt; s</span>
<span class="pl-s">    [4, [2, [5, [2]]]]</span>
<span class="pl-s">    &gt;&gt;&gt; s1 is s[1]</span>
<span class="pl-s">    True</span>
<span class="pl-s">    &gt;&gt;&gt; s2 is s1[1]</span>
<span class="pl-s">    True</span>
<span class="pl-s">    &gt;&gt;&gt; s3 is s2[1]</span>
<span class="pl-s">    True</span>
<span class="pl-s">    """</span>
    <span class="pl-k">for</span> <span class="pl-s1">i</span> <span class="pl-c1">in</span> <span class="pl-en">range</span>(<span class="pl-en">len</span>(<span class="pl-s1">s</span>)):
        <span class="pl-k">if</span> <span class="pl-en">isinstance</span>(<span class="pl-s1">s</span>[<span class="pl-s1">i</span>], <span class="pl-s1">list</span>):
            <span class="pl-en">deep_map</span>(<span class="pl-s1">f</span>, <span class="pl-s1">s</span>[<span class="pl-s1">i</span>])
        <span class="pl-k">else</span>:
            <span class="pl-s1">s</span>[<span class="pl-s1">i</span>] <span class="pl-c1">=</span> <span class="pl-en">f</span>(<span class="pl-s1">s</span>[<span class="pl-s1">i</span>])



<span class="pl-k">def</span> <span class="pl-en">buy</span>(<span class="pl-s1">required_fruits</span>, <span class="pl-s1">prices</span>, <span class="pl-s1">total_amount</span>):
    <span class="pl-s">"""Print ways to buy some of each fruit so that the sum of prices is amount.</span>
<span class="pl-s"></span>
<span class="pl-s">    &gt;&gt;&gt; prices = {'oranges': 4, 'apples': 3, 'bananas': 2, 'kiwis': 9}</span>
<span class="pl-s">    &gt;&gt;&gt; buy(['apples', 'oranges', 'bananas'], prices, 12)</span>
<span class="pl-s">    [2 apples][1 orange][1 banana]</span>
<span class="pl-s">    &gt;&gt;&gt; buy(['apples', 'oranges', 'bananas'], prices, 16)</span>
<span class="pl-s">    [2 apples][1 orange][3 bananas]</span>
<span class="pl-s">    [2 apples][2 oranges][1 banana]</span>
<span class="pl-s">    &gt;&gt;&gt; buy(['apples', 'kiwis'], prices, 36)</span>
<span class="pl-s">    [3 apples][3 kiwis]</span>
<span class="pl-s">    [6 apples][2 kiwis]</span>
<span class="pl-s">    [9 apples][1 kiwi]</span>
<span class="pl-s">    """</span>
    <span class="pl-k">def</span> <span class="pl-en">add</span>(<span class="pl-s1">fruits</span>, <span class="pl-s1">amount</span>, <span class="pl-s1">cart</span>):
        <span class="pl-k">if</span> <span class="pl-s1">fruits</span> <span class="pl-c1">==</span> [] <span class="pl-c1">and</span> <span class="pl-s1">amount</span> <span class="pl-c1">==</span> <span class="pl-c1">0</span>:
            <span class="pl-en">print</span>(<span class="pl-s1">cart</span>)
        <span class="pl-k">elif</span> <span class="pl-s1">fruits</span> <span class="pl-c1">and</span> <span class="pl-s1">amount</span> <span class="pl-c1">&gt;</span> <span class="pl-c1">0</span>:
            <span class="pl-s1">fruit</span> <span class="pl-c1">=</span> <span class="pl-s1">fruits</span>[<span class="pl-c1">0</span>]
            <span class="pl-s1">price</span> <span class="pl-c1">=</span> <span class="pl-s1">prices</span>[<span class="pl-s1">fruit</span>]
            <span class="pl-k">for</span> <span class="pl-s1">k</span> <span class="pl-c1">in</span> <span class="pl-en">range</span>(<span class="pl-c1">1</span>, <span class="pl-s1">amount</span> <span class="pl-c1">//</span> <span class="pl-s1">price</span> <span class="pl-c1">+</span> <span class="pl-c1">1</span>):
                <span class="pl-en">add</span>(<span class="pl-s1">fruits</span>[<span class="pl-c1">1</span>:], <span class="pl-s1">amount</span> <span class="pl-c1">-</span> <span class="pl-s1">k</span> <span class="pl-c1">*</span> <span class="pl-s1">price</span>, <span class="pl-s1">cart</span> <span class="pl-c1">+</span> <span class="pl-en">display</span>(<span class="pl-s1">fruit</span>, <span class="pl-s1">k</span>))
    <span class="pl-en">add</span>(<span class="pl-s1">required_fruits</span>, <span class="pl-s1">total_amount</span>, <span class="pl-s">''</span>)


<span class="pl-k">def</span> <span class="pl-en">display</span>(<span class="pl-s1">fruit</span>, <span class="pl-s1">count</span>):
    <span class="pl-s">"""Display a count of a fruit in square brackets.</span>
<span class="pl-s"></span>
<span class="pl-s">    &gt;&gt;&gt; display('apples', 3)</span>
<span class="pl-s">    '[3 apples]'</span>
<span class="pl-s">    &gt;&gt;&gt; display('apples', 1)</span>
<span class="pl-s">    '[1 apple]'</span>
<span class="pl-s">    """</span>
    <span class="pl-k">assert</span> <span class="pl-s1">count</span> <span class="pl-c1">&gt;=</span> <span class="pl-c1">1</span> <span class="pl-c1">and</span> <span class="pl-s1">fruit</span>[<span class="pl-c1">-</span><span class="pl-c1">1</span>] <span class="pl-c1">==</span> <span class="pl-s">'s'</span>
    <span class="pl-k">if</span> <span class="pl-s1">count</span> <span class="pl-c1">==</span> <span class="pl-c1">1</span>:
        <span class="pl-s1">fruit</span> <span class="pl-c1">=</span> <span class="pl-s1">fruit</span>[:<span class="pl-c1">-</span><span class="pl-c1">1</span>]  <span class="pl-c"># get rid of the plural s</span>
    <span class="pl-k">return</span> <span class="pl-s">'['</span> <span class="pl-c1">+</span> <span class="pl-en">str</span>(<span class="pl-s1">count</span>) <span class="pl-c1">+</span> <span class="pl-s">' '</span> <span class="pl-c1">+</span> <span class="pl-s1">fruit</span> <span class="pl-c1">+</span> <span class="pl-s">']'</span></pre></div>
<h2>lab07</h2>
<div class="highlight highlight-source-python"><pre class="notranslate"><span class="pl-s1">passphrase</span> <span class="pl-c1">=</span> <span class="pl-s">'REPLACE_THIS_WITH_PASSPHRASE'</span>

<span class="pl-k">def</span> <span class="pl-en">midsem_survey</span>(<span class="pl-s1">p</span>):
    <span class="pl-s">"""</span>
<span class="pl-s">    You do not need to understand this code.</span>
<span class="pl-s">    &gt;&gt;&gt; midsem_survey(passphrase)</span>
<span class="pl-s">    'c20d4e5854c4c9cdfd14626aad39bd5a1e2ed9bb30dca56d5643a3ad'</span>
<span class="pl-s">    """</span>
    <span class="pl-k">import</span> <span class="pl-s1">hashlib</span>
    <span class="pl-k">return</span> <span class="pl-s1">hashlib</span>.<span class="pl-en">sha224</span>(<span class="pl-s1">p</span>.<span class="pl-en">encode</span>(<span class="pl-s">'utf-8'</span>)).<span class="pl-en">hexdigest</span>()
    

<span class="pl-k">class</span> <span class="pl-v">Account</span>:
    <span class="pl-s">"""An account has a balance and a holder.</span>
<span class="pl-s">    &gt;&gt;&gt; a = Account('John')</span>
<span class="pl-s">    &gt;&gt;&gt; a.deposit(10)</span>
<span class="pl-s">    10</span>
<span class="pl-s">    &gt;&gt;&gt; a.balance</span>
<span class="pl-s">    10</span>
<span class="pl-s">    &gt;&gt;&gt; a.interest</span>
<span class="pl-s">    0.02</span>
<span class="pl-s">    &gt;&gt;&gt; a.time_to_retire(10.25)  # 10 -&gt; 10.2 -&gt; 10.404</span>
<span class="pl-s">    2</span>
<span class="pl-s">    &gt;&gt;&gt; a.balance                # Calling time_to_retire method should not change the balance</span>
<span class="pl-s">    10</span>
<span class="pl-s">    &gt;&gt;&gt; a.time_to_retire(11)     # 10 -&gt; 10.2 -&gt; ... -&gt; 11.040808032</span>
<span class="pl-s">    5</span>
<span class="pl-s">    &gt;&gt;&gt; a.time_to_retire(100)</span>
<span class="pl-s">    117</span>
<span class="pl-s">    """</span>
    <span class="pl-s1">max_withdrawal</span> <span class="pl-c1">=</span> <span class="pl-c1">10</span>
    <span class="pl-s1">interest</span> <span class="pl-c1">=</span> <span class="pl-c1">0.02</span>

    <span class="pl-k">def</span> <span class="pl-en">__init__</span>(<span class="pl-s1">self</span>, <span class="pl-s1">account_holder</span>):
        <span class="pl-s1">self</span>.<span class="pl-s1">balance</span> <span class="pl-c1">=</span> <span class="pl-c1">0</span>
        <span class="pl-s1">self</span>.<span class="pl-s1">holder</span> <span class="pl-c1">=</span> <span class="pl-s1">account_holder</span>

    <span class="pl-k">def</span> <span class="pl-en">deposit</span>(<span class="pl-s1">self</span>, <span class="pl-s1">amount</span>):
        <span class="pl-s1">self</span>.<span class="pl-s1">balance</span> <span class="pl-c1">=</span> <span class="pl-s1">self</span>.<span class="pl-s1">balance</span> <span class="pl-c1">+</span> <span class="pl-s1">amount</span>
        <span class="pl-k">return</span> <span class="pl-s1">self</span>.<span class="pl-s1">balance</span>

    <span class="pl-k">def</span> <span class="pl-en">withdraw</span>(<span class="pl-s1">self</span>, <span class="pl-s1">amount</span>):
        <span class="pl-k">if</span> <span class="pl-s1">amount</span> <span class="pl-c1">&gt;</span> <span class="pl-s1">self</span>.<span class="pl-s1">balance</span>:
            <span class="pl-k">return</span> <span class="pl-s">"Insufficient funds"</span>
        <span class="pl-k">if</span> <span class="pl-s1">amount</span> <span class="pl-c1">&gt;</span> <span class="pl-s1">self</span>.<span class="pl-s1">max_withdrawal</span>:
            <span class="pl-k">return</span> <span class="pl-s">"Can't withdraw that amount"</span>
        <span class="pl-s1">self</span>.<span class="pl-s1">balance</span> <span class="pl-c1">=</span> <span class="pl-s1">self</span>.<span class="pl-s1">balance</span> <span class="pl-c1">-</span> <span class="pl-s1">amount</span>
        <span class="pl-k">return</span> <span class="pl-s1">self</span>.<span class="pl-s1">balance</span>

    <span class="pl-k">def</span> <span class="pl-en">time_to_retire</span>(<span class="pl-s1">self</span>, <span class="pl-s1">amount</span>):
        <span class="pl-s">"""Return the number of years until balance would grow to amount."""</span>
        <span class="pl-k">assert</span> <span class="pl-s1">self</span>.<span class="pl-s1">balance</span> <span class="pl-c1">&gt;</span> <span class="pl-c1">0</span> <span class="pl-c1">and</span> <span class="pl-s1">amount</span> <span class="pl-c1">&gt;</span> <span class="pl-c1">0</span> <span class="pl-c1">and</span> <span class="pl-s1">self</span>.<span class="pl-s1">interest</span> <span class="pl-c1">&gt;</span> <span class="pl-c1">0</span>
        <span class="pl-s">"*** YOUR CODE HERE ***"</span>


<span class="pl-k">class</span> <span class="pl-v">FreeChecking</span>(<span class="pl-v">Account</span>):
    <span class="pl-s">"""A bank account that charges for withdrawals, but the first two are free!</span>
<span class="pl-s">    &gt;&gt;&gt; ch = FreeChecking('Jack')</span>
<span class="pl-s">    &gt;&gt;&gt; ch.balance = 20</span>
<span class="pl-s">    &gt;&gt;&gt; ch.withdraw(100)  # First one's free. Still counts as a free withdrawal even though it was unsuccessful</span>
<span class="pl-s">    'Insufficient funds'</span>
<span class="pl-s">    &gt;&gt;&gt; ch.withdraw(3)    # Second withdrawal is also free</span>
<span class="pl-s">    17</span>
<span class="pl-s">    &gt;&gt;&gt; ch.balance</span>
<span class="pl-s">    17</span>
<span class="pl-s">    &gt;&gt;&gt; ch.withdraw(3)    # Ok, two free withdrawals is enough, as free_withdrawals is only 2</span>
<span class="pl-s">    13</span>
<span class="pl-s">    &gt;&gt;&gt; ch.withdraw(3)</span>
<span class="pl-s">    9</span>
<span class="pl-s">    &gt;&gt;&gt; ch2 = FreeChecking('John')</span>
<span class="pl-s">    &gt;&gt;&gt; ch2.balance = 10</span>
<span class="pl-s">    &gt;&gt;&gt; ch2.withdraw(3) # No fee</span>
<span class="pl-s">    7</span>
<span class="pl-s">    &gt;&gt;&gt; ch.withdraw(3)  # ch still charges a fee</span>
<span class="pl-s">    5</span>
<span class="pl-s">    &gt;&gt;&gt; ch.withdraw(5)  # Not enough to cover fee + withdraw</span>
<span class="pl-s">    'Insufficient funds'</span>
<span class="pl-s">    """</span>
    <span class="pl-s1">withdraw_fee</span> <span class="pl-c1">=</span> <span class="pl-c1">1</span>
    <span class="pl-s1">free_withdrawals</span> <span class="pl-c1">=</span> <span class="pl-c1">2</span>

    <span class="pl-s">"*** YOUR CODE HERE ***"</span>


<span class="pl-k">class</span> <span class="pl-v">Transaction</span>:
    <span class="pl-k">def</span> <span class="pl-en">__init__</span>(<span class="pl-s1">self</span>, <span class="pl-s1">id</span>, <span class="pl-s1">before</span>, <span class="pl-s1">after</span>):
        <span class="pl-s1">self</span>.<span class="pl-s1">id</span> <span class="pl-c1">=</span> <span class="pl-s1">id</span>
        <span class="pl-s1">self</span>.<span class="pl-s1">before</span> <span class="pl-c1">=</span> <span class="pl-s1">before</span>
        <span class="pl-s1">self</span>.<span class="pl-s1">after</span> <span class="pl-c1">=</span> <span class="pl-s1">after</span>

    <span class="pl-k">def</span> <span class="pl-en">changed</span>(<span class="pl-s1">self</span>):
        <span class="pl-s">"""Return whether the transaction resulted in a changed balance."""</span>
        <span class="pl-s">"*** YOUR CODE HERE ***"</span>

    <span class="pl-k">def</span> <span class="pl-en">report</span>(<span class="pl-s1">self</span>):
        <span class="pl-s">"""Return a string describing the transaction.</span>
<span class="pl-s"></span>
<span class="pl-s">        &gt;&gt;&gt; Transaction(3, 20, 10).report()</span>
<span class="pl-s">        '3: decreased 20-&gt;10'</span>
<span class="pl-s">        &gt;&gt;&gt; Transaction(4, 20, 50).report()</span>
<span class="pl-s">        '4: increased 20-&gt;50'</span>
<span class="pl-s">        &gt;&gt;&gt; Transaction(5, 50, 50).report()</span>
<span class="pl-s">        '5: no change'</span>
<span class="pl-s">        """</span>
        <span class="pl-s1">msg</span> <span class="pl-c1">=</span> <span class="pl-s">'no change'</span>
        <span class="pl-k">if</span> <span class="pl-s1">self</span>.<span class="pl-en">changed</span>():
            <span class="pl-s">"*** YOUR CODE HERE ***"</span>
        <span class="pl-k">return</span> <span class="pl-en">str</span>(<span class="pl-s1">self</span>.<span class="pl-s1">id</span>) <span class="pl-c1">+</span> <span class="pl-s">': '</span> <span class="pl-c1">+</span> <span class="pl-s1">msg</span>

<span class="pl-k">class</span> <span class="pl-v">BankAccount</span>:
    <span class="pl-s">"""A bank account that tracks its transaction history.</span>
<span class="pl-s"></span>
<span class="pl-s">    &gt;&gt;&gt; a = BankAccount('Eric')</span>
<span class="pl-s">    &gt;&gt;&gt; a.deposit(100)    # Transaction 0 for a</span>
<span class="pl-s">    100</span>
<span class="pl-s">    &gt;&gt;&gt; b = BankAccount('Erica')</span>
<span class="pl-s">    &gt;&gt;&gt; a.withdraw(30)    # Transaction 1 for a</span>
<span class="pl-s">    70</span>
<span class="pl-s">    &gt;&gt;&gt; a.deposit(10)     # Transaction 2 for a</span>
<span class="pl-s">    80</span>
<span class="pl-s">    &gt;&gt;&gt; b.deposit(50)     # Transaction 0 for b</span>
<span class="pl-s">    50</span>
<span class="pl-s">    &gt;&gt;&gt; b.withdraw(10)    # Transaction 1 for b</span>
<span class="pl-s">    40</span>
<span class="pl-s">    &gt;&gt;&gt; a.withdraw(100)   # Transaction 3 for a</span>
<span class="pl-s">    'Insufficient funds'</span>
<span class="pl-s">    &gt;&gt;&gt; len(a.transactions)</span>
<span class="pl-s">    4</span>
<span class="pl-s">    &gt;&gt;&gt; len([t for t in a.transactions if t.changed()])</span>
<span class="pl-s">    3</span>
<span class="pl-s">    &gt;&gt;&gt; for t in a.transactions:</span>
<span class="pl-s">    ...     print(t.report())</span>
<span class="pl-s">    0: increased 0-&gt;100</span>
<span class="pl-s">    1: decreased 100-&gt;70</span>
<span class="pl-s">    2: increased 70-&gt;80</span>
<span class="pl-s">    3: no change</span>
<span class="pl-s">    &gt;&gt;&gt; b.withdraw(100)   # Transaction 2 for b</span>
<span class="pl-s">    'Insufficient funds'</span>
<span class="pl-s">    &gt;&gt;&gt; b.withdraw(30)    # Transaction 3 for b</span>
<span class="pl-s">    10</span>
<span class="pl-s">    &gt;&gt;&gt; for t in b.transactions:</span>
<span class="pl-s">    ...     print(t.report())</span>
<span class="pl-s">    0: increased 0-&gt;50</span>
<span class="pl-s">    1: decreased 50-&gt;40</span>
<span class="pl-s">    2: no change</span>
<span class="pl-s">    3: decreased 40-&gt;10</span>
<span class="pl-s">    """</span>

    <span class="pl-c"># *** YOU NEED TO MAKE CHANGES IN SEVERAL PLACES IN THIS CLASS ***</span>

    <span class="pl-k">def</span> <span class="pl-en">__init__</span>(<span class="pl-s1">self</span>, <span class="pl-s1">account_holder</span>):
        <span class="pl-s1">self</span>.<span class="pl-s1">balance</span> <span class="pl-c1">=</span> <span class="pl-c1">0</span>
        <span class="pl-s1">self</span>.<span class="pl-s1">holder</span> <span class="pl-c1">=</span> <span class="pl-s1">account_holder</span>

    <span class="pl-k">def</span> <span class="pl-en">deposit</span>(<span class="pl-s1">self</span>, <span class="pl-s1">amount</span>):
        <span class="pl-s">"""Increase the account balance by amount, add the deposit</span>
<span class="pl-s">        to the transaction history, and return the new balance.</span>
<span class="pl-s">        """</span>
        <span class="pl-s1">self</span>.<span class="pl-s1">balance</span> <span class="pl-c1">=</span> <span class="pl-s1">self</span>.<span class="pl-s1">balance</span> <span class="pl-c1">+</span> <span class="pl-s1">amount</span>
        <span class="pl-k">return</span> <span class="pl-s1">self</span>.<span class="pl-s1">balance</span>

    <span class="pl-k">def</span> <span class="pl-en">withdraw</span>(<span class="pl-s1">self</span>, <span class="pl-s1">amount</span>):
        <span class="pl-s">"""Decrease the account balance by amount, add the withdraw</span>
<span class="pl-s">        to the transaction history, and return the new balance.</span>
<span class="pl-s">        """</span>
        <span class="pl-k">if</span> <span class="pl-s1">amount</span> <span class="pl-c1">&gt;</span> <span class="pl-s1">self</span>.<span class="pl-s1">balance</span>:
            <span class="pl-k">return</span> <span class="pl-s">'Insufficient funds'</span>
        <span class="pl-s1">self</span>.<span class="pl-s1">balance</span> <span class="pl-c1">=</span> <span class="pl-s1">self</span>.<span class="pl-s1">balance</span> <span class="pl-c1">-</span> <span class="pl-s1">amount</span>
        <span class="pl-k">return</span> <span class="pl-s1">self</span>.<span class="pl-s1">balance</span>




<span class="pl-k">class</span> <span class="pl-v">Email</span>:
    <span class="pl-s">"""An email has the following instance attributes:</span>
<span class="pl-s"></span>
<span class="pl-s">        msg (str): the contents of the message</span>
<span class="pl-s">        sender (Client): the client that sent the email</span>
<span class="pl-s">        recipient_name (str): the name of the recipient (another client)</span>
<span class="pl-s">    """</span>
    <span class="pl-k">def</span> <span class="pl-en">__init__</span>(<span class="pl-s1">self</span>, <span class="pl-s1">msg</span>, <span class="pl-s1">sender</span>, <span class="pl-s1">recipient_name</span>):
        <span class="pl-s1">self</span>.<span class="pl-s1">msg</span> <span class="pl-c1">=</span> <span class="pl-s1">msg</span>
        <span class="pl-s1">self</span>.<span class="pl-s1">sender</span> <span class="pl-c1">=</span> <span class="pl-s1">sender</span>
        <span class="pl-s1">self</span>.<span class="pl-s1">recipient_name</span> <span class="pl-c1">=</span> <span class="pl-s1">recipient_name</span>

<span class="pl-k">class</span> <span class="pl-v">Server</span>:
    <span class="pl-s">"""Each Server has one instance attribute called clients that is a</span>
<span class="pl-s">    dictionary from client names to client objects.</span>
<span class="pl-s">    """</span>
    <span class="pl-k">def</span> <span class="pl-en">__init__</span>(<span class="pl-s1">self</span>):
        <span class="pl-s1">self</span>.<span class="pl-s1">clients</span> <span class="pl-c1">=</span> {}

    <span class="pl-k">def</span> <span class="pl-en">send</span>(<span class="pl-s1">self</span>, <span class="pl-s1">email</span>):
        <span class="pl-s">"""Append the email to the inbox of the client it is addressed to.</span>
<span class="pl-s">            email is an instance of the Email class.</span>
<span class="pl-s">        """</span>
        <span class="pl-s1">____</span>.<span class="pl-s1">inbox</span>.<span class="pl-en">append</span>(<span class="pl-s1">email</span>)

    <span class="pl-k">def</span> <span class="pl-en">register_client</span>(<span class="pl-s1">self</span>, <span class="pl-s1">client</span>):
        <span class="pl-s">"""Add a client to the clients mapping (which is a </span>
<span class="pl-s">        dictionary from client names to client instances).</span>
<span class="pl-s">            client is an instance of the Client class.</span>
<span class="pl-s">        """</span>
        <span class="pl-s1">____</span>[<span class="pl-s1">____</span>] <span class="pl-c1">=</span> <span class="pl-s1">____</span>

<span class="pl-k">class</span> <span class="pl-v">Client</span>:
    <span class="pl-s">"""A client has a server, a name (str), and an inbox (list).</span>
<span class="pl-s"></span>
<span class="pl-s">    &gt;&gt;&gt; s = Server()</span>
<span class="pl-s">    &gt;&gt;&gt; a = Client(s, 'Alice')</span>
<span class="pl-s">    &gt;&gt;&gt; b = Client(s, 'Bob')</span>
<span class="pl-s">    &gt;&gt;&gt; a.compose('Hello, World!', 'Bob')</span>
<span class="pl-s">    &gt;&gt;&gt; b.inbox[0].msg</span>
<span class="pl-s">    'Hello, World!'</span>
<span class="pl-s">    &gt;&gt;&gt; a.compose('CS 61A Rocks!', 'Bob')</span>
<span class="pl-s">    &gt;&gt;&gt; len(b.inbox)</span>
<span class="pl-s">    2</span>
<span class="pl-s">    &gt;&gt;&gt; b.inbox[1].msg</span>
<span class="pl-s">    'CS 61A Rocks!'</span>
<span class="pl-s">    &gt;&gt;&gt; b.inbox[1].sender.name</span>
<span class="pl-s">    'Alice'</span>
<span class="pl-s">    """</span>
    <span class="pl-k">def</span> <span class="pl-en">__init__</span>(<span class="pl-s1">self</span>, <span class="pl-s1">server</span>, <span class="pl-s1">name</span>):
        <span class="pl-s1">self</span>.<span class="pl-s1">inbox</span> <span class="pl-c1">=</span> []
        <span class="pl-s1">self</span>.<span class="pl-s1">server</span> <span class="pl-c1">=</span> <span class="pl-s1">server</span>
        <span class="pl-s1">self</span>.<span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s1">name</span>
        <span class="pl-s1">server</span>.<span class="pl-en">register_client</span>(<span class="pl-s1">____</span>)

    <span class="pl-k">def</span> <span class="pl-en">compose</span>(<span class="pl-s1">self</span>, <span class="pl-s1">message</span>, <span class="pl-s1">recipient_name</span>):
        <span class="pl-s">"""Send an email with the given message to the recipient."""</span>
        <span class="pl-s1">email</span> <span class="pl-c1">=</span> <span class="pl-v">Email</span>(<span class="pl-s1">message</span>, <span class="pl-s1">____</span>, <span class="pl-s1">____</span>)
        <span class="pl-s1">self</span>.<span class="pl-s1">server</span>.<span class="pl-en">send</span>(<span class="pl-s1">email</span>)


<span class="pl-k">def</span> <span class="pl-en">make_change</span>(<span class="pl-s1">amount</span>, <span class="pl-s1">coins</span>):
    <span class="pl-s">"""Return a list of coins that sum to amount, preferring the smallest coins</span>
<span class="pl-s">    available and placing the smallest coins first in the returned list.</span>
<span class="pl-s"></span>
<span class="pl-s">    The coins argument is a dictionary with keys that are positive integer</span>
<span class="pl-s">    denominations and values that are positive integer coin counts.</span>
<span class="pl-s"></span>
<span class="pl-s">    &gt;&gt;&gt; make_change(2, {2: 1})</span>
<span class="pl-s">    [2]</span>
<span class="pl-s">    &gt;&gt;&gt; make_change(2, {1: 2, 2: 1})</span>
<span class="pl-s">    [1, 1]</span>
<span class="pl-s">    &gt;&gt;&gt; make_change(4, {1: 2, 2: 1})</span>
<span class="pl-s">    [1, 1, 2]</span>
<span class="pl-s">    &gt;&gt;&gt; make_change(4, {2: 1}) == None</span>
<span class="pl-s">    True</span>
<span class="pl-s"></span>
<span class="pl-s">    &gt;&gt;&gt; coins = {2: 2, 3: 2, 4: 3, 5: 1}</span>
<span class="pl-s">    &gt;&gt;&gt; make_change(4, coins)</span>
<span class="pl-s">    [2, 2]</span>
<span class="pl-s">    &gt;&gt;&gt; make_change(8, coins)</span>
<span class="pl-s">    [2, 2, 4]</span>
<span class="pl-s">    &gt;&gt;&gt; make_change(25, coins)</span>
<span class="pl-s">    [2, 3, 3, 4, 4, 4, 5]</span>
<span class="pl-s">    &gt;&gt;&gt; coins[8] = 1</span>
<span class="pl-s">    &gt;&gt;&gt; make_change(25, coins)</span>
<span class="pl-s">    [2, 2, 4, 4, 5, 8]</span>
<span class="pl-s">    """</span>
    <span class="pl-k">if</span> <span class="pl-c1">not</span> <span class="pl-s1">coins</span>:
        <span class="pl-k">return</span> <span class="pl-c1">None</span>
    <span class="pl-s1">smallest</span> <span class="pl-c1">=</span> <span class="pl-en">min</span>(<span class="pl-s1">coins</span>)
    <span class="pl-s1">rest</span> <span class="pl-c1">=</span> <span class="pl-en">remove_one</span>(<span class="pl-s1">coins</span>, <span class="pl-s1">smallest</span>)
    <span class="pl-k">if</span> <span class="pl-s1">amount</span> <span class="pl-c1">&lt;</span> <span class="pl-s1">smallest</span>:
        <span class="pl-k">return</span> <span class="pl-c1">None</span>
    <span class="pl-s">"*** YOUR CODE HERE ***"</span>

<span class="pl-k">def</span> <span class="pl-en">remove_one</span>(<span class="pl-s1">coins</span>, <span class="pl-s1">coin</span>):
    <span class="pl-s">"""Remove one coin from a dictionary of coins. Return a new dictionary,</span>
<span class="pl-s">    leaving the original dictionary coins unchanged.</span>
<span class="pl-s"></span>
<span class="pl-s">    &gt;&gt;&gt; coins = {2: 5, 3: 2, 6: 1}</span>
<span class="pl-s">    &gt;&gt;&gt; remove_one(coins, 2) == {2: 4, 3: 2, 6: 1}</span>
<span class="pl-s">    True</span>
<span class="pl-s">    &gt;&gt;&gt; remove_one(coins, 6) == {2: 5, 3: 2}</span>
<span class="pl-s">    True</span>
<span class="pl-s">    &gt;&gt;&gt; coins == {2: 5, 3: 2, 6: 1} # Unchanged</span>
<span class="pl-s">    True</span>
<span class="pl-s">    """</span>
    <span class="pl-s1">copy</span> <span class="pl-c1">=</span> <span class="pl-en">dict</span>(<span class="pl-s1">coins</span>)
    <span class="pl-s1">count</span> <span class="pl-c1">=</span> <span class="pl-s1">copy</span>.<span class="pl-en">pop</span>(<span class="pl-s1">coin</span>) <span class="pl-c1">-</span> <span class="pl-c1">1</span>  <span class="pl-c"># The coin denomination is removed</span>
    <span class="pl-k">if</span> <span class="pl-s1">count</span>:
        <span class="pl-s1">copy</span>[<span class="pl-s1">coin</span>] <span class="pl-c1">=</span> <span class="pl-s1">count</span>      <span class="pl-c"># The coin denomination is added back</span>
    <span class="pl-k">return</span> <span class="pl-s1">copy</span>

<span class="pl-k">class</span> <span class="pl-v">ChangeMachine</span>:
    <span class="pl-s">"""A change machine holds a certain number of coins, initially all pennies.</span>
<span class="pl-s">    The change method adds a single coin of some denomination X and returns a</span>
<span class="pl-s">    list of coins that sums to X. The machine prefers to return the smallest</span>
<span class="pl-s">    coins available. The total value in the machine never changes, and it can</span>
<span class="pl-s">    always make change for any coin (perhaps by returning the coin passed in).</span>
<span class="pl-s"></span>
<span class="pl-s">    The coins attribute is a dictionary with keys that are positive integer</span>
<span class="pl-s">    denominations and values that are positive integer coin counts.</span>
<span class="pl-s"></span>
<span class="pl-s">    &gt;&gt;&gt; m = ChangeMachine(2)</span>
<span class="pl-s">    &gt;&gt;&gt; m.coins == {1: 2}</span>
<span class="pl-s">    True</span>
<span class="pl-s">    &gt;&gt;&gt; m.change(2)</span>
<span class="pl-s">    [1, 1]</span>
<span class="pl-s">    &gt;&gt;&gt; m.coins == {2: 1}</span>
<span class="pl-s">    True</span>
<span class="pl-s">    &gt;&gt;&gt; m.change(2)</span>
<span class="pl-s">    [2]</span>
<span class="pl-s">    &gt;&gt;&gt; m.coins == {2: 1}</span>
<span class="pl-s">    True</span>
<span class="pl-s">    &gt;&gt;&gt; m.change(3)</span>
<span class="pl-s">    [3]</span>
<span class="pl-s">    &gt;&gt;&gt; m.coins == {2: 1}</span>
<span class="pl-s">    True</span>
<span class="pl-s"></span>
<span class="pl-s">    &gt;&gt;&gt; m = ChangeMachine(10) # 10 pennies</span>
<span class="pl-s">    &gt;&gt;&gt; m.coins == {1: 10}</span>
<span class="pl-s">    True</span>
<span class="pl-s">    &gt;&gt;&gt; m.change(5) # takes a nickel &amp; returns 5 pennies</span>
<span class="pl-s">    [1, 1, 1, 1, 1]</span>
<span class="pl-s">    &gt;&gt;&gt; m.coins == {1: 5, 5: 1} # 5 pennies &amp; a nickel remain</span>
<span class="pl-s">    True</span>
<span class="pl-s">    &gt;&gt;&gt; m.change(3)</span>
<span class="pl-s">    [1, 1, 1]</span>
<span class="pl-s">    &gt;&gt;&gt; m.coins == {1: 2, 3: 1, 5: 1}</span>
<span class="pl-s">    True</span>
<span class="pl-s">    &gt;&gt;&gt; m.change(2)</span>
<span class="pl-s">    [1, 1]</span>
<span class="pl-s">    &gt;&gt;&gt; m.change(2) # not enough 1's remaining; return a 2</span>
<span class="pl-s">    [2]</span>
<span class="pl-s">    &gt;&gt;&gt; m.coins == {2: 1, 3: 1, 5: 1}</span>
<span class="pl-s">    True</span>
<span class="pl-s">    &gt;&gt;&gt; m.change(8) # cannot use the 2 to make 8, so use 3 &amp; 5</span>
<span class="pl-s">    [3, 5]</span>
<span class="pl-s">    &gt;&gt;&gt; m.coins == {2: 1, 8: 1}</span>
<span class="pl-s">    True</span>
<span class="pl-s">    &gt;&gt;&gt; m.change(1) # return the penny passed in (it's the smallest)</span>
<span class="pl-s">    [1]</span>
<span class="pl-s">    &gt;&gt;&gt; m.change(9) # return the 9 passed in (no change possible)</span>
<span class="pl-s">    [9]</span>
<span class="pl-s">    &gt;&gt;&gt; m.coins == {2: 1, 8: 1}</span>
<span class="pl-s">    True</span>
<span class="pl-s">    &gt;&gt;&gt; m.change(10)</span>
<span class="pl-s">    [2, 8]</span>
<span class="pl-s">    &gt;&gt;&gt; m.coins == {10: 1}</span>
<span class="pl-s">    True</span>
<span class="pl-s"></span>
<span class="pl-s">    &gt;&gt;&gt; m = ChangeMachine(9)</span>
<span class="pl-s">    &gt;&gt;&gt; [m.change(k) for k in [2, 2, 3]]</span>
<span class="pl-s">    [[1, 1], [1, 1], [1, 1, 1]]</span>
<span class="pl-s">    &gt;&gt;&gt; m.coins == {1: 2, 2: 2, 3: 1}</span>
<span class="pl-s">    True</span>
<span class="pl-s">    &gt;&gt;&gt; m.change(5) # Prefers [1, 1, 3] to [1, 2, 2] (more pennies)</span>
<span class="pl-s">    [1, 1, 3]</span>
<span class="pl-s">    &gt;&gt;&gt; m.change(7)</span>
<span class="pl-s">    [2, 5]</span>
<span class="pl-s">    &gt;&gt;&gt; m.coins == {2: 1, 7: 1}</span>
<span class="pl-s">    True</span>
<span class="pl-s">    """</span>
    <span class="pl-k">def</span> <span class="pl-en">__init__</span>(<span class="pl-s1">self</span>, <span class="pl-s1">pennies</span>):
        <span class="pl-s1">self</span>.<span class="pl-s1">coins</span> <span class="pl-c1">=</span> {<span class="pl-c1">1</span>: <span class="pl-s1">pennies</span>}

    <span class="pl-k">def</span> <span class="pl-en">change</span>(<span class="pl-s1">self</span>, <span class="pl-s1">coin</span>):
        <span class="pl-s">"""Return change for coin, removing the result from self.coins."""</span>
        <span class="pl-s">"*** YOUR CODE HERE ***"</span></pre></div>
<h2>lab08</h2>
<div class="highlight highlight-source-python"><pre class="notranslate"><span class="pl-k">def</span> <span class="pl-en">cumulative_mul</span>(<span class="pl-s1">t</span>):
    <span class="pl-s">"""Mutates t so that each node's label becomes the product of its own</span>
<span class="pl-s">    label and all labels in the corresponding subtree rooted at t.</span>
<span class="pl-s"></span>
<span class="pl-s">    &gt;&gt;&gt; t = Tree(1, [Tree(3, [Tree(5)]), Tree(7)])</span>
<span class="pl-s">    &gt;&gt;&gt; cumulative_mul(t)</span>
<span class="pl-s">    &gt;&gt;&gt; t</span>
<span class="pl-s">    Tree(105, [Tree(15, [Tree(5)]), Tree(7)])</span>
<span class="pl-s">    &gt;&gt;&gt; otherTree = Tree(2, [Tree(1, [Tree(3), Tree(4), Tree(5)]), Tree(6, [Tree(7)])])</span>
<span class="pl-s">    &gt;&gt;&gt; cumulative_mul(otherTree)</span>
<span class="pl-s">    &gt;&gt;&gt; otherTree</span>
<span class="pl-s">    Tree(5040, [Tree(60, [Tree(3), Tree(4), Tree(5)]), Tree(42, [Tree(7)])])</span>
<span class="pl-s">    """</span>

    <span class="pl-k">for</span> <span class="pl-s1">b</span> <span class="pl-c1">in</span> <span class="pl-s1">t</span>.<span class="pl-s1">branches</span>:
        <span class="pl-en">cumulative_mul</span>(<span class="pl-s1">b</span>)
        <span class="pl-s1">t</span>.<span class="pl-s1">label</span> <span class="pl-c1">*=</span> <span class="pl-s1">b</span>.<span class="pl-s1">label</span>

<span class="pl-k">def</span> <span class="pl-en">delete</span>(<span class="pl-s1">t</span>, <span class="pl-s1">x</span>):
    <span class="pl-s">"""Remove all nodes labeled x below the root within Tree t. When a non-leaf</span>
<span class="pl-s">    node is deleted, the deleted node's children become children of its parent.</span>
<span class="pl-s"></span>
<span class="pl-s">    The root node will never be removed.</span>
<span class="pl-s"></span>
<span class="pl-s">    &gt;&gt;&gt; t = Tree(3, [Tree(2, [Tree(2), Tree(2)]), Tree(2), Tree(2, [Tree(2, [Tree(2), Tree(2)])])])</span>
<span class="pl-s">    &gt;&gt;&gt; delete(t, 2)</span>
<span class="pl-s">    &gt;&gt;&gt; t</span>
<span class="pl-s">    Tree(3)</span>
<span class="pl-s">    &gt;&gt;&gt; t = Tree(1, [Tree(2, [Tree(4, [Tree(2)]), Tree(5)]), Tree(3, [Tree(6), Tree(2)]), Tree(4)])</span>
<span class="pl-s">    &gt;&gt;&gt; delete(t, 2)</span>
<span class="pl-s">    &gt;&gt;&gt; t</span>
<span class="pl-s">    Tree(1, [Tree(4), Tree(5), Tree(3, [Tree(6)]), Tree(4)])</span>
<span class="pl-s">    &gt;&gt;&gt; t = Tree(1, [Tree(2, [Tree(4), Tree(5)]), Tree(3, [Tree(6), Tree(2)]), Tree(2, [Tree(6),  Tree(2), Tree(7), Tree(8)]), Tree(4)])</span>
<span class="pl-s">    &gt;&gt;&gt; delete(t, 2)</span>
<span class="pl-s">    &gt;&gt;&gt; t</span>
<span class="pl-s">    Tree(1, [Tree(4), Tree(5), Tree(3, [Tree(6)]), Tree(6), Tree(7), Tree(8), Tree(4)])</span>
<span class="pl-s">    """</span>
    <span class="pl-s1">new_branches</span> <span class="pl-c1">=</span> []
    <span class="pl-k">for</span> <span class="pl-s1">b</span> <span class="pl-c1">in</span> <span class="pl-s1">t</span>.<span class="pl-s1">branches</span>:
        <span class="pl-en">delete</span>(<span class="pl-s1">b</span>, <span class="pl-s1">x</span>)
        <span class="pl-k">if</span> <span class="pl-s1">b</span>.<span class="pl-s1">label</span> <span class="pl-c1">==</span> <span class="pl-s1">x</span>:
            <span class="pl-s1">new_branches</span>.<span class="pl-en">extend</span>(<span class="pl-s1">b</span>.<span class="pl-s1">branches</span>)
        <span class="pl-k">else</span>:
            <span class="pl-s1">new_branches</span>.<span class="pl-en">append</span>(<span class="pl-s1">b</span>)
    <span class="pl-s1">t</span>.<span class="pl-s1">branches</span> <span class="pl-c1">=</span> <span class="pl-s1">new_branches</span>


<span class="pl-k">def</span> <span class="pl-en">convert_link</span>(<span class="pl-s1">link</span>):
    <span class="pl-s">"""Takes a linked list and returns a Python list with the same elements.</span>
<span class="pl-s"></span>
<span class="pl-s">    &gt;&gt;&gt; link = Link(1, Link(2, Link(3, Link(4))))</span>
<span class="pl-s">    &gt;&gt;&gt; lst = convert_link(link)</span>
<span class="pl-s">    &gt;&gt;&gt; lst</span>
<span class="pl-s">    [1, 2, 3, 4]</span>
<span class="pl-s">    &gt;&gt;&gt; convert_link(Link.empty)</span>
<span class="pl-s">    []</span>
<span class="pl-s">    """</span>
    <span class="pl-k">if</span> <span class="pl-s1">link</span> <span class="pl-c1">is</span> <span class="pl-v">Link</span>.<span class="pl-s1">empty</span>:
        <span class="pl-k">return</span> []
    <span class="pl-k">return</span> [<span class="pl-s1">link</span>.<span class="pl-s1">first</span>] <span class="pl-c1">+</span> <span class="pl-en">convert_link</span>(<span class="pl-s1">link</span>.<span class="pl-s1">rest</span>)



<span class="pl-k">def</span> <span class="pl-en">add_links</span>(<span class="pl-s1">link1</span>, <span class="pl-s1">link2</span>):
    <span class="pl-s">"""Adds two Links, returning a new Link</span>
<span class="pl-s"></span>
<span class="pl-s">    &gt;&gt;&gt; l1 = Link(1, Link(2))</span>
<span class="pl-s">    &gt;&gt;&gt; l2 = Link(3, Link(4, Link(5)))</span>
<span class="pl-s">    &gt;&gt;&gt; new = add_links(l1, l2)</span>
<span class="pl-s">    &gt;&gt;&gt; print(new)</span>
<span class="pl-s">    &lt;1 2 3 4 5&gt;</span>
<span class="pl-s">    &gt;&gt;&gt; new2 = add_links(l2,l1)</span>
<span class="pl-s">    &gt;&gt;&gt; print(new2)</span>
<span class="pl-s">    &lt;3 4 5 1 2&gt;</span>
<span class="pl-s">    """</span>
    <span class="pl-k">if</span> <span class="pl-s1">link1</span> <span class="pl-c1">is</span> <span class="pl-v">Link</span>.<span class="pl-s1">empty</span>:
        <span class="pl-k">return</span> <span class="pl-s1">link2</span>
    <span class="pl-k">return</span> <span class="pl-v">Link</span>(<span class="pl-s1">link1</span>.<span class="pl-s1">first</span>, <span class="pl-en">add_links</span>(<span class="pl-s1">link1</span>.<span class="pl-s1">rest</span>, <span class="pl-s1">link2</span>))



<span class="pl-k">def</span> <span class="pl-en">multiply_lnks</span>(<span class="pl-s1">lst_of_lnks</span>):
    <span class="pl-s">"""</span>
<span class="pl-s">    &gt;&gt;&gt; a = Link(2, Link(3))</span>
<span class="pl-s">    &gt;&gt;&gt; b = Link(5, Link(4))</span>
<span class="pl-s">    &gt;&gt;&gt; p1 = multiply_lnks([a, b])</span>
<span class="pl-s">    &gt;&gt;&gt; p1</span>
<span class="pl-s">    Link(10, Link(12))</span>
<span class="pl-s"></span>
<span class="pl-s">    &gt;&gt;&gt; c = Link(2, Link(3, Link(5)))</span>
<span class="pl-s">    &gt;&gt;&gt; d = Link(6, Link(4, Link(2)))</span>
<span class="pl-s">    &gt;&gt;&gt; e = Link(4, Link(1, Link(0, Link(2))))</span>
<span class="pl-s">    &gt;&gt;&gt; p2 = multiply_lnks([c, d, e])</span>
<span class="pl-s">    &gt;&gt;&gt; p2</span>
<span class="pl-s">    Link(48, Link(12, Link(0)))</span>
<span class="pl-s">    """</span>
    <span class="pl-s1">product</span> <span class="pl-c1">=</span> <span class="pl-c1">1</span>
    <span class="pl-k">for</span> <span class="pl-s1">lst</span> <span class="pl-c1">in</span> <span class="pl-s1">lst_of_lnks</span>:
        <span class="pl-k">if</span> <span class="pl-s1">lst</span> <span class="pl-c1">is</span> <span class="pl-v">Link</span>.<span class="pl-s1">empty</span>:
            <span class="pl-k">return</span> <span class="pl-v">Link</span>.<span class="pl-s1">empty</span>
        <span class="pl-s1">product</span> <span class="pl-c1">*=</span> <span class="pl-s1">lst</span>.<span class="pl-s1">first</span>
    <span class="pl-s1">lst_of_lnks_rests</span> <span class="pl-c1">=</span> [<span class="pl-s1">lst</span>.<span class="pl-s1">rest</span> <span class="pl-k">for</span> <span class="pl-s1">lst</span> <span class="pl-c1">in</span> <span class="pl-s1">lst_of_lnks</span>]
    <span class="pl-k">return</span> <span class="pl-v">Link</span>(<span class="pl-s1">product</span>, <span class="pl-en">multiply_lnks</span>(<span class="pl-s1">lst_of_lnks_rests</span>))


<span class="pl-k">class</span> <span class="pl-v">Tree</span>:
    <span class="pl-s">"""</span>
<span class="pl-s">    &gt;&gt;&gt; t = Tree(3, [Tree(2, [Tree(5)]), Tree(4)])</span>
<span class="pl-s">    &gt;&gt;&gt; t.label</span>
<span class="pl-s">    3</span>
<span class="pl-s">    &gt;&gt;&gt; t.branches[0].label</span>
<span class="pl-s">    2</span>
<span class="pl-s">    &gt;&gt;&gt; t.branches[1].is_leaf()</span>
<span class="pl-s">    True</span>
<span class="pl-s">    """</span>
    <span class="pl-k">def</span> <span class="pl-en">__init__</span>(<span class="pl-s1">self</span>, <span class="pl-s1">label</span>, <span class="pl-s1">branches</span><span class="pl-c1">=</span>[]):
        <span class="pl-k">for</span> <span class="pl-s1">b</span> <span class="pl-c1">in</span> <span class="pl-s1">branches</span>:
            <span class="pl-k">assert</span> <span class="pl-en">isinstance</span>(<span class="pl-s1">b</span>, <span class="pl-v">Tree</span>)
        <span class="pl-s1">self</span>.<span class="pl-s1">label</span> <span class="pl-c1">=</span> <span class="pl-s1">label</span>
        <span class="pl-s1">self</span>.<span class="pl-s1">branches</span> <span class="pl-c1">=</span> <span class="pl-en">list</span>(<span class="pl-s1">branches</span>)

    <span class="pl-k">def</span> <span class="pl-en">is_leaf</span>(<span class="pl-s1">self</span>):
        <span class="pl-k">return</span> <span class="pl-c1">not</span> <span class="pl-s1">self</span>.<span class="pl-s1">branches</span>

    <span class="pl-k">def</span> <span class="pl-en">__repr__</span>(<span class="pl-s1">self</span>):
        <span class="pl-k">if</span> <span class="pl-s1">self</span>.<span class="pl-s1">branches</span>:
            <span class="pl-s1">branch_str</span> <span class="pl-c1">=</span> <span class="pl-s">', '</span> <span class="pl-c1">+</span> <span class="pl-en">repr</span>(<span class="pl-s1">self</span>.<span class="pl-s1">branches</span>)
        <span class="pl-k">else</span>:
            <span class="pl-s1">branch_str</span> <span class="pl-c1">=</span> <span class="pl-s">''</span>
        <span class="pl-k">return</span> <span class="pl-s">'Tree({0}{1})'</span>.<span class="pl-en">format</span>(<span class="pl-s1">self</span>.<span class="pl-s1">label</span>, <span class="pl-s1">branch_str</span>)

    <span class="pl-k">def</span> <span class="pl-en">__str__</span>(<span class="pl-s1">self</span>):
        <span class="pl-k">def</span> <span class="pl-en">print_tree</span>(<span class="pl-s1">t</span>, <span class="pl-s1">indent</span><span class="pl-c1">=</span><span class="pl-c1">0</span>):
            <span class="pl-s1">tree_str</span> <span class="pl-c1">=</span> <span class="pl-s">'  '</span> <span class="pl-c1">*</span> <span class="pl-s1">indent</span> <span class="pl-c1">+</span> <span class="pl-en">str</span>(<span class="pl-s1">t</span>.<span class="pl-s1">label</span>) <span class="pl-c1">+</span> <span class="pl-s">"<span class="pl-cce">\n</span>"</span>
            <span class="pl-k">for</span> <span class="pl-s1">b</span> <span class="pl-c1">in</span> <span class="pl-s1">t</span>.<span class="pl-s1">branches</span>:
                <span class="pl-s1">tree_str</span> <span class="pl-c1">+=</span> <span class="pl-en">print_tree</span>(<span class="pl-s1">b</span>, <span class="pl-s1">indent</span> <span class="pl-c1">+</span> <span class="pl-c1">1</span>)
            <span class="pl-k">return</span> <span class="pl-s1">tree_str</span>
        <span class="pl-k">return</span> <span class="pl-en">print_tree</span>(<span class="pl-s1">self</span>).<span class="pl-en">rstrip</span>()


<span class="pl-k">class</span> <span class="pl-v">Link</span>:
    <span class="pl-s">"""A linked list.</span>
<span class="pl-s"></span>
<span class="pl-s">    &gt;&gt;&gt; s = Link(1)</span>
<span class="pl-s">    &gt;&gt;&gt; s.first</span>
<span class="pl-s">    1</span>
<span class="pl-s">    &gt;&gt;&gt; s.rest is Link.empty</span>
<span class="pl-s">    True</span>
<span class="pl-s">    &gt;&gt;&gt; s = Link(2, Link(3, Link(4)))</span>
<span class="pl-s">    &gt;&gt;&gt; s.first = 5</span>
<span class="pl-s">    &gt;&gt;&gt; s.rest.first = 6</span>
<span class="pl-s">    &gt;&gt;&gt; s.rest.rest = Link.empty</span>
<span class="pl-s">    &gt;&gt;&gt; s                                    # Displays the contents of repr(s)</span>
<span class="pl-s">    Link(5, Link(6))</span>
<span class="pl-s">    &gt;&gt;&gt; s.rest = Link(7, Link(Link(8, Link(9))))</span>
<span class="pl-s">    &gt;&gt;&gt; s</span>
<span class="pl-s">    Link(5, Link(7, Link(Link(8, Link(9)))))</span>
<span class="pl-s">    &gt;&gt;&gt; print(s)                             # Prints str(s)</span>
<span class="pl-s">    &lt;5 7 &lt;8 9&gt;&gt;</span>
<span class="pl-s">    """</span>
    <span class="pl-s1">empty</span> <span class="pl-c1">=</span> ()

    <span class="pl-k">def</span> <span class="pl-en">__init__</span>(<span class="pl-s1">self</span>, <span class="pl-s1">first</span>, <span class="pl-s1">rest</span><span class="pl-c1">=</span><span class="pl-s1">empty</span>):
        <span class="pl-k">assert</span> <span class="pl-s1">rest</span> <span class="pl-c1">is</span> <span class="pl-v">Link</span>.<span class="pl-s1">empty</span> <span class="pl-c1">or</span> <span class="pl-en">isinstance</span>(<span class="pl-s1">rest</span>, <span class="pl-v">Link</span>)
        <span class="pl-s1">self</span>.<span class="pl-s1">first</span> <span class="pl-c1">=</span> <span class="pl-s1">first</span>
        <span class="pl-s1">self</span>.<span class="pl-s1">rest</span> <span class="pl-c1">=</span> <span class="pl-s1">rest</span>

    <span class="pl-k">def</span> <span class="pl-en">__repr__</span>(<span class="pl-s1">self</span>):
        <span class="pl-k">if</span> <span class="pl-s1">self</span>.<span class="pl-s1">rest</span> <span class="pl-c1">is</span> <span class="pl-c1">not</span> <span class="pl-v">Link</span>.<span class="pl-s1">empty</span>:
            <span class="pl-s1">rest_repr</span> <span class="pl-c1">=</span> <span class="pl-s">', '</span> <span class="pl-c1">+</span> <span class="pl-en">repr</span>(<span class="pl-s1">self</span>.<span class="pl-s1">rest</span>)
        <span class="pl-k">else</span>:
            <span class="pl-s1">rest_repr</span> <span class="pl-c1">=</span> <span class="pl-s">''</span>
        <span class="pl-k">return</span> <span class="pl-s">'Link('</span> <span class="pl-c1">+</span> <span class="pl-en">repr</span>(<span class="pl-s1">self</span>.<span class="pl-s1">first</span>) <span class="pl-c1">+</span> <span class="pl-s1">rest_repr</span> <span class="pl-c1">+</span> <span class="pl-s">')'</span>

    <span class="pl-k">def</span> <span class="pl-en">__str__</span>(<span class="pl-s1">self</span>):
        <span class="pl-s1">string</span> <span class="pl-c1">=</span> <span class="pl-s">'&lt;'</span>
        <span class="pl-k">while</span> <span class="pl-s1">self</span>.<span class="pl-s1">rest</span> <span class="pl-c1">is</span> <span class="pl-c1">not</span> <span class="pl-v">Link</span>.<span class="pl-s1">empty</span>:
            <span class="pl-s1">string</span> <span class="pl-c1">+=</span> <span class="pl-en">str</span>(<span class="pl-s1">self</span>.<span class="pl-s1">first</span>) <span class="pl-c1">+</span> <span class="pl-s">' '</span>
            <span class="pl-s1">self</span> <span class="pl-c1">=</span> <span class="pl-s1">self</span>.<span class="pl-s1">rest</span>
        <span class="pl-k">return</span> <span class="pl-s1">string</span> <span class="pl-c1">+</span> <span class="pl-en">str</span>(<span class="pl-s1">self</span>.<span class="pl-s1">first</span>) <span class="pl-c1">+</span> <span class="pl-s">'&gt;'</span>
</pre></div>
<h2>lab09</h2>
<div class="highlight highlight-source-scheme"><pre class="notranslate">(<span class="pl-k">define</span> (<span class="pl-en">over-or-under</span><span class="pl-smi"> num1 num2</span>) 
      (<span class="pl-k">cond</span> ((<span class="pl-k">=</span> num1 num2) <span class="pl-c1">0</span>)
            ((<span class="pl-k">&lt;</span> num1 num2) -1)
            ((<span class="pl-k">&gt;</span> num1 num2) <span class="pl-c1">1</span>)
      )
)
(<span class="pl-k">define</span> (<span class="pl-en">make-adder</span><span class="pl-smi"> num</span>) (<span class="pl-k">lambda</span> (<span class="pl-v">incr</span>) (<span class="pl-k">+</span> num incr)))

(<span class="pl-k">define</span> (<span class="pl-en">composed</span><span class="pl-smi"> f g</span>) (<span class="pl-k">lambda</span> (<span class="pl-v">x</span>) (f (g x))))

(<span class="pl-k">define</span> (<span class="pl-en">repeat</span><span class="pl-smi"> f n</span>) (<span class="pl-k">lambda</span> (<span class="pl-v">x</span>) (<span class="pl-k">if</span> (<span class="pl-k">=</span> n <span class="pl-c1">0</span>) x ((repeat f (<span class="pl-k">-</span> n <span class="pl-c1">1</span>)) (f x)))))

(<span class="pl-k">define</span> (<span class="pl-en">max</span><span class="pl-smi"> a b</span>)
  (<span class="pl-k">if</span> (<span class="pl-k">&gt;</span> a b)
      a
      b))

(<span class="pl-k">define</span> (<span class="pl-en">min</span><span class="pl-smi"> a b</span>)
  (<span class="pl-k">if</span> (<span class="pl-k">&gt;</span> a b)
      b
      a))

(<span class="pl-k">define</span> (<span class="pl-en">gcd</span><span class="pl-smi"> a b</span>) (<span class="pl-k">if</span> (<span class="pl-k">=</span> <span class="pl-c1">0</span> (modulo (<span class="pl-c1">max</span> a b) (<span class="pl-c1">min</span> a b))) (<span class="pl-c1">min</span> a b) (gcd (<span class="pl-c1">min</span> a b) (modulo (<span class="pl-c1">max</span> a b) (<span class="pl-c1">min</span> a b)))))

(<span class="pl-k">define</span> (<span class="pl-en">duplicate</span><span class="pl-smi"> lst</span>) 
  (<span class="pl-k">if</span> (<span class="pl-c1">null?</span> lst)
    lst
    (<span class="pl-c1">cons</span> (<span class="pl-c1">car</span> lst)
          (<span class="pl-c1">cons</span> (<span class="pl-c1">car</span> lst) 
                (duplicate (<span class="pl-c1">cdr</span> lst))
          )
    )
  )
)

(expect (duplicate <span class="pl-s">'</span>(<span class="pl-c1">1</span> <span class="pl-c1">2</span> <span class="pl-c1">3</span>)) (<span class="pl-c1">1</span> <span class="pl-c1">1</span> <span class="pl-c1">2</span> <span class="pl-c1">2</span> <span class="pl-c1">3</span> <span class="pl-c1">3</span>))

(expect (duplicate <span class="pl-s">'</span>(<span class="pl-c1">1</span> <span class="pl-c1">1</span>)) (<span class="pl-c1">1</span> <span class="pl-c1">1</span> <span class="pl-c1">1</span> <span class="pl-c1">1</span>))

(<span class="pl-k">define</span> (<span class="pl-en">deep-map</span><span class="pl-smi"> fn s</span>) 
    (<span class="pl-k">cond</span> ((<span class="pl-c1">null?</span> s) s) 
          ((<span class="pl-c1">list?</span> (<span class="pl-c1">car</span> s)) (<span class="pl-c1">cons</span> (deep-map fn (<span class="pl-c1">car</span> s)) (deep-map fn (<span class="pl-c1">cdr</span> s)))) 
          (<span class="pl-k">else</span> (<span class="pl-c1">cons</span> (fn (<span class="pl-c1">car</span> s)) (deep-map fn (<span class="pl-c1">cdr</span> s)))) 
))

</pre></div>
<h2>lab10</h2>
<div class="highlight highlight-source-python"><pre class="notranslate"><span class="pl-c">############## You do not need to understand any of this code!</span>
<span class="pl-k">import</span> <span class="pl-s1">base64</span>
<span class="pl-s1">ob</span> <span class="pl-c1">=</span> <span class="pl-s">"CmRlZiBhZGRpdGlvbihleHByKToKICAgIGRpdmlkZW5kID0gZXhwci5maXJzdAogICAgZXhwciA9IGV4cHIucmVzdAogICAgd2hpbGUgZXhwciAhPSBuaWw6CiAgICAgICAgZGl2aXNvciA9IGV4cHIuZmlyc3QKICAgICAgICBkaXZpZGVuZCArPSBkaXZpc29yCiAgICAgICAgZXhwciA9IGV4cHIucmVzdAogICAgcmV0dXJuIGRpdmlkZW5kCgpkZWYgc3VidHJhY3Rpb24oZXhwcik6CiAgICBkaXZpZGVuZCA9IGV4cHIuZmlyc3QKICAgIGV4cHIgPSBleHByLnJlc3QKICAgIHdoaWxlIGV4cHIgIT0gbmlsOgogICAgICAgIGRpdmlzb3IgPSBleHByLmZpcnN0CiAgICAgICAgZGl2aWRlbmQgLT0gZGl2aXNvcgogICAgICAgIGV4cHIgPSBleHByLnJlc3QKICAgIHJldHVybiBkaXZpZGVuZAoKZGVmIG11bHRpcGxpY2F0aW9uKGV4cHIpOgogICAgZGl2aWRlbmQgPSBleHByLmZpcnN0CiAgICBleHByID0gZXhwci5yZXN0CiAgICB3aGlsZSBleHByICE9IG5pbDoKICAgICAgICBkaXZpc29yID0gZXhwci5maXJzdAogICAgICAgIGRpdmlkZW5kICo9IGRpdmlzb3IKICAgICAgICBleHByID0gZXhwci5yZXN0CiAgICByZXR1cm4gZGl2aWRlbmQKCmRlZiBkaXZpc2lvbihleHByKToKICAgIGRpdmlkZW5kID0gZXhwci5maXJzdAogICAgZXhwciA9IGV4cHIucmVzdAogICAgd2hpbGUgZXhwciAhPSBuaWw6CiAgICAgICAgZGl2aXNvciA9IGV4cHIuZmlyc3QKICAgICAgICBkaXZpZGVuZCAvPSBkaXZpc29yCiAgICAgICAgZXhwciA9IGV4cHIucmVzdAogICAgcmV0dXJuIGRpdmlkZW5kCg=="</span>
<span class="pl-en">exec</span>(<span class="pl-s1">base64</span>.<span class="pl-en">b64decode</span>(<span class="pl-s1">ob</span>.<span class="pl-en">encode</span>(<span class="pl-s">"ascii"</span>)).<span class="pl-en">decode</span>(<span class="pl-s">"ascii"</span>))
<span class="pl-c">##############</span>

<span class="pl-k">def</span> <span class="pl-en">calc_eval</span>(<span class="pl-s1">exp</span>):
    <span class="pl-s">"""</span>
<span class="pl-s">    &gt;&gt;&gt; calc_eval(Pair("define", Pair("a", Pair(1, nil))))</span>
<span class="pl-s">    'a'</span>
<span class="pl-s">    &gt;&gt;&gt; calc_eval("a")</span>
<span class="pl-s">    1</span>
<span class="pl-s">    &gt;&gt;&gt; calc_eval(Pair("+", Pair(1, Pair(2, nil))))</span>
<span class="pl-s">    3</span>
<span class="pl-s">    """</span>
    <span class="pl-k">if</span> <span class="pl-en">isinstance</span>(<span class="pl-s1">exp</span>, <span class="pl-v">Pair</span>):
        <span class="pl-s1">operator</span> <span class="pl-c1">=</span> <span class="pl-s1">exp</span>.<span class="pl-s1">first</span> <span class="pl-c"># UPDATE THIS FOR Q2, e.g (+ 1 2), + is the operator</span>
        <span class="pl-s1">operands</span> <span class="pl-c1">=</span> <span class="pl-s1">exp</span>.<span class="pl-s1">rest</span> <span class="pl-c"># UPDATE THIS FOR Q2, e.g (+ 1 2), 1 and 2 are operands</span>
        <span class="pl-k">if</span> <span class="pl-s1">operator</span> <span class="pl-c1">==</span> <span class="pl-s">'and'</span>: <span class="pl-c"># and expressions</span>
            <span class="pl-k">return</span> <span class="pl-en">eval_and</span>(<span class="pl-s1">operands</span>)
        <span class="pl-k">elif</span> <span class="pl-s1">operator</span> <span class="pl-c1">==</span> <span class="pl-s">'define'</span>: <span class="pl-c"># define expressions</span>
            <span class="pl-k">return</span> <span class="pl-en">eval_define</span>(<span class="pl-s1">operands</span>)
        <span class="pl-k">else</span>: <span class="pl-c"># Call expressions</span>
            <span class="pl-k">return</span> <span class="pl-en">calc_apply</span>(<span class="pl-en">calc_eval</span>(<span class="pl-s1">operator</span>), <span class="pl-s1">operands</span>.<span class="pl-en">map</span>(<span class="pl-s1">calc_eval</span>)) <span class="pl-c"># UPDATE THIS FOR Q2, what is type(operator)?</span>
    <span class="pl-k">elif</span> <span class="pl-s1">exp</span> <span class="pl-c1">in</span> <span class="pl-v">OPERATORS</span>:   <span class="pl-c"># Looking up procedures</span>
        <span class="pl-k">return</span> <span class="pl-v">OPERATORS</span>[<span class="pl-s1">exp</span>]
    <span class="pl-k">elif</span> <span class="pl-en">isinstance</span>(<span class="pl-s1">exp</span>, <span class="pl-s1">int</span>) <span class="pl-c1">or</span> <span class="pl-en">isinstance</span>(<span class="pl-s1">exp</span>, <span class="pl-s1">bool</span>):   <span class="pl-c"># Numbers and booleans</span>
        <span class="pl-k">return</span> <span class="pl-s1">exp</span>
    <span class="pl-k">elif</span> <span class="pl-s1">bindings</span>.<span class="pl-en">get</span>(<span class="pl-s1">exp</span>, <span class="pl-c1">False</span>): <span class="pl-c"># CHANGE THIS CONDITION FOR Q4 where are variables stored?</span>
        <span class="pl-k">return</span> <span class="pl-s1">bindings</span>[<span class="pl-s1">exp</span>] <span class="pl-c"># UPDATE THIS FOR Q4, how do you access a variable?</span>

<span class="pl-k">def</span> <span class="pl-en">calc_apply</span>(<span class="pl-s1">op</span>, <span class="pl-s1">args</span>):
    <span class="pl-k">return</span> <span class="pl-en">op</span>(<span class="pl-s1">args</span>)

<span class="pl-k">def</span> <span class="pl-en">floor_div</span>(<span class="pl-s1">args</span>):
    <span class="pl-s">"""</span>
<span class="pl-s">    &gt;&gt;&gt; floor_div(Pair(100, Pair(10, nil)))</span>
<span class="pl-s">    10</span>
<span class="pl-s">    &gt;&gt;&gt; floor_div(Pair(5, Pair(3, nil)))</span>
<span class="pl-s">    1</span>
<span class="pl-s">    &gt;&gt;&gt; floor_div(Pair(1, Pair(1, nil)))</span>
<span class="pl-s">    1</span>
<span class="pl-s">    &gt;&gt;&gt; floor_div(Pair(5, Pair(2, nil)))</span>
<span class="pl-s">    2</span>
<span class="pl-s">    &gt;&gt;&gt; floor_div(Pair(23, Pair(2, Pair(5, nil))))</span>
<span class="pl-s">    2</span>
<span class="pl-s">    &gt;&gt;&gt; calc_eval(Pair("//", Pair(4, Pair(2, nil))))</span>
<span class="pl-s">    2</span>
<span class="pl-s">    &gt;&gt;&gt; calc_eval(Pair("//", Pair(100, Pair(2, Pair(2, Pair(2, Pair(2, Pair(2, nil))))))))</span>
<span class="pl-s">    3</span>
<span class="pl-s">    &gt;&gt;&gt; calc_eval(Pair("//", Pair(100, Pair(Pair("+", Pair(2, Pair(3, nil))), nil))))</span>
<span class="pl-s">    20</span>
<span class="pl-s">    """</span>

    <span class="pl-s1">result</span> <span class="pl-c1">=</span> <span class="pl-s1">args</span>.<span class="pl-s1">first</span>
    <span class="pl-s1">divisors</span> <span class="pl-c1">=</span> <span class="pl-s1">args</span>.<span class="pl-s1">rest</span>
    <span class="pl-k">while</span> <span class="pl-s1">divisors</span> <span class="pl-c1">!=</span> <span class="pl-s1">nil</span>:
        <span class="pl-s1">divisor</span> <span class="pl-c1">=</span> <span class="pl-s1">divisors</span>.<span class="pl-s1">first</span>
        <span class="pl-s1">result</span> <span class="pl-c1">//=</span> <span class="pl-s1">divisor</span>
        <span class="pl-s1">divisors</span> <span class="pl-c1">=</span> <span class="pl-s1">divisors</span>.<span class="pl-s1">rest</span>
    <span class="pl-k">return</span> <span class="pl-s1">result</span>


<span class="pl-s1">scheme_t</span> <span class="pl-c1">=</span> <span class="pl-c1">True</span>   <span class="pl-c"># Scheme's #t</span>
<span class="pl-s1">scheme_f</span> <span class="pl-c1">=</span> <span class="pl-c1">False</span>  <span class="pl-c"># Scheme's #f</span>

<span class="pl-k">def</span> <span class="pl-en">eval_and</span>(<span class="pl-s1">expressions</span>):
    <span class="pl-s">"""</span>
<span class="pl-s">    &gt;&gt;&gt; calc_eval(Pair("and", Pair(1, nil)))</span>
<span class="pl-s">    1</span>
<span class="pl-s">    &gt;&gt;&gt; calc_eval(Pair("and", Pair(False, Pair("1", nil))))</span>
<span class="pl-s">    False</span>
<span class="pl-s">    &gt;&gt;&gt; calc_eval(Pair("and", Pair(1, Pair(Pair("//", Pair(5, Pair(2, nil))), nil))))</span>
<span class="pl-s">    2</span>
<span class="pl-s">    &gt;&gt;&gt; calc_eval(Pair("and", Pair(Pair('+', Pair(1, Pair(1, nil))), Pair(3, nil))))</span>
<span class="pl-s">    3</span>
<span class="pl-s">    &gt;&gt;&gt; calc_eval(Pair("and", Pair(Pair('-', Pair(1, Pair(0, nil))), Pair(Pair('/', Pair(5, Pair(2, nil))), nil))))</span>
<span class="pl-s">    2.5</span>
<span class="pl-s">    &gt;&gt;&gt; calc_eval(Pair("and", Pair(0, Pair(1, nil))))</span>
<span class="pl-s">    1</span>
<span class="pl-s">    &gt;&gt;&gt; calc_eval(Pair("and", nil))</span>
<span class="pl-s">    True</span>
<span class="pl-s">    """</span>

    <span class="pl-s1">val</span> <span class="pl-c1">=</span> <span class="pl-c1">True</span>
    <span class="pl-k">while</span> <span class="pl-s1">expressions</span> <span class="pl-c1">is</span> <span class="pl-c1">not</span> <span class="pl-s1">nil</span>:
        <span class="pl-s1">val</span> <span class="pl-c1">=</span> <span class="pl-en">calc_eval</span>(<span class="pl-s1">expressions</span>.<span class="pl-s1">first</span>)
        <span class="pl-k">if</span> <span class="pl-s1">val</span> <span class="pl-c1">is</span> <span class="pl-s1">scheme_f</span>:
            <span class="pl-k">return</span> <span class="pl-s1">scheme_f</span>        
        <span class="pl-s1">expressions</span> <span class="pl-c1">=</span> <span class="pl-s1">expressions</span>.<span class="pl-s1">rest</span>
        
    <span class="pl-k">return</span> <span class="pl-s1">val</span>

<span class="pl-s1">bindings</span> <span class="pl-c1">=</span> {}

<span class="pl-k">def</span> <span class="pl-en">eval_define</span>(<span class="pl-s1">expressions</span>):
    <span class="pl-s">"""</span>
<span class="pl-s">    &gt;&gt;&gt; eval_define(Pair("a", Pair(1, nil)))</span>
<span class="pl-s">    'a'</span>
<span class="pl-s">    &gt;&gt;&gt; eval_define(Pair("b", Pair(3, nil)))</span>
<span class="pl-s">    'b'</span>
<span class="pl-s">    &gt;&gt;&gt; eval_define(Pair("c", Pair("a", nil)))</span>
<span class="pl-s">    'c'</span>
<span class="pl-s">    &gt;&gt;&gt; calc_eval("c")</span>
<span class="pl-s">    1</span>
<span class="pl-s">    &gt;&gt;&gt; calc_eval(Pair("define", Pair("d", Pair("//", nil))))</span>
<span class="pl-s">    'd'</span>
<span class="pl-s">    &gt;&gt;&gt; calc_eval(Pair("d", Pair(4, Pair(2, nil))))</span>
<span class="pl-s">    2</span>
<span class="pl-s">    """</span>
    <span class="pl-s1">symbol</span>, <span class="pl-s1">value</span> <span class="pl-c1">=</span> <span class="pl-s1">expressions</span>.<span class="pl-s1">first</span>, <span class="pl-en">calc_eval</span>(<span class="pl-s1">expressions</span>.<span class="pl-s1">rest</span>.<span class="pl-s1">first</span>)
    <span class="pl-s1">bindings</span>[<span class="pl-s1">symbol</span>] <span class="pl-c1">=</span> <span class="pl-s1">value</span>
    <span class="pl-k">return</span> <span class="pl-s1">symbol</span>

<span class="pl-v">OPERATORS</span> <span class="pl-c1">=</span> { <span class="pl-s">"//"</span>: <span class="pl-s1">floor_div</span>, <span class="pl-s">"+"</span>: <span class="pl-s1">addition</span>, <span class="pl-s">"-"</span>: <span class="pl-s1">subtraction</span>, <span class="pl-s">"*"</span>: <span class="pl-s1">multiplication</span>, <span class="pl-s">"/"</span>: <span class="pl-s1">division</span> }

<span class="pl-k">class</span> <span class="pl-v">Pair</span>:
    <span class="pl-s">"""A pair has two instance attributes: first and rest. rest must be a Pair or nil</span>
<span class="pl-s"></span>
<span class="pl-s">    &gt;&gt;&gt; s = Pair(1, Pair(2, nil))</span>
<span class="pl-s">    &gt;&gt;&gt; s</span>
<span class="pl-s">    Pair(1, Pair(2, nil))</span>
<span class="pl-s">    &gt;&gt;&gt; print(s)</span>
<span class="pl-s">    (1 2)</span>
<span class="pl-s">    &gt;&gt;&gt; print(s.map(lambda x: x+4))</span>
<span class="pl-s">    (5 6)</span>
<span class="pl-s">    """</span>
    <span class="pl-k">def</span> <span class="pl-en">__init__</span>(<span class="pl-s1">self</span>, <span class="pl-s1">first</span>, <span class="pl-s1">rest</span>):
        <span class="pl-s1">self</span>.<span class="pl-s1">first</span> <span class="pl-c1">=</span> <span class="pl-s1">first</span>
        <span class="pl-s1">self</span>.<span class="pl-s1">rest</span> <span class="pl-c1">=</span> <span class="pl-s1">rest</span>

    <span class="pl-k">def</span> <span class="pl-en">__repr__</span>(<span class="pl-s1">self</span>):
        <span class="pl-k">return</span> <span class="pl-s">'Pair({0}, {1})'</span>.<span class="pl-en">format</span>(<span class="pl-en">repr</span>(<span class="pl-s1">self</span>.<span class="pl-s1">first</span>), <span class="pl-en">repr</span>(<span class="pl-s1">self</span>.<span class="pl-s1">rest</span>))

    <span class="pl-k">def</span> <span class="pl-en">__str__</span>(<span class="pl-s1">self</span>):
        <span class="pl-s1">s</span> <span class="pl-c1">=</span> <span class="pl-s">'('</span> <span class="pl-c1">+</span> <span class="pl-en">str</span>(<span class="pl-s1">self</span>.<span class="pl-s1">first</span>)
        <span class="pl-s1">rest</span> <span class="pl-c1">=</span> <span class="pl-s1">self</span>.<span class="pl-s1">rest</span>
        <span class="pl-k">while</span> <span class="pl-en">isinstance</span>(<span class="pl-s1">rest</span>, <span class="pl-v">Pair</span>):
            <span class="pl-s1">s</span> <span class="pl-c1">+=</span> <span class="pl-s">' '</span> <span class="pl-c1">+</span> <span class="pl-en">str</span>(<span class="pl-s1">rest</span>.<span class="pl-s1">first</span>)
            <span class="pl-s1">rest</span> <span class="pl-c1">=</span> <span class="pl-s1">rest</span>.<span class="pl-s1">rest</span>
        <span class="pl-k">if</span> <span class="pl-s1">rest</span> <span class="pl-c1">is</span> <span class="pl-c1">not</span> <span class="pl-s1">nil</span>:
            <span class="pl-s1">s</span> <span class="pl-c1">+=</span> <span class="pl-s">' . '</span> <span class="pl-c1">+</span> <span class="pl-en">str</span>(<span class="pl-s1">rest</span>)
        <span class="pl-k">return</span> <span class="pl-s1">s</span> <span class="pl-c1">+</span> <span class="pl-s">')'</span>

    <span class="pl-k">def</span> <span class="pl-en">__len__</span>(<span class="pl-s1">self</span>):
        <span class="pl-s1">n</span>, <span class="pl-s1">rest</span> <span class="pl-c1">=</span> <span class="pl-c1">1</span>, <span class="pl-s1">self</span>.<span class="pl-s1">rest</span>
        <span class="pl-k">while</span> <span class="pl-en">isinstance</span>(<span class="pl-s1">rest</span>, <span class="pl-v">Pair</span>):
            <span class="pl-s1">n</span> <span class="pl-c1">+=</span> <span class="pl-c1">1</span>
            <span class="pl-s1">rest</span> <span class="pl-c1">=</span> <span class="pl-s1">rest</span>.<span class="pl-s1">rest</span>
        <span class="pl-k">if</span> <span class="pl-s1">rest</span> <span class="pl-c1">is</span> <span class="pl-c1">not</span> <span class="pl-s1">nil</span>:
            <span class="pl-k">raise</span> <span class="pl-v">TypeError</span>(<span class="pl-s">'length attempted on improper list'</span>)
        <span class="pl-k">return</span> <span class="pl-s1">n</span>

    <span class="pl-k">def</span> <span class="pl-en">__eq__</span>(<span class="pl-s1">self</span>, <span class="pl-s1">p</span>):
        <span class="pl-k">if</span> <span class="pl-c1">not</span> <span class="pl-en">isinstance</span>(<span class="pl-s1">p</span>, <span class="pl-v">Pair</span>):
            <span class="pl-k">return</span> <span class="pl-c1">False</span>
        <span class="pl-k">return</span> <span class="pl-s1">self</span>.<span class="pl-s1">first</span> <span class="pl-c1">==</span> <span class="pl-s1">p</span>.<span class="pl-s1">first</span> <span class="pl-c1">and</span> <span class="pl-s1">self</span>.<span class="pl-s1">rest</span> <span class="pl-c1">==</span> <span class="pl-s1">p</span>.<span class="pl-s1">rest</span>

    <span class="pl-k">def</span> <span class="pl-en">map</span>(<span class="pl-s1">self</span>, <span class="pl-s1">fn</span>):
        <span class="pl-s">"""Return a Scheme list after mapping Python function FN to SELF."""</span>
        <span class="pl-s1">mapped</span> <span class="pl-c1">=</span> <span class="pl-en">fn</span>(<span class="pl-s1">self</span>.<span class="pl-s1">first</span>)
        <span class="pl-k">if</span> <span class="pl-s1">self</span>.<span class="pl-s1">rest</span> <span class="pl-c1">is</span> <span class="pl-s1">nil</span> <span class="pl-c1">or</span> <span class="pl-en">isinstance</span>(<span class="pl-s1">self</span>.<span class="pl-s1">rest</span>, <span class="pl-v">Pair</span>):
            <span class="pl-k">return</span> <span class="pl-v">Pair</span>(<span class="pl-s1">mapped</span>, <span class="pl-s1">self</span>.<span class="pl-s1">rest</span>.<span class="pl-en">map</span>(<span class="pl-s1">fn</span>))
        <span class="pl-k">else</span>:
            <span class="pl-k">raise</span> <span class="pl-v">TypeError</span>(<span class="pl-s">'ill-formed list'</span>)

<span class="pl-k">class</span> <span class="pl-s1">nil</span>:
    <span class="pl-s">"""The empty list"""</span>

    <span class="pl-k">def</span> <span class="pl-en">__repr__</span>(<span class="pl-s1">self</span>):
        <span class="pl-k">return</span> <span class="pl-s">'nil'</span>

    <span class="pl-k">def</span> <span class="pl-en">__str__</span>(<span class="pl-s1">self</span>):
        <span class="pl-k">return</span> <span class="pl-s">'()'</span>

    <span class="pl-k">def</span> <span class="pl-en">__len__</span>(<span class="pl-s1">self</span>):
        <span class="pl-k">return</span> <span class="pl-c1">0</span>

    <span class="pl-k">def</span> <span class="pl-en">map</span>(<span class="pl-s1">self</span>, <span class="pl-s1">fn</span>):
        <span class="pl-k">return</span> <span class="pl-s1">self</span>

<span class="pl-s1">nil</span> <span class="pl-c1">=</span> <span class="pl-en">nil</span>() <span class="pl-c"># Assignment hides the nil class; there is only one instance</span></pre></div>
<h2>lab11</h2>
<div class="highlight highlight-source-scheme"><pre class="notranslate">(<span class="pl-k">define</span> (<span class="pl-en">cadr</span><span class="pl-smi"> lst</span>) (<span class="pl-c1">car</span> (<span class="pl-c1">cdr</span> lst)))

(<span class="pl-k">define</span> (<span class="pl-en">make-kwlist1</span><span class="pl-smi"> keys values</span>)
  (<span class="pl-c1">cons</span> keys (<span class="pl-c1">cons</span> values nil))
)

(<span class="pl-k">define</span> (<span class="pl-en">get-keys-kwlist1</span><span class="pl-smi"> kwlist</span>) (<span class="pl-c1">car</span> kwlist))

(<span class="pl-k">define</span> (<span class="pl-en">get-values-kwlist1</span><span class="pl-smi"> kwlist</span>)
  (<span class="pl-c1">cadr</span> kwlist)
)

(<span class="pl-k">define</span> (<span class="pl-en">make-kwlist2</span><span class="pl-smi"> keys values</span>)
  (<span class="pl-k">if</span> (<span class="pl-c1">null?</span> keys) 
    <span class="pl-c1">nil</span> 
    (<span class="pl-c1">cons</span> (<span class="pl-c1">cons</span> 
            (<span class="pl-c1">car</span> keys) 
            (<span class="pl-c1">cons</span> (<span class="pl-c1">car</span> values) 
                  <span class="pl-c1">nil</span>
            )
          ) 
          (make-kwlist2 
            (<span class="pl-c1">cdr</span> keys)
            (<span class="pl-c1">cdr</span> values)
          )
    )
  ) 
)

(<span class="pl-k">define</span> (<span class="pl-en">get-keys-kwlist2</span><span class="pl-smi"> kwlist</span>) 
  (<span class="pl-k">if</span> (<span class="pl-c1">null?</span> kwlist) <span class="pl-c1">nil</span> (<span class="pl-c1">cons</span> (<span class="pl-c1">car</span> (<span class="pl-c1">car</span> kwlist)) (get-keys-kwlist2 (<span class="pl-c1">cdr</span> kwlist))))
)

(<span class="pl-k">define</span> (<span class="pl-en">get-values-kwlist2</span><span class="pl-smi"> kwlist</span>)
  (<span class="pl-k">if</span> (<span class="pl-c1">null?</span> kwlist) <span class="pl-c1">nil</span> (<span class="pl-c1">cons</span> (<span class="pl-c1">cadr</span> (<span class="pl-c1">car</span> kwlist)) (get-values-kwlist2 (<span class="pl-c1">cdr</span> kwlist))))
)

(<span class="pl-k">define</span> (<span class="pl-en">add-to-kwlist</span><span class="pl-smi"> kwlist key value</span>)
  (make-kwlist (<span class="pl-c1">append</span> (get-keys-kwlist kwlist) (<span class="pl-c1">list</span> key))  (<span class="pl-c1">append</span> (get-values-kwlist kwlist) (<span class="pl-c1">list</span> value)))
  
)

(<span class="pl-k">define</span> (<span class="pl-en">get-first-from-kwlist</span><span class="pl-smi"> kwlist key</span>)
 (<span class="pl-k">let</span>
      (
        (values (get-values-kwlist kwlist))
        (keys (get-keys-kwlist kwlist))
        (find (<span class="pl-k">lambda</span> (<span class="pl-v">f ks vs</span>) 
                      (<span class="pl-k">cond</span> ((<span class="pl-c1">null?</span> ks) nil) 
                            ((<span class="pl-c1">equal?</span> (<span class="pl-c1">car</span> ks) key) (<span class="pl-c1">car</span> vs))
                            (<span class="pl-k">else</span> (f 
                                    f
                                    (<span class="pl-c1">cdr</span> ks)
                                    (<span class="pl-c1">cdr</span> vs)
                                  )
                            )
                      )
              )
        )
      )
      (find find keys values)
  )      
)</pre></div>
<pre lang="sqlite" class="notranslate"><code class="notranslate">CREATE TABLE finals AS
  SELECT "RSF" AS hall, "61A" as course UNION
  SELECT "Wheeler"    , "61A"           UNION
  SELECT "Pimentel"   , "61A"           UNION
  SELECT "Li Ka Shing", "61A"           UNION
  SELECT "Stanley"    , "61A"           UNION
  SELECT "RSF"        , "61B"           UNION
  SELECT "Wheeler"    , "61B"           UNION
  SELECT "Morgan"     , "61B"           UNION
  SELECT "Wheeler"    , "61C"           UNION
  SELECT "Pimentel"   , "61C"           UNION
  SELECT "Soda 310"   , "61C"           UNION
  SELECT "Soda 306"   , "10"            UNION
  SELECT "RSF"        , "70";

CREATE TABLE sizes AS
  SELECT "RSF" AS room, 900 as seats    UNION
  SELECT "Wheeler"    , 700             UNION
  SELECT "Pimentel"   , 500             UNION
  SELECT "Li Ka Shing", 300             UNION
  SELECT "Stanley"    , 300             UNION
  SELECT "Morgan"     , 100             UNION
  SELECT "Soda 306"   , 80              UNION
  SELECT "Soda 310"   , 40              UNION
  SELECT "Soda 320"   , 30;

CREATE TABLE sharing AS
  SELECT a.course, COUNT(DISTINCT a.hall) AS shared FROM finals as a, finals as b 
    where a.course != b.course and a.hall = b.hall
  GROUP BY a.course;

CREATE TABLE pairs AS
  SELECT a.room || " and " || b.room || " together have " || (a.seats + b.seats) || " seats"AS rooms
  FROM sizes AS a, sizes AS b WHERE a.room &lt; b.room AND a.seats + b.seats &gt;= 1000
  ORDER BY a.seats + b.seats DESC;

CREATE TABLE big AS
  SELECT course FROM finals, sizes WHERE hall = room GROUP BY course HAVING sum(seats) &gt;= 1000;

CREATE TABLE remaining AS
  SELECT course, SUM(seats) - MAX(seats) AS remaining
    FROM finals, sizes WHERE hall = room GROUP BY course;


</code></pre></div>
<div style="font-size:small;margin-top:8px;float:right;">转载请注明出处</div>

<button class="btn btn-block" type="button" onclick="openComments()" id="cmButton">评论</button>
<div class="comments" id="comments"></div>

</div>
    <div id="footer"><div id="footer1">Copyright © <span id="copyrightYear"></span> <a href="https://LianSeKong.github.io/lizi">Lizi</a></div>
<div id="footer2">
    <span id="runday"></span><span>Powered by <a href="https://meekdai.com/Gmeek.html" target="_blank">Gmeek</a></span>
</div>

<script>
var now=new Date();
document.getElementById("copyrightYear").innerHTML=now.getFullYear();

if(""!=""){
    var startSite=new Date("");
    var diff=now.getTime()-startSite.getTime();
    var diffDay=Math.floor(diff/(1000*60*60*24));
    document.getElementById("runday").innerHTML="网站运行"+diffDay+"天"+" • ";
}
</script></div>
</body>
<script>
var IconList={'sun': 'M8 10.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5zM8 12a4 4 0 100-8 4 4 0 000 8zM8 0a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0V.75A.75.75 0 018 0zm0 13a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0v-1.5A.75.75 0 018 13zM2.343 2.343a.75.75 0 011.061 0l1.06 1.061a.75.75 0 01-1.06 1.06l-1.06-1.06a.75.75 0 010-1.06zm9.193 9.193a.75.75 0 011.06 0l1.061 1.06a.75.75 0 01-1.06 1.061l-1.061-1.06a.75.75 0 010-1.061zM16 8a.75.75 0 01-.75.75h-1.5a.75.75 0 010-1.5h1.5A.75.75 0 0116 8zM3 8a.75.75 0 01-.75.75H.75a.75.75 0 010-1.5h1.5A.75.75 0 013 8zm10.657-5.657a.75.75 0 010 1.061l-1.061 1.06a.75.75 0 11-1.06-1.06l1.06-1.06a.75.75 0 011.06 0zm-9.193 9.193a.75.75 0 010 1.06l-1.06 1.061a.75.75 0 11-1.061-1.06l1.06-1.061a.75.75 0 011.061 0z', 'moon': 'M9.598 1.591a.75.75 0 01.785-.175 7 7 0 11-8.967 8.967.75.75 0 01.961-.96 5.5 5.5 0 007.046-7.046.75.75 0 01.175-.786zm1.616 1.945a7 7 0 01-7.678 7.678 5.5 5.5 0 107.678-7.678z', 'sync': 'M1.705 8.005a.75.75 0 0 1 .834.656 5.5 5.5 0 0 0 9.592 2.97l-1.204-1.204a.25.25 0 0 1 .177-.427h3.646a.25.25 0 0 1 .25.25v3.646a.25.25 0 0 1-.427.177l-1.38-1.38A7.002 7.002 0 0 1 1.05 8.84a.75.75 0 0 1 .656-.834ZM8 2.5a5.487 5.487 0 0 0-4.131 1.869l1.204 1.204A.25.25 0 0 1 4.896 6H1.25A.25.25 0 0 1 1 5.75V2.104a.25.25 0 0 1 .427-.177l1.38 1.38A7.002 7.002 0 0 1 14.95 7.16a.75.75 0 0 1-1.49.178A5.5 5.5 0 0 0 8 2.5Z', 'home': 'M6.906.664a1.749 1.749 0 0 1 2.187 0l5.25 4.2c.415.332.657.835.657 1.367v7.019A1.75 1.75 0 0 1 13.25 15h-3.5a.75.75 0 0 1-.75-.75V9H7v5.25a.75.75 0 0 1-.75.75h-3.5A1.75 1.75 0 0 1 1 13.25V6.23c0-.531.242-1.034.657-1.366l5.25-4.2Zm1.25 1.171a.25.25 0 0 0-.312 0l-5.25 4.2a.25.25 0 0 0-.094.196v7.019c0 .138.112.25.25.25H5.5V8.25a.75.75 0 0 1 .75-.75h3.5a.75.75 0 0 1 .75.75v5.25h2.75a.25.25 0 0 0 .25-.25V6.23a.25.25 0 0 0-.094-.195Z', 'github': 'M8 0c4.42 0 8 3.58 8 8a8.013 8.013 0 0 1-5.45 7.59c-.4.08-.55-.17-.55-.38 0-.27.01-1.13.01-2.2 0-.75-.25-1.23-.54-1.48 1.78-.2 3.65-.88 3.65-3.95 0-.88-.31-1.59-.82-2.15.08-.2.36-1.02-.08-2.12 0 0-.67-.22-2.2.82-.64-.18-1.32-.27-2-.27-.68 0-1.36.09-2 .27-1.53-1.03-2.2-.82-2.2-.82-.44 1.1-.16 1.92-.08 2.12-.51.56-.82 1.28-.82 2.15 0 3.06 1.86 3.75 3.64 3.95-.23.2-.44.55-.51 1.07-.46.21-1.61.55-2.33-.66-.15-.24-.6-.83-1.23-.82-.67.01-.27.38.01.53.34.19.73.9.82 1.13.16.45.68 1.31 2.69.94 0 .67.01 1.3.01 1.49 0 .21-.15.45-.55.38A7.995 7.995 0 0 1 0 8c0-4.42 3.58-8 8-8Z', 'copy': 'M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z', 'check': 'M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z'};
var utterancesLoad=0;

let themeSettings={
    "dark": ["dark","moon","#00f0ff","dark-blue"],
    "light": ["light","sun","#ff5000","github-light"],
    "auto": ["auto","sync","","preferred-color-scheme"]
};
function changeTheme(mode, icon, color, utheme){
    document.documentElement.setAttribute("data-color-mode",mode);
    document.getElementById("themeSwitch").setAttribute("d",value=IconList[icon]);
    document.getElementById("themeSwitch").parentNode.style.color=color;
    if(utterancesLoad==1){utterancesTheme(utheme);}
}
function modeSwitch(){
    let currentMode=document.documentElement.getAttribute('data-color-mode');
    let newMode = currentMode === "light" ? "dark" : currentMode === "dark" ? "auto" : "light";
    localStorage.setItem("meek_theme", newMode);
    if(themeSettings[newMode]){
        changeTheme(...themeSettings[newMode]);
    }
}
function utterancesTheme(theme){
    const message={type:'set-theme',theme: theme};
    const iframe=document.getElementsByClassName('utterances-frame')[0];
    iframe.contentWindow.postMessage(message,'https://utteranc.es');
}
if(themeSettings[theme]){changeTheme(...themeSettings[theme]);}
console.log("\n %c Gmeek last https://github.com/Meekdai/Gmeek \n","padding:5px 0;background:#02d81d;color:#fff");
</script>

<script>
document.getElementById("pathHome").setAttribute("d",IconList["home"]);
document.getElementById("pathIssue").setAttribute("d",IconList["github"]);



function openComments(){
    cm=document.getElementById("comments");
    cmButton=document.getElementById("cmButton");
    cmButton.innerHTML="loading";
    span=document.createElement("span");
    span.setAttribute("class","AnimatedEllipsis");
    cmButton.appendChild(span);

    script=document.createElement("script");
    script.setAttribute("src","https://utteranc.es/client.js");
    script.setAttribute("repo","LianSeKong/lizi");
    script.setAttribute("issue-term","title");
    
    if(localStorage.getItem("meek_theme")=="dark"){script.setAttribute("theme","dark-blue");}
    else if(localStorage.getItem("meek_theme")=="light") {script.setAttribute("theme","github-light");}
    else{script.setAttribute("theme","preferred-color-scheme");}
    
    script.setAttribute("crossorigin","anonymous");
    script.setAttribute("async","");
    cm.appendChild(script);

    int=self.setInterval("iFrameLoading()",200);
}

function iFrameLoading(){
    var utterances=document.getElementsByClassName('utterances');
    if(utterances.length==1){
        if(utterances[0].style.height!=""){
            utterancesLoad=1;
            int=window.clearInterval(int);
            document.getElementById("cmButton").style.display="none";
            console.log("utterances Load OK");
        }
    }
}

document.addEventListener('DOMContentLoaded', () => {
    const createClipboardHTML = (codeContent, additionalClasses = '') => `
        <pre class="notranslate"><code class="notranslate">${codeContent}</code></pre>
        <div class="clipboard-container position-absolute right-0 top-0 ${additionalClasses}">
            <clipboard-copy class="ClipboardButton btn m-2 p-0" role="button" style="display: inherit;">
                <svg height="16" width="16" class="octicon octicon-copy m-2"><path d="${IconList["copy"]}"></path></svg>
                <svg height="16" width="16" class="octicon octicon-check color-fg-success m-2 d-none"><path d="${IconList["check"]}"></path></svg>
            </clipboard-copy>
            <div class="copy-feedback">Copied!</div>
        </div>
    `;

    const handleCodeElements = (selector = '') => {
        document.querySelectorAll(selector).forEach(codeElement => {
            const codeContent = codeElement.innerHTML;
            const newStructure = document.createElement('div');
            newStructure.className = 'snippet-clipboard-content position-relative overflow-auto';
            newStructure.innerHTML = createClipboardHTML(codeContent);

            const parentElement = codeElement.parentElement;
            if (selector.includes('highlight')) {
                parentElement.insertBefore(newStructure, codeElement.nextSibling);
                parentElement.removeChild(codeElement);
            } else {
                parentElement.parentElement.replaceChild(newStructure, parentElement);
            }
        });
    };

    handleCodeElements('pre.notranslate > code.notranslate');
    handleCodeElements('div.highlight > pre.notranslate');

    let currentFeedback = null;
    document.querySelectorAll('clipboard-copy').forEach(copyButton => {
        copyButton.addEventListener('click', () => {
            const codeContent = copyButton.closest('.snippet-clipboard-content').innerText;
            const tempTextArea = document.createElement('textarea');
            tempTextArea.value = codeContent;
            document.body.appendChild(tempTextArea);
            tempTextArea.select();
            document.execCommand('copy');
            document.body.removeChild(tempTextArea);

            const copyIcon = copyButton.querySelector('.octicon-copy');
            const checkIcon = copyButton.querySelector('.octicon-check');
            const copyFeedback = copyButton.nextElementSibling;

            if (currentFeedback && currentFeedback !== copyFeedback) {currentFeedback.style.display = 'none';}
            currentFeedback = copyFeedback;

            copyIcon.classList.add('d-none');
            checkIcon.classList.remove('d-none');
            copyFeedback.style.display = 'block';
            copyButton.style.borderColor = 'var(--color-success-fg)';

            setTimeout(() => {
                copyIcon.classList.remove('d-none');
                checkIcon.classList.add('d-none');
                copyFeedback.style.display = 'none';
                copyButton.style.borderColor = '';
            }, 2000);
        });
    });
});

</script>


</html>
